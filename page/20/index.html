<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"jarod.vip","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script><meta name="description" content="记录生活中的点点滴滴"><meta property="og:type" content="website"><meta property="og:title" content="Jarod&#39;s Blog"><meta property="og:url" content="https://jarod.vip/page/20/index.html"><meta property="og:site_name" content="Jarod&#39;s Blog"><meta property="og:description" content="记录生活中的点点滴滴"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Jarod"><meta property="article:tag" content="VPS,hexo,linux,debian,windows,macos,生活,工作"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jarod.vip/page/20/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/20/index.html","title":""}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Jarod's Blog</title><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script><script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Jarod's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">Jarod's Blog</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jarod</p><div class="site-description" itemprop="description">记录生活中的点点滴滴</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">299</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">345</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/jarodvip" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jarodvip" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></div></aside></div><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/11/05/linux-vps%E4%B8%80%E9%94%AE%E6%9B%B4%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/11/05/linux-vps%E4%B8%80%E9%94%AE%E6%9B%B4%E6%8D%A2%E8%BD%AF%E4%BB%B6%E6%BA%90%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Linux VPS一键更换软件源脚本</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-05 00:09:52" itemprop="dateCreated datePublished" datetime="2018-11-05T00:09:52+08:00">2018-11-05</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>719</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>有时候会遇到<code>Linux</code>的源更新速度非常的缓慢，特别是在国内使用默认的源，因为国内的网络环境，经常会出现无法更新，更新缓慢的情况。在这种情况下，更换一个更适合或者说更近，更快的软件源，会为你的<code>Linux</code>安装更新操作更加的流畅和顺利。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><strong>系统要求：</strong><code>CentOS 5+</code>、<code>Ubuntu 14.04+</code>、<code>Debian 7+</code> 使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#下载脚本</span><br><span class="line">wget  git.io/superupdate.sh</span><br><span class="line">#运行脚本</span><br><span class="line">bash superupdate.sh</span><br></pre></td></tr></table></figure><p>如果第一步你出现错误或执行后无任何输出，请检查是否安装<code>wget</code>和<code>ca-certificates</code>，使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#Debian、Ubuntu</span><br><span class="line">apt-get install -y wget &amp;&amp; apt-get install -y ca-certificates</span><br><span class="line">#CentOS</span><br><span class="line">yum install -y wget &amp;&amp; yum install -y ca-certificates</span><br></pre></td></tr></table></figure><p>对于<code>Debian</code>默认换源为<code>Fastly CDN</code>的<code>mirror</code>这个源有<code>Fastly</code>的加持对境外主机都有不错的速度。对于<code>Ubuntu</code>和 <code>CentOS</code>系统都默认换为阿里云的<code>mirror</code>，这个源有阿里云全球<code>CDN</code>的加持，全球都有不错的速度。 对于<code>Debian</code>系统还设置了四套其他的源，阿里云，<code>CloudFront CDN</code>，网易<code>163</code>，中科大的源，请根据需要使用参数一键设置如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bash superupdate.sh cn</span><br><span class="line">bash superupdate.sh 163</span><br><span class="line">bash superupdate.sh aliyun</span><br><span class="line">bash superupdate.sh aws</span><br></pre></td></tr></table></figure><p>如果配置的文件不满意，一键还原</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash superupdate.sh restore</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/11/03/openvz%E8%99%9A%E6%8B%9F%E5%8C%96%EF%BC%88%E6%9E%B6%E6%9E%84%EF%BC%89vps%E5%AE%89%E8%A3%85windows%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/11/03/openvz%E8%99%9A%E6%8B%9F%E5%8C%96%EF%BC%88%E6%9E%B6%E6%9E%84%EF%BC%89vps%E5%AE%89%E8%A3%85windows%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">OpenVZ虚拟化（架构）VPS安装Windows一键安装脚本</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-03 23:57:19" itemprop="dateCreated datePublished" datetime="2018-11-03T23:57:19+08:00">2018-11-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>768</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>简介 很多人认为OpenVZ虚拟化的VPS都无法安装Windows，但事实上是可以通过Qemu来安装的，所以我就随便写了个破脚本：一键安装VNC+Qemu+附赠一个WinXP的iso VNC脚本直接采用的：<a target="_blank" rel="noopener" href="http://blog.ievo.top/index.php/archives/19/">http://blog.ievo.top/index.php/archives/19/</a> 安装方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget  --no-check-certificate https://raw.githubusercontent.com/lpl2002/ovz_win/master/ovz_win.sh</span><br><span class="line">bash ovz_win.sh</span><br></pre></td></tr></table></figure><p>食用方法 1、下载系统ISO，这里我提供一个精简版XP的。建议Ghost</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://odrive.aptx.xin/System/DEEPIN-LITEXP-6.2.iso</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">qemu-img create newvm.img 10G #newvm是硬盘，10G是硬盘大小</span><br><span class="line">qemu-system-i386 -cdrom winxp.iso -m 256 -boot d newvm.img  -k en-us #newvm.img是刚刚建立的硬盘，winxp.iso是你的系统安装盘 256M是内存大小</span><br></pre></td></tr></table></figure><p>3、安装后后期管理（注意提前打开远程桌面）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-i386 -hda xitong.img -boot c -m 512M -k en-us -usb -redir tcp:3389::3389 //xitong.img是创立的硬盘，512M是内存 3389映射到虚拟机上</span><br></pre></td></tr></table></figure><p>注意事项 1、仅支持Debian 目前在Debian 8上测试通过。 2、安装VNC+桌面环境时可能需要输入键盘以及VNC密码 3、若有被主机商封VPS，本人拒不负责。 参考地址：<a target="_blank" rel="noopener" href="http://www.kwx.gd/CentOSApp/CentOS-OpenVZ-Windows.html">http://www.kwx.gd/CentOSApp/CentOS-OpenVZ-Windows.html</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/11/03/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E5%86%85%E6%A0%B8%E5%B9%B6%E5%BC%80%E5%90%AF-bbr-%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/11/03/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E5%86%85%E6%A0%B8%E5%B9%B6%E5%BC%80%E5%90%AF-bbr-%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">一键安装最新内核并开启 BBR 脚本</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-03 23:56:38" itemprop="dateCreated datePublished" datetime="2018-11-03T23:56:38+08:00">2018-11-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="本脚本适用环境"><a href="#本脚本适用环境" class="headerlink" title="本脚本适用环境"></a>本脚本适用环境</h2><p>系统支持：CentOS 6+，Debian 7+，Ubuntu 12+ 虚拟技术：OpenVZ 以外的，比如 KVM、Xen、VMware 等 内存要求：≥128M 日期　　：2017 年 05 月 15 日</p><h3 id="关于本脚本"><a href="#关于本脚本" class="headerlink" title="关于本脚本"></a>关于本脚本</h3><p>1、本脚本已在 <a target="_blank" rel="noopener" href="http://xpsss.com/819.html"><strong>Linode</strong></a>上的 VPS 全部测试通过。 2、当脚本检测到 VPS 的虚拟方式为 OpenVZ 时，会提示错误，并自动退出安装。 3、脚本运行完重启发现开不了机的，打开 VPS 后台控制面板的 VNC, 开机卡在 grub 引导, 手动选择内核即可。 4、由于是使用最新版系统内核，最好请勿在生产环境安装，以免产生不可预测之后果。</p><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>使用root用户登录，运行以下命令：</p><p>wget –no-check-certificate <a target="_blank" rel="noopener" href="https://github.com/teddysun/across/raw/master/bbr.sh">https://github.com/teddysun/across/raw/master/bbr.sh</a><br>chmod +x bbr.sh<br>.&#x2F;bbr.sh</p><p>安装完成后，脚本会提示需要重启 VPS，输入 y 并回车后重启。 重启完成后，进入 VPS，验证一下是否成功安装最新内核并开启 TCP BBR，输入以下命令：</p><p>uname -r</p><p>查看内核版本，含有 4.12 就表示 OK 了</p><p>sysctl net.ipv4.tcp_available_congestion_control</p><p>返回值一般为： net.ipv4.tcp_available_congestion_control &#x3D; bbr cubic reno</p><p>sysctl net.ipv4.tcp_congestion_control</p><p>返回值一般为： net.ipv4.tcp_congestion_control &#x3D; bbr</p><p>sysctl net.core.default_qdisc</p><p>返回值一般为： net.core.default_qdisc &#x3D; fq</p><p>lsmod grep bbr</p><p>返回值有 tcp_bbr 模块即说明bbr已启动。</p><h3 id="内核升级方法"><a href="#内核升级方法" class="headerlink" title="内核升级方法"></a>内核升级方法</h3><p>如果是 CentOS 系统，执行如下命令即可升级内核：</p><p>yum –enablerepo&#x3D;elrepo-kernel -y install kernel-ml kernel-ml-devel</p><p>CentOS 6 的话，执行命令：</p><p>sed -i ‘s&#x2F;^default&#x3D;.*&#x2F;default&#x3D;0&#x2F;g’ &#x2F;boot&#x2F;grub&#x2F;grub.conf</p><p>CentOS 7 的话，执行命令：</p><p>grub2-set-default 0</p><p>如果是 Debian&#x2F;Ubuntu 系统，则需要手动下载最新版内核来安装升级。 去<a target="_blank" rel="noopener" href="http://kernel.ubuntu.com/~kernel-ppa/mainline/">这里</a>下载最新版的内核 deb 安装包。 如果系统是 64 位，则下载 amd64 的 linux-image 中含有 generic 这个 deb 包； 如果系统是 32 位，则下载 i386 的 linux-image 中含有 generic 这个 deb 包； 安装的命令如下（以最新版的 64 位 4.12.4 举例而已，请替换为下载好的 deb 包）：</p><p>dpkg -i linux-image-4.12.4-041204-generic_4.12.4-041204.201707271932_amd64.deb</p><p>安装完成后，再执行命令：</p><p>&#x2F;usr&#x2F;sbin&#x2F;update-grub</p><p>最后，重启 VPS 即可。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/11/03/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E5%91%BD%E4%BB%A4%E5%92%8C%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/11/03/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E7%9A%84%E5%91%BD%E4%BB%A4%E5%92%8C%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">杂七杂八的命令和脚本</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-03 23:45:25" itemprop="dateCreated datePublished" datetime="2018-11-03T23:45:25+08:00">2018-11-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">其他</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>349</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>宝塔开心版 1、安装免费版宝塔面板（v5.9） 2、运行脚本（Centos）</p><p>1</p><p>2</p><p>wget <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/zhouxudong666/-/master/install">https://raw.githubusercontent.com/zhouxudong666/-/master/install</a></p><p>sh install</p><p>Debian（我稍微改了一下）</p><p>1</p><p>2</p><p>wget —no–check–certificate <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/lpl2002/-/master/install">https://raw.githubusercontent.com/lpl2002/-/master/install</a></p><p>bash install</p><h1 id="方法："><a href="#方法：" class="headerlink" title="方法："></a>方法<a target="_blank" rel="noopener" href="https://xpsss.com/wp-content/uploads/2018/09/panel.tar.gz">：</a></h1><h1 id="1-免费版升级专业版-2-删除原panel文件夹-3-下载我提供的panel文件夹压缩包-4-解压到-www-server-5-etc-init-d-bt-restart-执行这个重启面板-6-开心使用"><a href="#1-免费版升级专业版-2-删除原panel文件夹-3-下载我提供的panel文件夹压缩包-4-解压到-www-server-5-etc-init-d-bt-restart-执行这个重启面板-6-开心使用" class="headerlink" title="1.免费版升级专业版 2.删除原panel文件夹 3.下载我提供的panel文件夹压缩包 4.解压到&#x2F;www&#x2F;server 5.&#x2F;etc&#x2F;init.d&#x2F;bt restart 执行这个重启面板 6.开心使用"></a>1.免费版升级专业版 2.删除原panel文件夹 3.下载我提供的panel文件夹压缩包 4.解压到&#x2F;www&#x2F;server 5.&#x2F;etc&#x2F;init.d&#x2F;bt restart 执行这个重启面板 6.开心使用</h1></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/11/03/%E9%AD%94%E6%94%B9-bbr-%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC-for-debian-centos/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/11/03/%E9%AD%94%E6%94%B9-bbr-%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC-for-debian-centos/" class="post-title-link" itemprop="url">魔改 BBR 一键脚本 for Debian & CentOS</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-03 23:41:53" itemprop="dateCreated datePublished" datetime="2018-11-03T23:41:53+08:00">2018-11-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>魔改 BBR 一键脚本，包含 Debian &amp;&amp; CentOS 两个版本。 此文所述版本，仅适用于 <code>KVM</code> 的 Debian 7+ (32&#x2F;64 bit) 或 CentOS 6+ (64 bit)。</p><h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>这个是 <code>新手简装</code> 版本，只需 <code>运行脚本第一项+重启+运行脚本第二项</code>。一般用户只需使用此版本，并建议使用该版本。此版本不需要编译的过程，直接安装 v4.10.2 内核。</p><p># Debian 7+<br># fool<br>wget <a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/general/releases/download/3.4.2.1/tcp/_nanqinlang-fool-1.3.0.sh">https://github.com/tcp-nanqinlang/general/releases/download/3.4.2.1/tcp\_nanqinlang-fool-1.3.0.sh</a><br>bash tcp_nanqinlang-fool-1.3.0.sh</p><p>这个是 <code>进阶</code> 版本。提供自定义内核版本功能，只建议有<code>用户自己指定安装的内核的版本</code>需求的用户使用，例如你想安装 v4.12.10 版本的内核，就需要使用这个版本。目前此版本脚本提供 linux kernel <code>v4.9.3 ~ v4.14.32</code> 支持。</p><p># Debian 7+<br># pro<br>wget <a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/general/releases/download/3.4.2.1/tcp/_nanqinlang-pro-3.4.2.1.sh">https://github.com/tcp-nanqinlang/general/releases/download/3.4.2.1/tcp\_nanqinlang-pro-3.4.2.1.sh</a><br>bash tcp_nanqinlang-pro-3.4.2.1.sh</p><p>这个是 <code>CentOS</code> 平台的版本，仍未确定为正式版，请勿在重要环境使用。</p><p># CentOS 6&#x2F;7<br># only 64 bit<br>wget <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/tcp-nanqinlang/general/master/General/CentOS/bash/tcp/_nanqinlang-1.3.2.sh">https://raw.githubusercontent.com/tcp-nanqinlang/general/master/General/CentOS/bash/tcp\_nanqinlang-1.3.2.sh</a><br>bash tcp_nanqinlang-1.3.2.sh</p><h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a><a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/wiki/wiki/general#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"></a>使用说明</h2><p>出现四个选项供以选择：</p><h3 id="安装内核"><a href="#安装内核" class="headerlink" title="安装内核"></a><a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/wiki/wiki/general#%E5%AE%89%E8%A3%85%E5%86%85%E6%A0%B8"></a>安装内核</h3><p><code>必须使用此命令安装内核并重启！</code> 安装内核时，请注意区别：</p><ul><li>Debian</li><li>下载内核安装包至 &#x2F;home&#x2F;tcp_nanqinlang，脚本第二项运行完成后移除该文件夹</li><li>系统中只会留下新安装的内核，原有的所有内核都会被移除</li><li>对于 pro 版本，安装的内核版本由你指定，若不确定应输入哪个版本号，直接回车即可，会安装 v4.10.10 版本内核</li><li>指定安装内核版本为 v4.13.x 时，会使用新版本内核适配的源码</li><li>本魔改项目暂不支持 v4.14 及以上版本内核</li><li>此命令执行完毕后，请根据脚本内提示确认内核是否已安装完毕</li><li>CentOS：套路和上面 Debian 的大致相当，主要在于以下区别：</li><li>不会询问安装版本号，直接安装内核版本 v4.12.10</li><li>内核安装完成后，系统中会装有 <code>linux-ml-4.12.10</code> <code>linux-ml-devel-4.12.10</code> <code>linux-ml-headers-4.12.10</code> 三个内核</li><li>内核安装完成后，系统中依旧会留有旧版本的 linux-x.xx.xx-ml 内核，这些残留的内核，会在执行第二个选项 “安装并启用算法” 后被移除</li></ul><p>确认内核更换完成后，<code>重启你的 vps</code>。 重启开机后，<code>再次运行该脚本，选择第二项: 安装并开启算法</code>。</p><h3 id="开启算法"><a href="#开启算法" class="headerlink" title="开启算法"></a><a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/wiki/wiki/general#%E5%BC%80%E5%90%AF%E7%AE%97%E6%B3%95"></a>开启算法</h3><p>用于编译并启用魔改 BBR 算法。</p><h3 id="检查运行状态"><a href="#检查运行状态" class="headerlink" title="检查运行状态"></a><a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/wiki/wiki/general#%E6%A3%80%E6%9F%A5%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81"></a>检查运行状态</h3><p>用于检查 tcp_nanqinlang 是否已被 加载 (installed) 和 启用 (running)。</p><h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a><a target="_blank" rel="noopener" href="https://github.com/tcp-nanqinlang/wiki/wiki/general#%E5%8D%B8%E8%BD%BD"></a>卸载</h3><p>不会删除已安装的内核，仅移除 sysctl.conf 中的相关设置项。然后重启机器后，魔改 BBR 才会停止运作</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/10/28/%E4%BD%BF%E7%94%A8plik%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%B6%E9%95%BF-%E4%B8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/10/28/%E4%BD%BF%E7%94%A8plik%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%B6%E9%95%BF-%E4%B8%8B/" class="post-title-link" itemprop="url">使用Plik搭建一个临时文件上传系统，自定义时长/下载即摧毁</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-28 00:17:34" itemprop="dateCreated datePublished" datetime="2018-10-28T00:17:34+08:00">2018-10-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p><strong>说明：</strong><code>Plik</code>是一个基于<code>golang</code>的可扩展且友好的临时文件上传系统。上传者可自定义文件保留时长，设置下载密码，允许上传者随时删除文件，设置下载一次就自动删除，二维码下载，上传者还可以选择不保存在服务器里，直接传到免费服务(貌似用的<code>ShareX</code>)，还支持在线播放<code>mp3</code>&#x2F;<code>mp4</code>文件，及一些功能拓展，挺强的，安装也简单。</p><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/plik1.png" alt="请输入图片描述" title="请输入图片描述"> <img src="https://www.jarods.org/wp-content/uploads/2018/10/plik2.png" alt="请输入图片描述" title="请输入图片描述"></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>**Github地址：**<a target="_blank" rel="noopener" href="https://github.com/root-gg/plik">https://github.com/root-gg/plik</a> 可以直接用作者编译好的包安装，下载地址：<a target="_blank" rel="noopener" href="https://github.com/root-gg/plik/releases">点击查看</a>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#下载最新版本的Plik，目前是1.2.3版本</span><br><span class="line">wget https://github.com/root-gg/plik/releases/download/1.2.3/plik-1.2.3-linux-64bits.tar.gz</span><br><span class="line">#解压</span><br><span class="line">tar xzvf plik-1.2.3-linux-64bits.tar.gz</span><br><span class="line">#运行</span><br><span class="line">cd plik-1.2.3/server</span><br><span class="line">./plikd</span><br></pre></td></tr></table></figure><p>然后就可以访问<code>IP:8080</code>查看了，程序的配置文件在<code>server/plikd.cfg</code>，可以设置监听端口&#x2F;最大上传&#x2F;默认保存天数等等，上传文件默认保存在<code>server/files</code>。 如果<code>Web</code>界面打不开，可能需要开启防火墙端口。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6</span><br><span class="line">iptables -I INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line">#CentOS 7</span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>最后设置完毕后就需要程序常驻后台了，可以使用<code>screen</code>命令。</p><h2 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h2><p><strong>1、安装Docker</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6</span><br><span class="line">rpm -iUvh http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</span><br><span class="line">yum update -y</span><br><span class="line">yum -y install docker-io</span><br><span class="line">service docker start</span><br><span class="line">chkconfig docker on</span><br><span class="line"></span><br><span class="line">#CentOS 7、Debian、Ubuntu</span><br><span class="line">curl -sSL https://get.docker.com/  sh</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker.service</span><br></pre></td></tr></table></figure><p><strong>2、安装镜像</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#建一个保存Plik数据的文件夹</span><br><span class="line">mkdir /Plik &amp;&amp; cd /Plik</span><br><span class="line">#下载配置文件，可以保持默认，也可以编辑</span><br><span class="line">wget https://raw.githubusercontent.com/root-gg/plik/master/server/plikd.cfg</span><br><span class="line">#启动容器</span><br><span class="line">docker run --name pilk -d -p 8080:8080 -v /Plik/plikd.cfg:/home/plik/server/plikd.cfg -v /Plik/files:/home/plik/server/files rootgg/plik</span><br></pre></td></tr></table></figure><p>然后就可以打开<code>IP:8080</code>了，配置文件为<code>/Plik/plikd.cfg</code>，上传文件在<code>/Plik/files</code>，当然外部端口，文件路径可自行修改。 最后我们需要给外部存储目录，也就是<code>/Plik/files</code>文件夹<code>777</code>权限，不然上传会失败。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 /Plik/files</span><br></pre></td></tr></table></figure><h2 id="域名访问"><a href="#域名访问" class="headerlink" title="域名访问"></a>域名访问</h2><p>如果想通过域名访问的就需要使用域名反代了，这里就使用最方便的<code>Caddy</code>，请提前解析好域名到服务器，过程会自动签发<code>SSL</code>。 <strong>1、安装Caddy</strong> 使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/caddy_install.sh &amp;&amp; chmod +x caddy_install.sh &amp;&amp; bash caddy_install.sh install http.filemanager</span><br><span class="line">#备用地址</span><br><span class="line">wget -N --no-check-certificate https://www.moerats.com/usr/shell/Caddy/caddy_install.sh &amp;&amp; chmod +x caddy_install.sh &amp;&amp; bash caddy_install.sh install http.filemanager</span><br></pre></td></tr></table></figure><p><strong>2、配置Caddy</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#以下全部内容是一个整体，请修改域名后一起复制到SSH运行！</span><br><span class="line">echo &quot;xx.com &#123;</span><br><span class="line"> gzip</span><br><span class="line"> tls admin@moerats.com</span><br><span class="line"> proxy / 0.0.0.0:8080</span><br><span class="line">&#125;&quot; &gt; /usr/local/caddy/Caddyfile</span><br></pre></td></tr></table></figure><p><code>tls</code>参数会自动帮你签发<code>ssl</code>证书，如果你要使用自己的<code>ssl</code>，改为<code>tls /root/xx.crt /root/xx.key</code>即可。后面为<code>ssl</code>证书路径。 <strong>3、启动Caddy</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/caddy start</span><br></pre></td></tr></table></figure><p>如果启动失败，使用<code>tail -f /tmp/caddy.log</code>查看启动日志，可以自己分析下错误日志，如果不会就留言。 启动成功后就可以打开<code>https://xx.com</code>访问了。最后<code>Plik</code>附带一个功能强大的<code>golang</code>多平台<code>cli</code>客户端，不过使用起来挺麻烦的，适用性貌似不是很大，就不研究了。当然如果你有兴趣，可以查看<code>Github</code>项目地址。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/10/24/linux-vps%E4%B8%80%E9%94%AE%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4swap%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/10/24/linux-vps%E4%B8%80%E9%94%AE%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4swap%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/" class="post-title-link" itemprop="url">Linux VPS一键添加/删除Swap虚拟内存</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-24 11:30:24" itemprop="dateCreated datePublished" datetime="2018-10-24T11:30:24+08:00">2018-10-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>200</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p><strong>说明</strong>：很多人的VPS服务器由于内存太小，会导致很多进程被杀掉，这时候就需要我们添加Swap虚拟内存了，这里就整了个一键脚本方便懒人或小白使用。</p><h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><p>提示：脚本不支持<code>OpenVZ</code>架构，安装会自动退出。 <strong>运行命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://yun.939.me/sh/swap.sh &amp;&amp; bash swap.sh</span><br></pre></td></tr></table></figure><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/16768230.png" alt="swap_add.png"> 本文搬运自<a target="_blank" rel="noopener" href="https://www.moerats.com/archives/722/">https://www.moerats.com/archives/722/</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/10/24/linux%E4%B8%8B%E9%94%90%E9%80%9F%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%E5%8F%8Acentos%E3%80%81debian%E6%9B%B4%E6%8D%A2%E5%86%85%E6%A0%B8%E6%95%99%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/10/24/linux%E4%B8%8B%E9%94%90%E9%80%9F%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%E5%8F%8Acentos%E3%80%81debian%E6%9B%B4%E6%8D%A2%E5%86%85%E6%A0%B8%E6%95%99%E7%A8%8B/" class="post-title-link" itemprop="url">Linux下锐速一键安装脚本及Centos、Debian更换内核教程</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-24 11:03:06" itemprop="dateCreated datePublished" datetime="2018-10-24T11:03:06+08:00">2018-10-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p><strong>一、安装</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -qO /tmp/appex.sh &quot;https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh&quot; &amp;&amp; bash /tmp/appex.sh &#x27;install&#x27;</span><br></pre></td></tr></table></figure><p><strong>二、更换内核方法</strong>： （一）CentOS系统更换内核 1、CentOS 6 32位系统更换内核为：2.6.32-504.el6</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh http://vault.centos.org/6.6/os/i386/Packages/kernel-firmware-2.6.32-504.el6.noarch.rpm --nodeps --force</span><br><span class="line">rpm -ivh http://vault.centos.org/6.6/os/i386/Packages/kernel-2.6.32-504.el6.i686.rpm --force</span><br></pre></td></tr></table></figure><p>2、CentOS 6 64位系统更换内核为：2.6.32-642.el6.x86_64</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh http://vault.centos.org/6.8/os/x86_64/Packages/kernel-firmware-2.6.32-642.el6.noarch.rpm --nodeps --force</span><br><span class="line">rpm -ivh http://vault.centos.org/6.8/os/x86_64/Packages/kernel-2.6.32-642.el6.x86_64.rpm --force</span><br></pre></td></tr></table></figure><p>3、CentOS 7 系统更换内核为： 3.10.0-229.1.2.el7.x86_64</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh http://vault.centos.org/7.0.1406/os/x86_64/Packages/kernel-3.10.0-123.el7.x86_64.rpm --force</span><br></pre></td></tr></table></figure><p>4、查看内核是否更换成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa  grep kernel</span><br></pre></td></tr></table></figure><p>如果成功，重启VPS即可。 （二）Debian系统更换内核 debian 8 64更换内核为3.16.0.4-deb内核 1、安装新内核</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://security-cdn.debian.org/pool/updates/main/l/linux/linux-image-3.16.0-4-amd64_3.16.43-2+deb8u5_amd64.deb</span><br><span class="line">dpkg -i linux-image-3.16.0-4*.deb</span><br></pre></td></tr></table></figure><p>2、删除就内核</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -lgrep linux-image</span><br></pre></td></tr></table></figure><p>会显示所有内核，删除除3.16.0.4以外的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove 内核</span><br></pre></td></tr></table></figure><p>更新系统引导</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-grub</span><br></pre></td></tr></table></figure><p>重启即可 <strong>三、强制安装指定内核版本的锐速</strong>: 查看内核 uname -r，发现版本号为3.10.0-514.2.2.el7.x86_64 查看版本库：<a target="_blank" rel="noopener" href="https://github.com/0oVicero0/serverSpeeder_kernel/blob/master/serverSpeeder.txt">https://github.com/0oVicero0/serverSpeeder_kernel&#x2F;blob&#x2F;master&#x2F;serverSpeeder.txt</a>，找个最接近的 开始安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; chmod +x appex.sh &amp;&amp; bash appex.sh install &#x27;3.10.0-123.el7.x86_64&#x27;</span><br></pre></td></tr></table></figure><p>查看是否启动：&#x2F;appex&#x2F;bin&#x2F;serverSpeeder.sh start 如果不能，换个版本，继续重复以上步骤。 <strong>四、卸载</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -qO /tmp/appex.sh &quot;https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh&quot; &amp;&amp; bash /tmp/appex.sh &#x27;uninstall&#x27;</span><br></pre></td></tr></table></figure><p><strong>五、使用</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">启动命令 /appex/bin/serverSpeeder.sh start</span><br><span class="line">停止加速 /appex/bin/serverSpeeder.sh stop</span><br><span class="line">状态查询 /appex/bin/serverSpeeder.sh status</span><br><span class="line">更新许可 /appex/bin/serverSpeeder.sh renewLic</span><br><span class="line">重新启动 /appex/bin/serverSpeeder.sh restart</span><br></pre></td></tr></table></figure><p><strong>特征: 0.#0 Only for Linux.</strong></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/10/23/proxmox%E7%BB%88%E6%9E%81%E6%95%99%E7%A8%8B-%E6%89%93%E9%80%A0%E7%BA%AFipv6%E8%99%9A%E6%8B%9F%E6%9C%BA-%E7%8B%AC%E7%AB%8Bip%E8%99%9A%E6%8B%9F%E6%9C%BA-proxmox%E9%9B%86%E7%BE%A4/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/10/23/proxmox%E7%BB%88%E6%9E%81%E6%95%99%E7%A8%8B-%E6%89%93%E9%80%A0%E7%BA%AFipv6%E8%99%9A%E6%8B%9F%E6%9C%BA-%E7%8B%AC%E7%AB%8Bip%E8%99%9A%E6%8B%9F%E6%9C%BA-proxmox%E9%9B%86%E7%BE%A4/" class="post-title-link" itemprop="url">Proxmox终极教程/打造纯IPV6虚拟机/独立IP虚拟机/proxmox集群/</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-23 15:35:55" itemprop="dateCreated datePublished" datetime="2018-10-23T15:35:55+08:00">2018-10-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>11k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>10 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>看完这篇文章，你的 KS3C 等等各种独立服务器将可以同时实现多种功能。 <strong>针对 PT</strong></p><ul><li>多客户端刷 PT(Deluge,utorrent,qbittorrent,rtorrent,transmission…..so on..)</li><li>压片</li><li>制种发种</li><li>115&#x2F;百度网盘同步</li><li>还有最重要的~挂 QQ！！hah 等</li></ul><p><strong>针对虚拟化</strong></p><ul><li>你可以开设无限的独立 IPV6，NAT 的 IPV4 小鸡</li><li>如果你有额外的 ipv4，还可以开设独立 IPV4 独立 IPV6 的小鸡！</li><li>支持 windows+linux 任意系统，其中 win 必须 KVM 架构，linux 可 KVM 可 lxc(类似 openvz)</li></ul><h2 id="1-前言"><a href="#1-前言" class="headerlink" title="_1._前言"></a>_1._前言</h2><p>对于大多数 PTbox 玩家来说，手里的盒子，也就是各种各样的独立服务器，买回来后仅仅也就是用来安装一个 rutorrent 或者 deluge 这样的 pt 客户端，然后刷刷流量，这样对于一个独立服务器来说简直太浪费了，就拿 KS3C 来说，KS3C 的标准配置是 i3+8g+2t+100Mbps，高配的甚至有 I5+16G 内存的配置，这种级别配置可远远不止可以干这些！ 于是想到了利用这些服务器打造个同时能够支持 win+linux 双系统适合 PTer 的服务器，linux 下安装诸如 qBittorrent、ruTorrent、deluge 等等的客户端，win 下可以使用 utorrent 这个只支持 win 的客户端，然后还可以在 win 系统下直接进行制种，然后通过任意客户端做种，然后像百度网盘这种只能很好的在 win 下运行的网盘，你还可以在你的盒子里实时与度盘同步，等等等等。。都可以在同一个服务器上实现，而不仅仅是安装一个 PT 客户端~~接下来看教程吧！</p><h2 id="2-安装环境："><a href="#2-安装环境：" class="headerlink" title="2.安装环境："></a><em>2.</em><strong>安装环境：</strong></h2><h3 id="2-1-操作系统：Debian9"><a href="#2-1-操作系统：Debian9" class="headerlink" title="_2.1._操作系统：Debian9"></a>_2.1._操作系统：<strong>Debian9</strong></h3><p>说明一下，必须要是<strong>D****ebian9</strong>系统，原因不详细说了，主要是因为能用最新 PVE 内核，支持 BBR 加速， 对于<strong>KS</strong>或者<strong>SYS</strong>这种<strong>ovh</strong>系列的服务器，只需要安装官方的 <strong>VPS Proxmox VE 5 (64bits)</strong> 这个模板即可，可以省略安装 proxmox 这一步！！！ 对于<strong>online</strong>系列的服务器，如果有硬 raid，你可以直接使用系统的 proxmox5 模板，如果是软 raid，默认只能 raid1，所以就安装 debian9 吧。 如何你的服务器的提供商没有提供 debian9 系统，比如 oneprovider 的 15 欧等等，只能安装 debian7，你可以参考以下操作 <strong>debian7 升级为 debian8：</strong></p><ol><li>apt-get update</li><li>apt-get upgrade</li><li>sed s&#x2F;wheezy&#x2F;jessie&#x2F; &#x2F;etc&#x2F;apt&#x2F;sources.list tee &#x2F;etc&#x2F;apt&#x2F;sources.list</li><li>apt-get update</li><li>apt-get upgrade</li><li>apt-get dist-upgrade</li></ol><p><strong>debian8 升级为 debian9：</strong></p><ol><li>apt-get update</li><li>apt-get upgrade</li><li>sed s&#x2F;jessie&#x2F;stretch&#x2F; &#x2F;etc&#x2F;apt&#x2F;sources.list tee &#x2F;etc&#x2F;apt&#x2F;sources.list</li><li>apt-get update</li><li>apt-get upgrade</li><li>apt-get dist-upgrade</li></ol><p>期间遇到任何提示都选择 Y 就行了，最后都执行完了后执行 reboot 重启系统！ 反正总之就是你需要 debian9 的系统！！！！！</p><h3 id="2-2-服务器环境："><a href="#2-2-服务器环境：" class="headerlink" title="2.2.服务器环境："></a><em>2.2.</em><strong>服务器环境：</strong></h3><p>DigitalOcean 的 4 核 8G 内存方案 Debian9.4 系统 **ipv4：**<strong>167.99.172.150</strong> **ipv6：**<strong>2604:a880:2:d0::add:1001</strong> 这里建议最低双核 4G 内存的机器使用本文方案！否则可能会用的不愉快~</p><h2 id="3-安装-proxmox"><a href="#3-安装-proxmox" class="headerlink" title="3.安装 proxmox"></a><em>3.</em><strong>安装 proxmox</strong></h2><p>proxmox 是一款只支持 debian 系统的虚拟化环境，可以安装基于 KVM 和 LXC(openvz 进化版)的虚拟机，使用很方便，有图形界面。接下来安装 proxmox5.X 系列。</p><h3 id="3-1-编辑-etc-hosts"><a href="#3-1-编辑-etc-hosts" class="headerlink" title="_3.1._编辑&#x2F;etc&#x2F;hosts"></a>_3.1._编辑&#x2F;etc&#x2F;hosts</h3><p>比如你登录服务器后显示 <strong>root@server1</strong>，那么你的服务器的名称就是server1， 你可以通过修改**&#x2F;etc&#x2F;hostname**文件修改它。然后你需要保持你的&#x2F;etc&#x2F;hosts 文件如下</p><ol><li><p>127.0.0.1 localhost.localdomain localhost</p></li><li><p>167.99.172.150 server1.proxmox.com server1 pvelocalhost</p></li><li><p># The following lines are desirable for IPv6 capable hosts</p></li><li><p>::1 localhost ip6-localhost ip6-loopback</p></li><li><p>ff02::1 ip6-allnodes</p></li><li><p>ff02::2 ip6-allrouters</p></li></ol><h3 id="3-2-安装-Proxmox-VE"><a href="#3-2-安装-Proxmox-VE" class="headerlink" title="_3.2._安装 Proxmox VE"></a>_3.2._安装 Proxmox VE</h3><p>配置 repository</p><ol><li>echo “deb <a target="_blank" rel="noopener" href="http://download.proxmox.com/debian/pve">http://download.proxmox.com/debian/pve</a> stretch pve-no-subscription” &gt; &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;pve-install-repo.list</li><li>wget <a target="_blank" rel="noopener" href="http://download.proxmox.com/debian/proxmox-ve-release-5.x.gpg">http://download.proxmox.com/debian/proxmox-ve-release-5.x.gpg</a> -O &#x2F;etc&#x2F;apt&#x2F;trusted.gpg.d&#x2F;proxmox-ve-release-5.x.gpg</li><li>apt update &amp;&amp; apt dist-upgrade</li></ol><p>遇到如下界面选择<strong>keep the local version</strong>回车即可！ <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-1.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> 安装 Proxmox VE 包</p><ol><li>apt install proxmox-ve postfix open-iscsi</li></ol><p>遇到以下提示，由于我们只是来跑 PT，我们选择<strong>local only</strong>即可。 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-2.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> 然后重启你的系统 proxmox5.X 就安装完成了！</p><h2 id="4-配置-Proxmox-及-samba"><a href="#4-配置-Proxmox-及-samba" class="headerlink" title="_4._配置 Proxmox 及 samba"></a>_4._配置 Proxmox 及 samba</h2><h3 id="4-1-开启-BBR-及-ipv4、ipv6-转发"><a href="#4-1-开启-BBR-及-ipv4、ipv6-转发" class="headerlink" title="_4.1._开启 BBR 及 ipv4、ipv6 转发"></a>_4.1._开启 BBR 及 ipv4、ipv6 转发</h3><p>编辑**&#x2F;etc&#x2F;sysctl.conf** 按 Ctrl+K 清空原有所有配置，改成如下</p><ol><li>net.core.default_qdisc=fq</li><li>net.ipv4.tcp_congestion_control=bbr</li><li>net.ipv4.conf.all.rp_filter=1</li><li>net.ipv4.icmp_echo_ignore_broadcasts=1</li><li>net.ipv4.conf.default.forwarding=1</li><li>net.ipv4.conf.default.proxy_arp = 0</li><li>net.ipv4.ip_forward=1</li><li>kernel.sysrq = 1</li><li>net.ipv4.conf.default.send_redirects = 1</li><li>net.ipv4.conf.all.send_redirects = 0</li><li>net.ipv6.conf.eth0.autoconf=0</li><li>net.ipv6.conf.eth0.accept_ra=2</li><li>net.ipv6.conf.default.forwarding=1</li><li>net.ipv6.conf.all.forwarding=1</li><li>net.ipv6.conf.default.proxy_ndp=1</li><li>net.ipv6.conf.all.proxy_ndp=1</li></ol><p>**注意：**上面的 eth0 改成你对应的主端口！ 然后执行以下命令使设置生效</p><ol><li>sysctl -p</li></ol><h3 id="4-2-配置网络端口"><a href="#4-2-配置网络端口" class="headerlink" title="_4.2._配置网络端口"></a>_4.2._配置网络端口</h3><p>执行命令</p><ol><li>ip addr</li></ol><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/476-3.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> 如上图，这里的主端口是 eth0，也就是绑定了你 ipv4 和 ipv6 地址的端口，根据你的情况看！ 于是我们要修改**&#x2F;etc&#x2F;network&#x2F;interface**文件，默认的如下</p><ol><li><p># Generated by the DigitalOcean provisioning process on 2018-04-09T13:42:50Z</p></li><li><p># See ‘man interfaces’ on a Debian&#x2F;Ubuntu systems.</p></li><li><p># The network configuration was generated from <a target="_blank" rel="noopener" href="http://169.254.169.254/metadata/v1.json">http://169.254.169.254/metadata/v1.json</a>.</p></li><li><p># You may also find the it on the locally attached CDROM under ‘digitalocean_meta_data.json’</p></li><li><p>auto lo</p></li><li><p>iface lo inet loopback</p></li><li><p>dns-nameservers 67.207.67.2 67.207.67.3</p></li><li><p>auto eth0</p></li><li><p>iface eth0 inet static</p></li><li><p>hwaddress 5e:9a:17:e6:df:9d</p></li><li><p>address 167.99.172.150</p></li><li><p>netmask 255.255.240.0</p></li><li><p>gateway 167.99.160.1</p></li><li><p>post-up ifup eth0:1</p></li><li><p>post-up ifup eth0:2</p></li><li><p>auto eth0:1</p></li><li><p>iface eth0:1 inet6 static</p></li><li><p>hwaddress 5e:9a:17:e6:df:9d</p></li><li><p>address 2604:A880:0002:00D0:0000:0000:0ADD:1001&#x2F;64</p></li><li><p>gateway 2604:a880:0002:00d0:0000:0000:0000:0001</p></li><li><p>auto eth0:2</p></li><li><p>iface eth0:2 inet static</p></li><li><p>hwaddress 5e:9a:17:e6:df:9d</p></li><li><p>address 10.46.0.6&#x2F;255.255.0.0</p></li></ol><p>  <strong>我们将其改成如下内容</strong></p><ol><li><p># Generated by the DigitalOcean provisioning process on 2018-04-09T13:42:50Z</p></li><li><p># See ‘man interfaces’ on a Debian&#x2F;Ubuntu systems.</p></li><li><p># The network configuration was generated from <a target="_blank" rel="noopener" href="http://169.254.169.254/metadata/v1.json">http://169.254.169.254/metadata/v1.json</a>.</p></li><li><p># You may also find the it on the locally attached CDROM under ‘digitalocean_meta_data.json’</p></li><li><p>auto lo</p></li><li><p>iface lo inet loopback</p></li><li><p>dns-nameservers 67.207.67.2 67.207.67.3</p></li><li><p>auto vmbr0</p></li><li><p>iface vmrb0 inet static</p></li><li><p>hwaddress 5e:9a:17:e6:df:9d</p></li><li><p>address 167.99.172.150</p></li><li><p>netmask 255.255.240.0</p></li><li><p>gateway 167.99.160.1</p></li><li><p>post-up ifup vmbr0:1</p></li><li><p>auto vmbr0:1</p></li><li><p>iface vmbr0:1 inet6 static</p></li><li><p>hwaddress 5e:9a:17:e6:df:9d</p></li><li><p>address 2604:A880:0002:00D0:0000:0000:0ADD:1001&#x2F;64</p></li><li><p>gateway 2604:a880:0002:00d0:0000:0000:0000:0001</p></li><li><p>auto vmbr1</p></li><li><p>iface vmbr1 inet static</p></li><li><p>address 192.168.1.254</p></li><li><p>netmask 255.255.255.0</p></li><li><p>bridge_ports none</p></li><li><p>bridge_stp off</p></li><li><p>bridge_fd 0</p></li><li><p>post-up iptables -t nat -A POSTROUTING -s ‘192.168.1.0&#x2F;24’ -o vmbr0 -j MASQUERADE</p></li><li><p>post-down iptables -t nat -D POSTROUTING -s ‘192.168.1.0&#x2F;24’ -o vmbr0 -j MASQUERADE</p></li><li><p>post-up iptables -t nat -A PREROUTING -i vmbr0 -p tcp --dport 3389 -j DNAT --to 192.168.1.10:3389</p></li><li><p>post-down iptables -t nat -D PREROUTING -i vmbr0 -p tcp --dport 3389 -j DNAT --to 192.168.1.10:3389</p></li><li><p>post-up iptables -t nat -A PREROUTING -i vmbr0 -p tcp --dport 8888 -j DNAT --to 192.168.1.10:8888</p></li><li><p>post-down iptables -t nat -D PREROUTING -i vmbr0 -p tcp --dport 8888 -j DNAT --to 192.168.1.10:8888</p></li><li><p>post-up iptables -t nat -A PREROUTING -i vmbr0 -p tcp --dport 9999 -j DNAT --to 192.168.1.10:9999</p></li><li><p>post-down iptables -t nat -D PREROUTING -i vmbr0 -p tcp --dport 9999 -j DNAT --to 192.168.1.10:9999</p></li><li><p>post-up iptables -t nat -A PREROUTING -i vmbr0 -p udp --dport 9999 -j DNAT --to 192.168.1.10:9999</p></li><li><p>post-down iptables -t nat -D PREROUTING -i vmbr0 -p udp --dport 9999 -j DNAT --to 192.168.1.10:9999</p></li><li><p>auto vmbr2</p></li><li><p>iface vmbr2 inet6 static</p></li><li><p>address 2604:a880:2:d0::add:1002</p></li><li><p>netmask 64</p></li><li><p>bridge_ports none</p></li><li><p>bridge_stp off</p></li><li><p>bridge_fd 0</p></li><li><p>post-up echo 1 &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;all&#x2F;proxy_ndp</p></li><li><p>post-up echo 1 &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;all&#x2F;forwarding</p></li><li><p>post-up echo 1 &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;default&#x2F;forwarding</p></li><li><p>post-up &#x2F;sbin&#x2F;ip -f inet6 neigh add proxy 2604:a880:2:d0::add:1002 dev vmbr2</p></li><li><p>post-up &#x2F;sbin&#x2F;ip -f inet6 neigh add proxy 2604:a880:2:d0::add:1003 dev vmbr0</p></li><li><p>post-up &#x2F;sbin&#x2F;ip -f inet6 route add 2604:a880:2:d0::add:1003 dev vmbr2</p></li></ol><p>保存退出，然后执行命令</p><ol><li>&#x2F;etc&#x2F;init.d&#x2F;networking restart</li></ol><p>这样我们的网络就配置好了</p><h3 id="4-3-配置-samba"><a href="#4-3-配置-samba" class="headerlink" title="_4.3._配置 samba"></a>_4.3._配置 samba</h3><p>安装 samba</p><ol><li>apt-get update</li><li>apt-get install samba</li></ol><p>编辑&#x2F;etc&#x2F;samba&#x2F;smb.conf 文件，在最后添加如下内容</p><ol><li>[models]</li><li>path = &#x2F;home&#x2F;ptdown</li><li>available = yes</li><li>browsable = yes</li><li>writable = yes</li><li>create mask = 0777</li><li>write list = windows</li></ol><p>给文件夹权限</p><ol><li>chmod -R 777 &#x2F;home&#x2F;ptdown</li></ol><p>添加 samba 用户，并设置密码</p><ol><li>adduser windows</li><li>smbpasswd -a windows</li></ol><p>重启 samba 服务让设置生效</p><ol><li>&#x2F;etc&#x2F;init.d&#x2F;samba reload</li><li>&#x2F;etc&#x2F;init.d&#x2F;samba restart</li></ol><h2 id="5-安装-windows-系统"><a href="#5-安装-windows-系统" class="headerlink" title="_5._安装 windows 系统"></a>_5._安装 windows 系统</h2><p>这里我们的 IP 是167.99.172.150，于是我们打开</p><ol><li><a target="_blank" rel="noopener" href="https://167.99.172.150:8006/">https://167.99.172.150:8006</a></li></ol><p>然后输入你的 root 账户登录就行了，语言可选 Chinese 中文！界面如下 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-4.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"></p><h3 id="5-1-下载镜像"><a href="#5-1-下载镜像" class="headerlink" title="_5.1._下载镜像"></a>_5.1._下载镜像</h3><p>首先我们需要下载 windows 的镜像，这里我们选择安装 windows2008_R2 系统，并将镜像放到**&#x2F;var&#x2F;lib&#x2F;vz&#x2F;template&#x2F;iso&#x2F;**目录</p><h3 id="5-2-创建虚拟机"><a href="#5-2-创建虚拟机" class="headerlink" title="_5.2._创建虚拟机"></a>_5.2._创建虚拟机</h3><p>①点击右上角的创建虚拟机，随便设置个名称，点下一步。 ②操作系统：镜像文件选择刚才的那个 ISO，设置如下图，根据你要安装的 windows 版本设置，这里是 win2008_r2。 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-5.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> ③硬盘：大小随意设置，最低 30G 吧，这个无所谓！其它设置默认，不影响操作！ ④CPU：如果你是 i3&#x2F;i5，核那里选择 2 就可以了一般，i7&#x2F;E3 之类的可以选择 3 或者 4，根据你的服务器情况，这个可以随时更改的，没关系~ ⑤内存：一般设置成 2048 也就是 2G 就可以了，win2008 不怎么耗内存的！ ⑥网络：选择桥接模式，桥接刚才我们创建的那个 vmbr1 端口就可以了！ 最后确认完成就 OK 了 接下来点击启动我们选中左边刚创建的那个虚拟机，然后点击启动，再点控制台！ <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-6.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"></p><h3 id="5-3-安装-win2008"><a href="#5-3-安装-win2008" class="headerlink" title="_5.3._安装 win2008"></a>_5.3._安装 win2008</h3><p>打开控制台后，首先点击下一步，然后点击立即安装，然后选择下图中的那项点下一步 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-7.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> 然后接受条款，下一步，然后选择自定义安装，下一步，然后直接下一步开始 win2008 的安装，接下来等个几分钟就可以进入系统了。</p><h3 id="5-4-配置网络"><a href="#5-4-配置网络" class="headerlink" title="_5.4._配置网络"></a>_5.4._配置网络</h3><p>进入系统后，首先我们将 windows 防火墙关闭，然后我们配置网络如下，保存设置，这样网络就通了 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-8.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"></p><h3 id="4-3-配置-samba-1"><a href="#4-3-配置-samba-1" class="headerlink" title="_4.3._配置 samba"></a>_4.3._配置 samba</h3><p>我们在之前在 linux 上配置好了 samba，现在只用连接就行了，打开计算机 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-9.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> 然后点浏览，点击这个 IP 地址，然后输入用户名密码，就是你之前设置的那个 samba 用户名密码，然后选中 models，确认再确认就行了，于是你的电脑多了一个 Z 盘，这就是你的 linux 上的那个目录！ <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-10.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;">   此时，windows 与 linux 已经文件互通了，因为是内网，虽然是挂载的，但跟本地磁盘没有区别！！</p><h2 id="6-使用说明"><a href="#6-使用说明" class="headerlink" title="_6._使用说明"></a>_6._使用说明</h2><h3 id="6-1-远程桌面"><a href="#6-1-远程桌面" class="headerlink" title="_6.1._远程桌面"></a>_6.1._远程桌面</h3><p>在 windows 下，因为上面设置了 3389 端口转发，win 远程桌面的默认端口，所以你可以在任意一台 windows 电脑上运行 mstsc 打开远程桌面连接，如下，然后输入你刚才设置的密码，用户名是 administrator，即可远程连接！如何你没有设置 3389，比如 3390，那么你可以在计算机那里输入 IP:3390 即可连接！ <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-11.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"></p><h3 id="6-2-utorrent-使用"><a href="#6-2-utorrent-使用" class="headerlink" title="_6.2._utorrent 使用"></a>_6.2._utorrent 使用</h3><p>由于我上面只转发了 3389 以及 8888 和 9999 端口，其中 3389 用于远程桌面，所以 8888 和 9999 可以分别用于 utorrent 的 webui 和连接端口，在 utorrent 中设置如下 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-12.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-13.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"></p><h2 id="7-常见问题"><a href="#7-常见问题" class="headerlink" title="_7._常见问题"></a>_7._常见问题</h2><h3 id="7-1-interface-文件详解"><a href="#7-1-interface-文件详解" class="headerlink" title="_7.1._interface 文件详解"></a>_7.1._interface 文件详解</h3><p><strong>解释下上面的各种配置</strong> <strong>vmbr0~vmbr2：</strong> proxmox 的虚拟端口，你可以接着按这个示例添加！ **post_up-post_down：**设置端口转发的，因为服务器大部分就一个 IP，这样可以设置端口转发，让外界直接和虚拟机通信 **vmbr2：**上面红色的内容表示添加了一个额外的 ipv6 地址，大多数服务商给的 ipv6 都是&#x2F;64 之类的，其实这就意味着，你拥有很多很多很多地址，所以你可以按照上面示例接着在后面添加地址，比如这里就是下面这个</p><ol><li>post-up &#x2F;sbin&#x2F;ip -f inet6 neigh add proxy 2604:a880:2:d0::add:1004 dev eth0</li><li>post-up &#x2F;sbin&#x2F;ip -f inet6 route add 2604:a880:2:d0::add:1004 dev vmbr2</li></ol><p>配置 ipv6 地址 首先为虚拟机添加一个新的网络接口 vmbr2，它本身 ipv6 地址就作为网关地址，你自己添加的额外的 ipv6 地址就作为虚拟机的地址，ipv6 的 DNS 就设置为 google 的就可以了 2001:4860:4860::8888 和 2001:4860:4860::8844，然后小鸡的 ipv6 不出意外就通了，理论上硬件允许的话你可以开<strong>无限个虚拟机</strong> <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-14.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"></p><h3 id="7-2-免重启添加转发规则"><a href="#7-2-免重启添加转发规则" class="headerlink" title="7.2.免重启添加转发规则"></a><em>7.2.</em><strong>免重启添加转发规则</strong></h3><p>比如我们在 vmbr1 下新加了一个转发 6666 到虚拟机 6666 的规则，我们可以执行以下命令</p><ol><li>ifdown vmbr1</li><li>ifup vmbr1</li></ol><p>然后在虚拟机的网络切换那里把网络端口随便切换一个，再切换回来，就直接生效了！</p><h3 id="7-3-添加额外的独立-IP"><a href="#7-3-添加额外的独立-IP" class="headerlink" title="_7.3._添加额外的独立 IP"></a>_7.3._添加额外的独立 IP</h3><p>这个很简单，主要一般是要绑定 MAC 以 SYS 系列为例，假设我买了个 IP 192.168.1.100，然后后台有个地方可以设置 Virtual Mac，设置好了，把新添加的虚拟机的 mac 改成这个 Vitual Mac,然后设置 IP 地址：192.168.1.100， 掩码：255.255.255.255 网关：192.168.1.254 记住桥接网络端口是你的默认的网络端口，比如我这里是 vmbr0！ 即可，其它主机商类似，可以看看他们的配置 WIKI！</p><h3 id="7-4-KVM-虚拟机无法关机"><a href="#7-4-KVM-虚拟机无法关机" class="headerlink" title="_7.4._KVM 虚拟机无法关机"></a>_7.4._KVM 虚拟机无法关机</h3><p>centos 执行</p><p>yum install acpid</p><p>debian&#x2F;ubuntu 执行</p><p>apt-get install acpid</p><h3 id="7-5-虚拟机自启动"><a href="#7-5-虚拟机自启动" class="headerlink" title="_7.5._虚拟机自启动"></a>_7.5._虚拟机自启动</h3><p>选中你要自启动的虚拟机，选中右边的选项，开机自启动设置为是即可</p><h3 id="7-6-配置集群"><a href="#7-6-配置集群" class="headerlink" title="_7.6._配置集群"></a>_7.6._配置集群</h3><h4 id="7-6-1-对于内网的机器"><a href="#7-6-1-对于内网的机器" class="headerlink" title="_7.6.1._对于内网的机器"></a>_7.6.1._对于内网的机器</h4><p>假设三台机器，IP 分别为 机器 A：192.168.100.10 机器 B：192.168.100.11 机器 C：192.168.100.12 全新安装完 proxmox 后，假设 A 为主机，在主机上执行</p><p>pvecm create YOUR-CLUSTER-NAME</p><p>在其它需要加入的小鸡上执行</p><p>pvecm add 192.168.1.10</p><p>这样就添加成功了，注意，必须是同一个网段！！！</p><h4 id="7-6-2-对于外网的机器"><a href="#7-6-2-对于外网的机器" class="headerlink" title="_7.6.2._对于外网的机器"></a>_7.6.2._对于外网的机器</h4><p>这个主要涉及到跨网段，我说个思路吧 假设三台机器，hostname 分别为 a、b、c，IP 分别为 机器 A：92.18.24.10 机器 B：12.16.87.11 机器 C：19.68.64.12 那么我们需要做两件事，第一是修改 hostname，这是写下 a 的示例，b，c 类似</p><ol><li><p>127.0.0.1 localhost.localdomain localhost</p></li><li><p>92.18.24.10 a.proxmox.com a pvelocalhost</p></li><li><p># corosync network hosts</p></li><li><p>10.10.1.151 a-corosync.proxmox.com a-corosync</p></li><li><p>10.10.1.152 b-corosync.proxmox.com b-corosync</p></li><li><p>10.10.1.153 c-corosync.proxmox.com c-corosync</p></li><li><p># The following lines are desirable for IPv6 capable hosts</p></li><li><p>::1 localhost ip6-localhost ip6-loopback</p></li><li><p>ff02::1 ip6-allnodes</p></li><li><p>ff02::2 ip6-allrouters</p></li></ol><p>然后我们需要为每个虚拟机添加一个新的 corosync 端口，然后你需要通过 GRE 隧道之类的方式打通这三个 corosync 端口，实现三个机器诸如 10.10.1.X 这样的内网 IP 能互相 PING 的通！ 然后我们假设 A 为主机，在 a 上执行命令创建集群</p><p>pvecm create YOUR-CLUSTER-NAME -bindnet0_addr 10.10.1.151 -ring0_addr a-corosync</p><p>在 b、c 上分别执行命令加入集群</p><p>pvecm add 92.18.24.10 -ring0_addr b-corosync<br>pvecm add 92.18.24.10 -ring0_addr c-corosync</p><p>这样就可以了！！</p><h3 id="7-7-配置-NFS-存储"><a href="#7-7-配置-NFS-存储" class="headerlink" title="_7.7._配置 NFS 存储"></a>_7.7._配置 NFS 存储</h3><p>proxmox 其实是支持自定义定时备份的，但需要一个存储系统，好像支持的很多，我选了 nfs，然后对于备份，还是别在同一台机器，这里的教程是针对 debian 系统的！如下 安装 nfs</p><p>apt-get install nfs-kernel-server</p><p>创建共享目录</p><p>mkdir &#x2F;home&#x2F;nfs</p><p>编辑&#x2F;etc&#x2F;exports 文件，在文件末添加共享目录信息</p><p>&#x2F;xx&#x2F;xxx&#x2F; *(rw,sync,no_root_squash)</p><p>*填写你所允许的客户端 IP，也就是 proxmox 服务器的 IP，&#x2F;xx&#x2F;xxx&#x2F;是共享目录，这里我们是&#x2F;home&#x2F;nfs,配置完成后我们保存退出，执行命令使配置生效</p><p>exportfs -r</p><p>然后点击 proxmox 主页左边的数据中心，右边的存储，添加 nfs,然后配置如下 <img src="https://www.jarods.org/wp-content/uploads/2018/10/476-15.png" alt="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;" title="Proxmox 终极教程&#x2F;打造纯 IPV6 虚拟机&#x2F;独立 IP 虚拟机&#x2F;proxmox 集群&#x2F;"> 其中 ID 随便设置，服务器就是你刚配置 nfs 的服务器 IP，Export 就是你设置的共享目录，内容里面可以选择支持备份的对象。</p><h2 id="8-总结"><a href="#8-总结" class="headerlink" title="_8._总结"></a>_8._总结</h2><p>其实很简单，我所有的 IP 用的都是实例中的，你只要对着设置肯定没错，简单说就是最后实现了硬盘空间在 linux 和 windows 上的互通， 在这篇文章中，我们最开始的设置的 linux 的 samba 目录是&#x2F;home&#x2F;ptdown，最后就是这个&#x2F;home&#x2F;ptdown 挂载到了 windows 的 Z 盘上而已。 至此你可以猥琐欲为了。linux 下可以支持安装各种 PT 客户端，下载目录设置成共享的目录，windows 上便可以直接在挂载的盘中看到， 然后你可以 115 啊，百度网盘啊同步，你可以在 win 上压片啊，win 上跑 utorrent 啊。。。so on…..!   需要各种稳定版本的 UT，或者有任何问题都欢迎加 Q 群<a target="_blank" rel="noopener" href="https://ymgblog.com/go.html/?url=https://jq.qq.com/?_wv=1027&k=53LZ4zg">PTboxClub</a> 进行讨论！！</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/10/20/%E7%AE%80%E5%8D%95%E4%B8%89%E6%AD%A5%E7%BB%99%E7%BD%91%E7%AB%99%E7%94%B3%E8%AF%B7%E5%AE%89%E8%A3%85letsencrypt%E5%85%8D%E8%B4%B9ssl%E8%AF%81%E4%B9%A6-acme-sh%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content=" | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/10/20/%E7%AE%80%E5%8D%95%E4%B8%89%E6%AD%A5%E7%BB%99%E7%BD%91%E7%AB%99%E7%94%B3%E8%AF%B7%E5%AE%89%E8%A3%85letsencrypt%E5%85%8D%E8%B4%B9ssl%E8%AF%81%E4%B9%A6-acme-sh%E8%87%AA%E5%8A%A8%E7%BB%AD%E6%9C%9F/" class="post-title-link" itemprop="url">简单三步给网站申请安装letsencrypt免费SSL证书-acme.sh自动续期</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-10-20 01:03:24" itemprop="dateCreated datePublished" datetime="2018-10-20T01:03:24+08:00">2018-10-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>8.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>8 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>昨天晚上花了一个小时的时间把挖站否VPS监控SSL证书由原来的TrustAsia即赛门铁克(Symantec)个人DV SSL证书换成了letsencrypt免费SSL证书，原因是Chrome 70开始将开始不再信任 Symantec证书了，自己正在用的Chromium浏览器已经不能再打开Symantec证书的网站了。 赛门铁克(Symantec)个人DV SSL证书是在腾讯云申请的，实际上国内的阿里云、七牛云、又拍云等都提供了免费一年赛门铁克(Symantec)个人DV SSL证书。<strong>自己犯了错，干脆把之前的SSL产品趁“打烊”之前清仓大处理了？<strong>这也怪不得赛门铁克(Symantec)在国内搞了这么多的</strong>免费推广</strong>。 本篇文章就来分享一下利用<strong>acme.sh</strong>来一键申请和安装letsencrypt免费SSL证书，基本上可以适合各大VPS主机服务器，而且acme.sh可以自动更新SSL证书，再也不用担心SSL证书会过期的问题的。从我的个人使用经验来看，官方推荐的Certbot还是不如<strong>acme.sh</strong>好用一些。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/15396999612187d2e20ad1b.jpg"></p><p>更多的VPS主机及SSL证书还可以看看：</p><ol><li>免费SSL证书收集整理汇总-免费给网站添加Https安全加密访问</li><li>CN2 GIA VPS主机收集整理汇总-电信,联通,移动三网CN2 GIA线路VPS主机</li><li>启用HSTS并加入HSTS Preload List让网站Https访问更加安全-附删除HSTS方法</li></ol><p><strong>一、第一步：一键安装acme.sh</strong> 网站：</p><ol><li><a target="_blank" rel="noopener" href="https://letsencrypt.org/">https://letsencrypt.org/</a></li><li><a target="_blank" rel="noopener" href="https://github.com/Neilpang/acme.sh">https://github.com/Neilpang/acme.sh</a></li></ol><p>使用以下可以一键安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.acme.sh  sh</span><br></pre></td></tr></table></figure><p>或者:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O - https://get.acme.sh  sh</span><br></pre></td></tr></table></figure><p>使用喜欢Git命令也可以用以下命令安装:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Neilpang/acme.sh.git</span><br><span class="line">cd ./acme.sh</span><br><span class="line">./acme.sh --install</span><br></pre></td></tr></table></figure><p>脚本主要做了以下事情:</p><blockquote><p>1.生成复制了acme.sh 到你的($HOME): <del>&#x2F;.acme.sh&#x2F;目录下 ，后面所有的证书都会在这个目录生成. 2.Create alias for: acme.sh&#x3D;</del>&#x2F;.acme.sh&#x2F;acme.sh. 注意：<strong>安装完成后你需要关闭再打开终端才可以让alias 生效。</strong> 3.增加了一个定时任务，用于SSL证书更新.</p></blockquote><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961197b8ffc25e88.gif"></p><p>你可以使用Crontab -l来查看当前的定时任务：</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961258598e4684a7.gif"></p><p>同时你也可以使用SFTP来查看acme.sh 文件夹。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/153969996126143bb7e5bbc.gif"></p><p><strong>二、第二步：一键签发SSL证书</strong> 2.1 单个域名SSL 注意：-w后面是域名的根目录，请根据实际修改.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d wzfou.com -w /home/wwwroot/wzfou.com</span><br><span class="line">#默认签发的是RSA，如果你想签发ECC证书，请使用以下命令</span><br><span class="line">acme.sh --issue -d wzfou.com -w /home/wwwroot/wzfou.com --keylength ec-256 </span><br></pre></td></tr></table></figure><p>或者:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d wzfou.com -w /home/wzfou/public_html</span><br><span class="line">#默认签发的是RSA，如果你想签发ECC证书，请使用以下命令</span><br><span class="line">acme.sh --issue -d wzfou.com -w /home/wzfou/public_html --keylength ec-256</span><br></pre></td></tr></table></figure><p>或者:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d wzfou.com -w /var/www/html</span><br><span class="line">#默认签发的是RSA，如果你想签发ECC证书，请使用以下命令</span><br><span class="line">acme.sh --issue -d wzfou.com -w /var/www/html --keylength ec-256</span><br></pre></td></tr></table></figure><p>2.2 多个域名SSL</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue -d wzfou.com -d www.wzfou.com -d cp.wzfou.com -w /home/wwwroot/wzfou.com</span><br><span class="line">#默认签发的是RSA，如果你想签发ECC证书，请使用以下命令</span><br><span class="line">acme.sh --issue -d wzfou.com -d www.wzfou.com -d cp.wzfou.com -w /home/wwwroot/wzfou.com --keylength ec-256 </span><br></pre></td></tr></table></figure><p>2.3 泛域名SSL 注意：泛域名SSL证书签发要用到DNS验证的方式，参考2.4部分。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_dp -d wzfou.com -d *.wzfou.com</span><br><span class="line">#默认签发的是RSA，如果你想签发ECC证书，请使用以下命令</span><br><span class="line">acme.sh --issue --dns dns_dp -d wzfou.com -d *.wzfou.com --keylength ec-256</span><br><span class="line">#可选长度有：</span><br><span class="line"> ec-256 (prime256v1, “ECDSA P-256”)</span><br><span class="line"> ec-384 (secp384r1, “ECDSA P-384”)</span><br></pre></td></tr></table></figure><p>2.4 无法验证域名？ 上面通过指定网站根目录的验证域名的方法有时会失效，也有朋友VPS上没有安装Web环境，无法使用80端口。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/15396999612225e64847789.gif"></p><p>这里acme.sh 提供了一个添加DNS API自动验证域名的方式，首先到你的域名DNS处获得API，这里我以NS1 DNS域名解析来作为演示，首先到官网后台获得API（<strong>其它的DNS，如DNSPOD、Cloudxns、阿里云DNS等使用API的方法见本文第四部分</strong>）。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961184b536dc483c.gif"></p><p>然后是导入NS1.com API</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export NS1_Key=&quot;fdmlfxxxxxxxfk&quot;</span><br></pre></td></tr></table></figure><p>现在就可以开始签发SSL证书了:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_nsone -d wzfou.com -d www.wzfou.com</span><br><span class="line">#或者签发ECC证书</span><br><span class="line">acme.sh --issue --dns dns_nsone -d wzfou.com -d www.wzfou.com --keylength ec-256</span><br></pre></td></tr></table></figure><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961531adf860a02c.gif"></p><p>使用DNS API验证域名的方式有一个好处就是不需要WEB访问就可以签发SSL证书，acme.sh 会在你的DNS域名解析处添加一个TXT记录，验证成功后会自动删除该TXT记录。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961534906ab4cb21.gif"></p><p><strong>三、第三步：安装letsencrypt SSL证书</strong> 这一步部分其实可以根据各自的实际来执行了，为了让acme.sh 可以自动更新续期SSL证书，建议使用以下操作方法来执行，这样acme.sh 每次更新完了SSL证书后都自动按照你第一次安装SSL证书的方法执行一遍同步SSL证书的命令。 <strong>Apache</strong> 服务器安装letsencrypt SSL证书如下：:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --install-cert -d wzfou.com \</span><br><span class="line">--cert-file /path/to/certfile/in/apache/cert.pem \</span><br><span class="line">--key-file /path/to/keyfile/in/apache/key.pem \</span><br><span class="line">--fullchain-file /path/to/fullchain/certfile/apache/fullchain.pem \</span><br><span class="line">--reloadcmd &quot;service apache2 force-reload&quot;</span><br></pre></td></tr></table></figure><p><strong>Nginx</strong> 服务器安装letsencrypt SSL证书e:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --install-cert -d wzfou.com \</span><br><span class="line">--key-file /path/to/keyfile/in/nginx/key.pem \</span><br><span class="line">--fullchain-file /path/to/fullchain/nginx/cert.pem \</span><br><span class="line">--reloadcmd &quot;service nginx force-reload&quot;</span><br></pre></td></tr></table></figure><p>实际操作中，大家根据需要调整好证书和密钥的路径，由于我使用的ECC证书，并且重启Apache2的命令无效，所以我用的以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --install-cert -d ping.wzfou.com --ecc \</span><br><span class="line">--cert-file /etc/pki/tls/certs/ping.wzfou.com.cer \</span><br><span class="line">--key-file /etc/pki/tls/certs/ping.wzfou.com.key \</span><br><span class="line">--fullchain-file /etc/pki/tls/certs/fullchain.cer \</span><br><span class="line">--reloadcmd &quot;/etc/init.d/httpd force-reload&quot;</span><br></pre></td></tr></table></figure><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961547719746a31b.gif"></p><p>执行命令后，我们就可以在路径中看到已经复制过来的证书还有Key等文件了，下次acme.sh 执行更新SSL证书时也会同样执行上述的命令。否则，需要自己手动复制粘贴证书。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/15396999616206e31fe7f6a.gif"></p><p>最后记得到Apache或者Nginx的配置中调整好证书和Key的路径，重启Apache或者Nginx就算完成了。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961579ab93c65bee.gif"></p><p>如果你发现letsencrypt SSL证书不能定时更新，你也可以自己手动强制更新:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --renew -d example.com --force</span><br></pre></td></tr></table></figure><p>如果是ECC cert，使用以下命令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --renew -d example.com --force --ecc</span><br></pre></td></tr></table></figure><p>目前wzfou.com用的就是letsencrypt SSL证书。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/1539699961561d925775d3d.gif"></p><p><strong>四、附录：各大DNS API获取与签发SSL</strong> <strong>说明</strong>：</p><ol><li>附录参考自：<a target="_blank" rel="noopener" href="https://github.com/Neilpang/acme.sh/blob/master/dnsapi/README.md">https://github.com/Neilpang/acme.sh/blob/master/dnsapi/README.md</a></li><li>DNS解析服务汇总：<a target="_blank" rel="noopener" href="https://wzfou.com/mianfei-dns/">https://wzfou.com/mianfei-dns/</a></li><li>签发泛域名SSL时请把命令部分：-d <a target="_blank" rel="noopener" href="http://www.example.com/">www.example.com</a> 改成 ：-d *.example.com</li></ol><p><strong>4.1 CloudFlare DNS API</strong> First you need to login to your CloudFlare account to get your API key.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export CF_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot;</span><br><span class="line">export CF_Email=&quot;xxxx@sss.com&quot;</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_cf -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The CF_Key and CF_Email will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.2 DNSPod DNS API</strong> First you need to login to your DNSPod account to get your API Key and ID.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export DP_Id=&quot;1234&quot;</span><br><span class="line">export DP_Key=&quot;sADDsdasdgdsf&quot;</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_dp -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The DP_Id and DP_Key will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.3 CloudXNS DNS API</strong> First you need to login to your CloudXNS account to get your API Key and Secret.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export CX_Key=&quot;1234&quot;</span><br><span class="line">export CX_Secret=&quot;sADDsdasdgdsf&quot;</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_cx -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The CX_Key and CX_Secret will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.4 阿里云Aliyun DNS API</strong> First you need to login to your 阿里云 Aliyun account to get your API key. <a target="_blank" rel="noopener" href="https://ak-console.aliyun.com/#/accesskey">https://ak-console.aliyun.com/#/accesskey</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export Ali_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot;</span><br><span class="line">export Ali_Secret=&quot;jlsdflanljkljlfdsaklkjflsa&quot;</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_ali -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The Ali_Key and Ali_Secret will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.5 GoDaddy DNS API</strong> First you need to login to your GoDaddy account to get your API Key and Secret. <a target="_blank" rel="noopener" href="https://developer.godaddy.com/keys/">https://developer.godaddy.com/keys/</a> Please create a Production key, instead of a Test key.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export GD_Key=&quot;sdfsdfsdfljlbjkljlkjsdfoiwje&quot;</span><br><span class="line">export GD_Secret=&quot;asdfsdafdsfdsfdsfdsfdsafd&quot;</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_gd -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The GD_Key and GD_Secret will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.6 PowerDNS DNS API</strong> First you need to login to your PowerDNS account to enable the API and set your API-Token in the configuration. <a target="_blank" rel="noopener" href="https://doc.powerdns.com/md/httpapi/README/">https://doc.powerdns.com/md/httpapi/README/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export PDNS_Url=&quot;http://ns.example.com:8081&quot;</span><br><span class="line">export PDNS_ServerId=&quot;localhost&quot;</span><br><span class="line">export PDNS_Token=&quot;0123456789ABCDEF&quot;</span><br><span class="line">export PDNS_Ttl=60</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_pdns -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The PDNS_Url, PDNS_ServerId, PDNS_Token and PDNS_Ttl will be saved in ~&#x2F;.acme.sh&#x2F;account.confand will be reused when needed. <strong>4.7 Amazon Route53 DNS API</strong> 方法见：<a target="_blank" rel="noopener" href="https://github.com/Neilpang/acme.sh/wiki/How-to-use-Amazon-Route53-API">https://github.com/Neilpang/acme.sh/wiki/How-to-use-Amazon-Route53-API</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export AWS_ACCESS_KEY_ID=XXXXXXXXXX</span><br><span class="line">export AWS_SECRET_ACCESS_KEY=XXXXXXXXXXXXXXX</span><br></pre></td></tr></table></figure><p>To issue a cert:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_aws -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.8 Linode DNS API</strong> First you need to login to your Linode account to get your API Key. <a target="_blank" rel="noopener" href="https://manager.linode.com/profile/api">https://manager.linode.com/profile/api</a> Then add an API key with label <em>ACME</em> and copy the new key.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LINODE_API_KEY=&quot;...&quot;</span><br></pre></td></tr></table></figure><p>Due to the reload time of any changes in the DNS records, we have to use the dnssleep option to wait at least 15 minutes for the changes to take effect. Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_linode --dnssleep 900 -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p>The LINODE_API_KEY will be saved in ~&#x2F;.acme.sh&#x2F;account.conf and will be reused when needed. <strong>4.9 DigitalOcean DNS API (native)</strong> You need to obtain a read and write capable API key from your DigitalOcean account. See: <a target="_blank" rel="noopener" href="https://www.digitalocean.com/help/api/">https://www.digitalocean.com/help/api/</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export DO_API_KEY=&quot;75310dc4ca779ac39a19f6355db573b49ce92ae126553ebd61ac3a3ae34834cc&quot;</span><br></pre></td></tr></table></figure><p>Ok, let’s issue a cert now:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_dgon -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p><strong>4.10 Namesilo DNS API</strong> You’ll need to generate an API key at <a target="_blank" rel="noopener" href="https://www.namesilo.com/account/_api.php">https://www.namesilo.com/account\_api.php</a> Optionally you may restrict the access to an IP range there.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export Namesilo_Key=&quot;xxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><br></pre></td></tr></table></figure><p>And now you can issue certs with:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_namesilo --dnssleep 900 -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p><strong>4.11 使用自定义API</strong> If your API is not supported yet, you can write your own DNS API. Let’s assume you want to name it ‘myapi’:</p><ol><li>Create a bash script named ~&#x2F;.acme.sh&#x2F;dns_myapi.sh,</li><li>In the script you must have a function named dns_myapi_add() which will be called by acme.sh to add the DNS records.</li><li>Then you can use your API to issue cert like this:</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">acme.sh --issue --dns dns_myapi -d example.com -d www.example.com</span><br></pre></td></tr></table></figure><p><strong>五、总结</strong> letsencrypt免费SSL证书申请与安装过程还是挺简单的，只需要一个VPS主机，不管有没有安装Web环境都可以签发SSL证书，个人觉得DNS验证方式是最方便的。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/10/15396999618600251bd9718.jpg"></p><p>没有VPS主机的同学该如何使用letsencrypt免费SSL证书呢？**方法一：**手动在线申请，三个在线免费SSL证书申请地址; **方法二：**直接用Cpanel、DirectAdmin面板自带的SSL申请。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/19/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/21/"><i class="fa fa-angle-right"></i></a></nav></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jarod</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">755k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">11:26</span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript></body></html>