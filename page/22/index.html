<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"jarod.vip",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"always",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="记录生活中的点点滴滴"><meta property="og:type" content="website"><meta property="og:title" content="Jarod&#39;s Blog"><meta property="og:url" content="https://jarod.vip/page/22/index.html"><meta property="og:site_name" content="Jarod&#39;s Blog"><meta property="og:description" content="记录生活中的点点滴滴"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Jarod"><meta property="article:tag" content="VPS,hexo,linux,debian,windows,macos"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jarod.vip/page/22/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><title>Jarod's Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-R131WF8QZC"></script><script>function gtag(){dataLayer.push(arguments)}CONFIG.hostname===location.hostname&&(window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-R131WF8QZC"))</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?e67344a16e268228733f496a595ecb7a",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Jarod's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Jarod's Blog</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/%E7%AE%80%E5%8D%95%E4%B8%BAvps%E6%88%96%E8%80%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A2%9E%E5%8A%A0swap/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/%E7%AE%80%E5%8D%95%E4%B8%BAvps%E6%88%96%E8%80%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A2%9E%E5%8A%A0swap/" class="post-title-link" itemprop="url">简单为VPS或者服务器增加SWAP</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:15:08" itemprop="dateCreated datePublished" datetime="2018-06-29T09:15:08+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>392</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>本方法适用于除openvz虚拟之外的XEN和KVM，如果增加的swap空间是SSD的话那么效果就更加好了！ 1.进入目录</p><p>cd &#x2F;var&#x2F;</p><p>2.获取要增加的SWAP文件块(这里以1GB为例)</p><p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;swapfile bs&#x3D;1024 count&#x3D;1038336</p><p>3.创建SWAP文件</p><p>&#x2F;sbin&#x2F;mkswap swapfile</p><p>4.激活SWAP文件</p><p>&#x2F;sbin&#x2F;swapon swapfile</p><p>5.查看SWAP信息是否正确</p><p>&#x2F;sbin&#x2F;swapon –s</p><p>6.添加到fstab文件中让系统引导时自动启动</p><p>echo “&#x2F;var&#x2F;swapfile swap swap defaults 0 0” &gt;&gt;&#x2F;etc&#x2F;fstab</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/mysql%E4%B8%BB%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%AD%A5%E5%A4%A7%E8%87%B4%E6%95%99%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/mysql%E4%B8%BB%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%AD%A5%E5%A4%A7%E8%87%B4%E6%95%99%E7%A8%8B/" class="post-title-link" itemprop="url">MySQL主从数据库同步大致教程</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:12:14" itemprop="dateCreated datePublished" datetime="2018-06-29T09:12:14+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>主从数据库</p><p>mysql主从复制原理: mysql支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。 mysql复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)。因此，要进行复制，必须在主服务器上启用二进制日志。 每个从服务器从主服务器接收主服务器已经记录到其二进制日志的保存的更新。当一个从服务器连接主服务器时， 它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，并在本机上执行相同的更新。 然后封锁并等待主服务器通知新的更新。从服务器执行备份不会干扰主服务器，在备份过程中主服务器可以继续处理更新。</p><p>1、修改主服务器master: #vi &#x2F;etc&#x2F;my.cnf [mysqld] log-bin&#x3D;mysql-bin &#x2F;&#x2F;[必须]启用二进制日志 server-id&#x3D;1 &#x2F;&#x2F;[必须]服务器唯一ID，默认是1，一般取IP最后一段</p><p>2、修改从服务器slave: #vi &#x2F;etc&#x2F;my.cnf [mysqld] log-bin&#x3D;mysql-bin &#x2F;&#x2F;[不是必须]启用二进制日志 server-id&#x3D;226 &#x2F;&#x2F;[必须]服务器唯一ID，默认是1，一般取IP最后一段</p><p>3、重启数据库 service mysqld restart</p><p>4、创建用户 xxxx</p><p>5、登录主服务器的mysql，查询master的状态 mysql&gt;show master status; MySQL [mysql]&gt; show master status; +——————+———-+————–+——————+——————-+ File Position Binlog_Do_DB Binlog_Ignore_DB Executed_Gtid_Set +——————+———-+————–+——————+——————-+ mysql-bin.000020 82373 +——————+———-+————–+——————+——————-+ 1 row in set (0.00 sec)</p><p>6、配置从服务器Slave： Mysql&gt;change master to master_host&#x3D;’xxxx’,master_user&#x3D;’xxxx’,master_password&#x3D;’xxxxx1′,master_log_file&#x3D;’mysql-bin.000020′,master_log_pos&#x3D;14141889; &#x2F;&#x2F;注意不要断开，308数字前后无单引号。 Mysql&gt;flush privileges; Mysql&gt;start slave; &#x2F;&#x2F;启动从服务器复制功能</p><p>7、查看 Mysql&gt; show slave status\G</p><p>*************************** 1. row ***************************</p><p>Slave_IO_State: Waiting for master to send event Master_Host: xxx &#x2F;&#x2F;主服务器地址 Master_User: xxxxx &#x2F;&#x2F;授权帐户名，尽量避免使用root Master_Port: 3306 &#x2F;&#x2F;数据库端口，部分版本没有此行 Connect_Retry: 60 Master_Log_File: mysql-bin.000004 Read_Master_Log_Pos: 600 &#x2F;&#x2F;#同步读取二进制日志的位置，大于等于Exec_Master_Log_Pos Relay_Log_File: ddte-relay-bin.000003 Relay_Log_Pos: 251 Relay_Master_Log_File: mysql-bin.000004 Slave_IO_Running: Yes &#x2F;&#x2F;此状态必须YES Slave_SQL_Running: Yes &#x2F;&#x2F;此状态必须YES ……</p><p>注：Slave_IO及Slave_SQL进程必须正常运行，即YES状态，否则都是错误的状态(如：其中一个NO均属错误)。 主从服务器配置完成。 ————— 错误 2017-06-19 06:37:28 2209 [Warning] ‘proxies_priv’ entry ‘@ root@centos-512mb-ams3-02’ ignored in –skip-name-resolve mode. 2017-06-19 06:37:28 2209 [Warning] Neither –relay-log nor –relay-log-index were used; so replication may break when this MySQL server acts as a slave and has his hostname changed!! Please use ‘–relay-log&#x3D;mysql-relay-bin’ to avoid this problem. 2017-06-19 06:37:28 2209 [Warning] Storing MySQL user name or password information in the master info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START SLAVE; see the ‘START SLAVE Syntax’ in the MySQL Manual for more information. 2017-06-19 06:37:28 2209 [Warning] Slave SQL: If a crash happens this configuration does not guarantee that the relay log info will be consistent, Error_code: 0 2017-06-19 06:37:28 2209 [Note] Slave SQL thread initialized, starting replication in log ‘mysql-bin.000020’ at position 82373, relay log ‘.&#x2F;mysql-relay-bin.000002’ position: 283 2017-06-19 06:37:28 2209 [ERROR] Slave SQL: Error ‘Table ‘ba.tc_options’ doesn’t exist’ on query. Default database: ‘ba’. Query: ‘INSERT INTO `tc_options` (`name`, `value`) VALUES (‘cron_sign_again’,’a:2:{s:3:”num”;i:0;s:6:”lastdo”;s:10:”2017-06-18″;}’) ON DUPLICATE KEY UPDATE `value` &#x3D; ‘a:2:{s:3:”num”;i:0;s:6:”lastdo”;s:10:”2017-06-18″;}”, Error_code: 1146</p><p>1、锁定主服务器数据库 mysql&gt; flush tables with read lock; 2、 导出全部数据库 mysqldump -uroot -pxxxx -A &gt; all_database.mysql</p><p>3、从服务器停止slave，情况配置 mysql&gt; stop slave; reset slave; 4、导入数据库 mysql -uroot -pxxxx &lt; all_database.mysql</p><p>5、解锁主服务器数据库mysql&gt; unlock tables;</p><p>6、从数据库查看 show slave status\G</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/28/debian%E5%8D%87%E7%BA%A7%E5%88%B0debian8%E3%80%819%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/28/debian%E5%8D%87%E7%BA%A7%E5%88%B0debian8%E3%80%819%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Debian升级到debian8、9一键脚本</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-28 13:09:54" itemprop="dateCreated datePublished" datetime="2018-06-28T13:09:54+08:00">2018-06-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>813</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>VPS的系统相对较老，不支持系统，下面的脚本可以升级系统，但有可能会有问题。 升级前请重装成debian-7.0-x86-minimal、debian-7.0-x86_64、ubuntu-14.04-x86_64-minimal等其中1个系统。</p><p>Debian Wheezy 升级到 Jessie</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update;apt-get install -y wget ca-certificates;wget https://zhujiwiki.com/usr/uploads/2018/06/wheezy_to_jessie_installer.sh; bash wheezy_to_jessie_installer.sh</span><br></pre></td></tr></table></figure><p>Debian Wheezy 升级到 Stretch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update;apt-get install -y wget ca-certificates;wget https://zhujiwiki.com/usr/uploads/2018/06/wheezy_to_stretch_installer.sh; bash wheezy_to_stretch_installer.sh</span><br></pre></td></tr></table></figure><p>Ubuntu 14.04 升级到 16.04</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update;apt-get install -y wget ca-certificates;wget https://zhujiwiki.com/usr/uploads/2018/06/1404_to_1604_installer.sh; bash 1404_to_1604_installer.sh</span><br></pre></td></tr></table></figure><p>via：<a target="_blank" rel="noopener" href="https://www.lowendtalk.com/discussion/147323/upgrading-hostsolutions-ro-openvz-templates-to-16-04-jessie-or-stretch">https://www.lowendtalk.com/discussion/147323/upgrading-hostsolutions-ro-openvz-templates-to-16-04-jessie-or-stretch</a></p><p>欢迎到TeleGram群讨论：<a target="_blank" rel="noopener" href="https://t.me/zhujiwiki">https://t.me/zhujiwiki</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/16/linux-vps%E4%B8%80%E9%94%AE%E5%B1%8F%E8%94%BD%E6%8C%87%E5%AE%9A%E5%9B%BD%E5%AE%B6%E6%89%80%E6%9C%89%E7%9A%84ip%E8%AE%BF%E9%97%AE/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/16/linux-vps%E4%B8%80%E9%94%AE%E5%B1%8F%E8%94%BD%E6%8C%87%E5%AE%9A%E5%9B%BD%E5%AE%B6%E6%89%80%E6%9C%89%E7%9A%84ip%E8%AE%BF%E9%97%AE/" class="post-title-link" itemprop="url">Linux VPS一键屏蔽指定国家所有的IP访问</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-16 02:07:13" itemprop="dateCreated datePublished" datetime="2018-06-16T02:07:13+08:00">2018-06-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>453</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>本文转载自<a target="_blank" rel="noopener" href="https://www.moerats.com/archives/585/">Rat’s Blog:Linux VPS一键屏蔽指定国家所有的IP访问</a></p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>对于屏蔽指定国家所有的IP的手动教程刚讲了，查看：<a target="_blank" rel="noopener" href="https://www.moerats.com/archives/584/">Linux VPS使用ipset快速屏蔽指定国家的IP访问</a>，虽然步骤很简单，但为了更白的小白，友链博主YKilin大佬写出了一键脚本，本人就做了下小小的修改，简化了下步骤，这里分享下。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>本脚本适用于CentOS、Debian、Ubuntu等常用系统。</p><h3 id="1、下载脚本"><a href="#1、下载脚本" class="headerlink" title="1、下载脚本"></a>1、下载脚本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.moerats.com/usr/shell/block-ips.sh</span><br></pre></td></tr></table></figure><h3 id="2、使用方法"><a href="#2、使用方法" class="headerlink" title="2、使用方法"></a>2、使用方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#这里以中国为例，如果想屏蔽其它国家的，请自行修改最后的代码参数</span><br><span class="line">#添加规则</span><br><span class="line">bash block-ips.sh -a cn</span><br><span class="line"></span><br><span class="line">#开始屏蔽</span><br><span class="line">bash block-ips.sh -b cn</span><br><span class="line"></span><br><span class="line">#被屏蔽的国家列表</span><br><span class="line">bash block-ips.sh -l</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> </p><p>其它国家代码查看：<a target="_blank" rel="noopener" href="http://www.ipdeny.com/ipblocks">点击进入</a>。记住后面的参数均为小写字母。比如JAPAN (JP)，我们就在后面用jp这个参数。</p><p>文章参考：<a target="_blank" rel="noopener" href="https://lolico.moe/projects/block-countries-ips.html">Block IPs from countries</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/04/idc%E9%9B%B6%E5%9F%BA%E7%A1%80%E7%B3%BB%E5%88%97-centos6%E5%AE%89%E8%A3%85solusvm%E4%BB%8E%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%E5%88%B0%E5%88%A0%E5%BA%93%E8%B7%91%E8%B7%AF/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/04/idc%E9%9B%B6%E5%9F%BA%E7%A1%80%E7%B3%BB%E5%88%97-centos6%E5%AE%89%E8%A3%85solusvm%E4%BB%8E%E7%B3%BB%E7%BB%9F%E5%88%86%E5%8C%BA%E5%88%B0%E5%88%A0%E5%BA%93%E8%B7%91%E8%B7%AF/" class="post-title-link" itemprop="url">IDC零基础系列——CentOS6安装SolusVM(从系统分区到删库跑路)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-04 15:22:26" itemprop="dateCreated datePublished" datetime="2018-06-04T15:22:26+08:00">2018-06-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5.8k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="一-介绍"><a href="#一-介绍" class="headerlink" title="一.介绍"></a>一.介绍</h2><p>SolusVM我想应该不用介绍了，目前国内外卖VPS的最常见的面板之一，另外还有Virtualizor以及Xen System，以及比较少见的Promox和ESXi以及非常稀有土豪专用的OnApp。当然还有些号称云主机的用OpenStack或者OpenNebula，这些就不提了。不过我相信大部分人应该都接触过SolusVM，作为OnApp旗下的比较低端的虚拟化产品，以及和WHMCS等财务系统比较好的集成，所以非常多的VPS商家都喜欢用这个。</p><p>所以这个系列来稍微介绍下这些IDC比较常用的东西，之前的Proxmox也是这个系列的其实，之后会有啥就看心情了。</p><p>由于Solusvm的某些BUG(其实是一堆)，在CentOS7上安装Solusvm会导致出现无法限速，无法重启后自动启动VM的情况，所以一般情况下建议使用CentOS6安装。</p><p>但是Solusvm对于系统的分区是有要求的，所以我们从安装CentOS6开始介绍，当然是跳着介绍的，只说需要特别注意的地方，最好的情况是你的独服商家提供了Solusvm的镜像，这样你就不用折腾的，但是有些只提供了OpenVZ Slave(Master)的镜像，所以这种情况下如果你要安装KVM或者Xen的Solusvm Slave就需要自己动手了。</p><h2 id="二-安装"><a href="#二-安装" class="headerlink" title="二.安装"></a>二.安装</h2><p>本文分为Master篇和Slave篇，我将在本篇文章中分别介绍</p><p>首先看下安装前的注意事项</p><ul><li>You CANNOT Install a <a target="_blank" rel="noopener" href="http://www.senra.me/tag/solusvm/" title="Posts tagged with solusvm">SolusVM</a> Master on a Xen&#x2F;<a target="_blank" rel="noopener" href="http://www.senra.me/tag/kvm/" title="Posts tagged with kvm">KVM</a> Slave Directly, you can however install your Master on a Xen <a target="_blank" rel="noopener" href="http://www.senra.me/tag/vps/" title="Posts tagged with vps">VPS</a> which is hosted on this slave, it just cant be installed directly onto the slave</li></ul><p>解释: 这个就是告诉你，你无法直接在一台已经安装了Xen或者KVM的Slave上安装Master，但是你可以在Slave上开的VM中安装Master，当然如果你有别的的空的机器还是建议分开(OVZ可以使用Master with OpenVZ来实现安装在一台机器上)</p><ul><li>This Script should NEVER be used to upgrade <a target="_blank" rel="noopener" href="http://www.senra.me/tag/solusvm/" title="Posts tagged with solusvm">SolusVM</a> to the latest version, doing so will destroy your installation of <a target="_blank" rel="noopener" href="http://www.senra.me/tag/solusvm/" title="Posts tagged with solusvm">SolusVM</a></li></ul><p>解释: 安装脚本无法被用于升级Solusvm，这么做会导致你的已经安装的Solusvm损坏</p><ul><li>DO NOT use this installer on servers that contain any other control panel (cPanel, Directadmin etc..) Always use a clean install of <a target="_blank" rel="noopener" href="http://www.senra.me/tag/centos/" title="Posts tagged with centos">CentOS</a>&#x2F;RHEL&#x2F;Scientific!</li></ul><p>解释: 不要在存在其他控制面板(比如cPanel、Directadmin或者其他的)，总是使用一个纯净的系统(<a target="_blank" rel="noopener" href="http://www.senra.me/tag/centos/" title="Posts tagged with centos">CentOS</a>&#x2F;RHEL&#x2F;Scientific之一)</p><p><strong>支持的系统和虚拟化</strong></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225875040578-1024x283.jpg"></p><p>PS. 需知</p><p>1. <a target="_blank" rel="noopener" href="http://www.senra.me/tag/centos/" title="Posts tagged with centos">CentOS</a>5那列是支持的，但是不进行维护了 2. Virtuzzo的话在我看来是OpenVZ的商业(企业)版，功能更加强大，但是依旧是属于和OpenVZ一样类似于容器，内核依赖于宿主机，无法在Linux宿主机上安装Windows啥的</p><p><strong>分区要求</strong></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225908718731-1024x321.jpg"></p><p>翻译一下 虚拟化 分区布局</p><ul><li><a target="_blank" rel="noopener" href="http://www.senra.me/tag/kvm/" title="Posts tagged with kvm">KVM</a></li></ul><p>1. “&#x2F;“(根目录)需要80GB以上，使用ext4&#x2F;ext3并且选择Primary(主分区)而不是逻辑分区 2. Swap(交换分区)需要4GB以上，以便应对内存不足的情况(VM会占用宿主Swap) 3. 剩下的空间全部分配给LVM(需要注意，只配置Logical Volume Group逻辑卷组，具体的卷会由Solusvm自己创建)，Solusvm推荐使用32MB及以上的PE(Physical Extent, 物理块)大小</p><ul><li>Xen Source</li></ul><p>1. 同上(<a target="_blank" rel="noopener" href="http://www.senra.me/tag/kvm/" title="Posts tagged with kvm">KVM</a>) 2. Swap(交换分区)不超过4G(VM*不会*占用宿主Swap) 3. 同上(<a target="_blank" rel="noopener" href="http://www.senra.me/tag/kvm/" title="Posts tagged with kvm">KVM</a>)</p><ul><li>OpenVZ</li></ul><p>1. “&#x2F;“(根目录)需要40GB以上，使用ext4&#x2F;ext3并且选择Primary(主分区)而不是逻辑分区。如果没有创建”&#x2F;vz”目录且独立挂载分区，OpenVZ的模板会存储在”&#x2F;vz&#x2F;template&#x2F;cache”目录，占用”&#x2F;“根目录空间 2. Swap(交换分区)两倍于物理内存(如果物理内存小于2GB，则Swap为物理内存+2GB) 3. “&#x2F;vz”占用剩余的空间，用于存储OpenVZ的模板以及VM的磁盘</p><ul><li>OpenVZ 7</li></ul><p>1. 使用 Virtuozzo Linux 2. 同上(OpenVZ) 3. 同上(OpenVZ) 4. 同上(OpenVZ)</p><p>安装脚本倒是挺简单</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://files.soluslabs.com/install.sh</span><br><span class="line">sh install.sh</span><br></pre></td></tr></table></figure><p>这个安装脚本是多合一的，所以不管是Master还是Slave都是通过这个脚本进行安装的，本文章多图，请注意连WIFI(虽然可能来不及了)</p><p>首先，请按照上面说明准备好系统环境，大部分的商家提供ISO挂载来安装的功能，建议使用这个而不是系统模板来安装，因为模板安装不太方便调整分区。 Hetzner的话也有类似的功能，这就不需要Rescue模式了，请注意了。我们点击面板上的VNC，然后来进行安装</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225987901513-1024x419.jpg"></p><p>然后会给你一个IP以及密码，使用VNC客户端连接即可，可以下载tightvnc或者realvnc啥的</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225988351475-1024x314.jpg"></p><p>PS.需要注意，这儿给出的IP是带端口的(但其实也不是端口) 比如给你的是192.168.0.1:1，你会很奇怪为啥端口是1对吧，其实是VNC的端口，默认从5900开始，1代表的就是5901，即你实际的地址是192.168.0.1:5901</p><p>当然，在开始连接之前我们需要重启服务器进入VNC安装模式(重启前记好端口和密码，重启后会消失的)</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225994911553-1024x389.jpg"></p><p>然后我们就能连上去了</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225996171090-1024x779.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225997021071-1024x754.jpg"></p><p>记得选上两块硬盘</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225996938522-1024x754.jpg"></p><p>中间啥时区啊，网络啊，就跳过了，因为没啥特别的</p><p>大概是这样的</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226008619746-1024x754.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15225999148154-1024x754.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226009312616-1024x754.jpg"></p><p>然后还是比较常规的安装流程了，我也就不说了</p><p>然后进入系统后运行脚本开始安装，首先是脚本环境安装以及部分检测，稍等后进行简单的选择题</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226021790773-1024x551.jpg"></p><p>由于是独服，所以我们这台机器上装KVM的Slave，也就是选4 然后就开始安装了</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226025381075-1024x847.jpg"></p><p>稍等一会儿然后就OK了，最后会给出ID Key以及ID Password，凭借IP以及这两个就能在Master里面添加节点了</p><p>然后，按照说明我们还需要配置个Bridge，按照Solusvm的教程其实挺简单的——&gt;传送门 <a href="https://documentation.[solusvm]">https://documentation.[solusvm]</a>(<a target="_blank" rel="noopener" href="http://www.senra.me/tag/solusvm/">http://www.senra.me/tag/solusvm/</a> “Posts tagged with solusvm”).com&#x2F;display&#x2F;DOCS&#x2F;<a target="_blank" rel="noopener" href="http://www.senra.me/tag/kvm/" title="Posts tagged with kvm">KVM</a>+Bridge+Setup</p><p>我这边简单的介绍下</p><p>1. 首先安装bridge-utils软件包(虽然文档里让你检查是否已经安装，但是直接装下不就知道了吗…)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bridge-utils -y</span><br></pre></td></tr></table></figure><p>2. 然后查看你现有的网卡配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#你的网卡名字可能有差别，总之选你外网IP的那个</span><br><span class="line">cat /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">#内容大概如下，虽然我Hetzner上安装完不是这样的，不过差不多啦</span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">HWADDR=MAC地址</span><br><span class="line">IPADDR=公网IP</span><br><span class="line">NETMASK=子网掩码</span><br><span class="line">NETWORK=网络号</span><br><span class="line">GATEWAY=网关</span><br><span class="line">BROADCAST=广播地址</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br></pre></td></tr></table></figure><p>3. 备份你的配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/sysconfig/network-scripts/ifcfg-eth0 /etc/sysconfig/network-scripts/backup-ifcfg-eth0</span><br></pre></td></tr></table></figure><p>4. 依照你网卡配置创建Bridge的配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-br0</span><br><span class="line">#内容参照如下</span><br><span class="line">DEVICE=br0</span><br><span class="line">TYPE=Bridge</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=公网IP</span><br><span class="line">NETMASK=子网掩码</span><br><span class="line">NETWORK=网络号</span><br><span class="line">GATEWAY=网关</span><br><span class="line">BROADCAST=广播地址</span><br></pre></td></tr></table></figure><p><strong>PS.这部分你按照自己的，有啥填啥，没的去服务器面板看看，有些比如广播地址和网络号其实都是不必要的，可选。另外有IPv6地址的自己参照着填，这个需要注意一下，如下</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#Hetzner的IPv6在CentOS下大概配置文件需要加这些，最后一行少了不行，倒数第二行不能改</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6ADDR=IPv6地址/64</span><br><span class="line">IPV6_DEFAULTGW=fe80::1</span><br><span class="line">#在Bridge中这儿应该是br0</span><br><span class="line">IPV6_DEFAULTDEV=eth0</span><br></pre></td></tr></table></figure><p>5. 修改原网络配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">DEVICE=eth0</span><br><span class="line">HWADDR=MAC地址</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">ONBOOT=yes</span><br><span class="line">BRIDGE=br0</span><br></pre></td></tr></table></figure><p>这儿这个IPV6_AUTOCONF如果你上面是手动配IPv6的这个就不要了，有些机房IPv6自动DHCP分配的可以开这个</p><p>6. 重启网络</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/network restart</span><br></pre></td></tr></table></figure><p>我建议这部分最好慎重一点，特别是如果你的机器没有KVM或者IPMI，改错了可能就得重装了，但是，也可以做个故障修复脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#配置重启后的计划任务，删除Bridge配置，覆盖原配置文件然后重启网络</span><br><span class="line">echo &quot;@reboot rm -rf /etc/sysconfig/network-scripts/ifcfg-br0 &amp;&amp; \cp /etc/sysconfig/network-scripts/backup-ifcfg-eth0 /etc/sysconfig/network-scripts/ifcfg-eth0 &amp;&amp; /etc/init.d/network restart&quot; &gt;&gt; /var/spool/cron/root</span><br><span class="line">chmod 600 /var/spool/cron/root</span><br><span class="line">service crond reload</span><br><span class="line">service crond restart</span><br></pre></td></tr></table></figure><p>在配置这个之后，如果你发现自己搞炸了导致服务器失联，请使用控制面板上的重启来使机器重启恢复，之后你可以再次作死了。</p><p><strong>PS. 当然，在你成功配置后记得把计划任务删掉，别问我怎么删</strong></p><p>配置完大概是这样的，那个virbr0不用管，是自动添加的一个，如果看官方文档还可以配置一个内网用的Bridge，这个就看你自己需求了</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226074851207-1024x927.jpg"></p><p>然后我们就可以找个地方来装Master了，重复上面的第一步操作，在选择那儿选1</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226476427909-1024x843.jpg"></p><p>然后等着安装完成</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226479330199-1024x846.jpg"></p><p>如果你解析了域名到IP上可以按照它给的命令来签发Let’s Encrypt的证书 我们只做测试，所以这些都不管，直接登录面板，然后添加节点(<strong>更改默认密码啥的就不用我提了吧</strong>)</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226496572743-1024x531.jpg"></p><p>然后我们来添加一份中文翻译(这个是用户界面的翻译，管理员安安心心看英文啦)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/solusvm/language/client/</span><br><span class="line">wget &quot;https://documentation.solusvm.com/download/attachments/7667936/Simplified-Chinese.lang.txt?api=v2&quot; -O Chinese.lang.txt</span><br><span class="line">chown solusvm:solusvm Chinese.lang.txt</span><br></pre></td></tr></table></figure><p>然后我们需要添加模板和ISO，KVM的模板我们可以从SolusVM的TDN那儿获取)——&gt;<a target="_blank" rel="noopener" href="https://tdn.solusvm.com/">传送门</a></p><p>模板的获取命令和参数都有，举个栗子，我们要添加CentOS6的模板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wget w http://templates.repo.onapp.com/solusvm/kvm/linux-centos-6-x86_64-minimal-latest.gz -O /home/solusvm/kvm/template/linux-centos-6-x86_64-minimal-latest.gz</span><br></pre></td></tr></table></figure><p>然后我们需要添加模板和ISO，KVM的模板我们可以从SolusVM的TDN那儿获取)——&gt;<a target="_blank" rel="noopener" href="https://tdn.solusvm.com/">传送门</a></p><p>模板的获取命令和参数都有，举个栗子，我们要添加CentOS6的模板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://templates.repo.onapp.com/solusvm/kvm/linux-centos-6-x86_64-minimal-latest.gz -O /home/solusvm/kvm/template/linux-centos-6-x86_64-minimal-latest.gz</span><br></pre></td></tr></table></figure><p>然后照着信息添加</p><p>接着添加完后模板其实是在Master上的，我们需要同步到节点上</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226515168007-1024x517.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226513162387-1024x531.jpg"></p><p>先Queue然后Active，之后稍等变成Complete就OK了</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226514721611-1024x531.jpg"></p><p>然后去添加一个Plan</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226516182476-1024x531.jpg"></p><p>然后加下IP</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226520011686-1024x531.jpg"></p><p>这是先加Block然后加IP的，像Hetzner和OVH这种机房IP绑定MAC的也必须给IP指定一个MAC，不能用默认的auto随机生成</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226522435570-1024x531.jpg"></p><p>然后就可以开机器了(开机器必须要创建一个用户，左侧Add Client了解一下)</p><p>然后就OK了</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226524560732-1024x531.jpg"></p><p>然后在用户面板也能看到啦</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226524560732-1-1024x531.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226572153649-1024x531.jpg"></p><h2 id="三-优化"><a href="#三-优化" class="headerlink" title="三.优化"></a>三.优化</h2><p>默认情况下，我们的cpu是kvm64模式，这个时候在VM内显示的CPU型号是QEMU开头的，虽然这个是为了集群情况下能够方便迁移，不因为CPU型号不同导致某些故障，但是这种情况下你的宿主机CPU指令集不能完全提供给VM，会导致性能损耗。</p><p>那么怎么改呢，很简单，直接后台修改参数，然后保存重启VM就行</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226573802901-1024x767.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226574174092-1024x531.jpg"></p><p>如果需要后续创建的机器都是这样的，可以直接修改模板里面的CPU Model</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226575530526-1024x531.jpg"></p><p>重启之后的效果</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/06/15226581630155-1024x767.jpg"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/05/09/mysql-%E7%9A%84-root-%E5%AF%86%E7%A0%81%E5%BF%98%E8%AE%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/05/09/mysql-%E7%9A%84-root-%E5%AF%86%E7%A0%81%E5%BF%98%E8%AE%B0/" class="post-title-link" itemprop="url">MySQL 的 root 密码忘记</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-09 15:12:59" itemprop="dateCreated datePublished" datetime="2018-05-09T15:12:59+08:00">2018-05-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>458</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="关闭mysql服务器"><a href="#关闭mysql服务器" class="headerlink" title="关闭mysql服务器"></a>关闭mysql服务器</h1><p>sudo &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;support-files&#x2F;mysql.server stop 或者系统偏好里有个 MySQL 里关闭</p><h1 id="进入-x2F-usr-x2F-local-x2F-mysql-x2F-bin-目录"><a href="#进入-x2F-usr-x2F-local-x2F-mysql-x2F-bin-目录" class="headerlink" title="进入 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin 目录"></a>进入 &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin 目录</h1><p>cd &#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin</p><h1 id="获取权限"><a href="#获取权限" class="headerlink" title="获取权限"></a>获取权限</h1><p>sudo su</p><h1 id="重启服务器"><a href="#重启服务器" class="headerlink" title="重启服务器"></a>重启服务器</h1><p>.&#x2F;mysqld_safe –skip-grant-tables &amp;</p><h1 id="重开个终端"><a href="#重开个终端" class="headerlink" title="重开个终端"></a>重开个终端</h1><p>mysql -uroot -p （提示输入密码时随便输入即可）</p><h1 id="获取权限，要不它不让你改"><a href="#获取权限，要不它不让你改" class="headerlink" title="获取权限，要不它不让你改"></a>获取权限，要不它不让你改</h1><p>flush privileges;</p><h1 id="设置新密码"><a href="#设置新密码" class="headerlink" title="设置新密码"></a>设置新密码</h1><p>set password for ‘root‘@’localhost’&#x3D;password(‘新密码’);</p><p>作者：JoinPerson 链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/47caaf07fdfa">https://www.jianshu.com/p/47caaf07fdfa</a> 來源：简书 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/05/04/centos%E6%9F%A5%E7%9C%8Bcpu%E3%80%81%E5%86%85%E5%AD%98%E3%80%81%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E5%92%8C%E7%A3%81%E7%9B%98-i-o/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/05/04/centos%E6%9F%A5%E7%9C%8Bcpu%E3%80%81%E5%86%85%E5%AD%98%E3%80%81%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E5%92%8C%E7%A3%81%E7%9B%98-i-o/" class="post-title-link" itemprop="url">CentOS查看CPU、内存、网络流量和磁盘 I/O</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-04 23:14:48" itemprop="dateCreated datePublished" datetime="2018-05-04T23:14:48+08:00">2018-05-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>yum install -y sysstat</p><p>sar -d 1 1</p><p>rrqm&#x2F;s: 每秒进行 merge 的读操作数目。即 delta(rmerge)&#x2F;s wrqm&#x2F;s: 每秒进行 merge 的写操作数目。即 delta(wmerge)&#x2F;s r&#x2F;s: 每秒完成的读 I&#x2F;O 设备次数。即 delta(rio)&#x2F;s w&#x2F;s: 每秒完成的写 I&#x2F;O 设备次数。即 delta(wio)&#x2F;s rsec&#x2F;s: 每秒读扇区数。即 delta(rsect)&#x2F;s wsec&#x2F;s: 每秒写扇区数。即 delta(wsect)&#x2F;s rkB&#x2F;s: 每秒读K字节数。是 rsect&#x2F;s 的一半，因为每扇区大小为512字节。(需要计算) wkB&#x2F;s: 每秒写K字节数。是 wsect&#x2F;s 的一半。(需要计算) avgrq-sz: 平均每次设备I&#x2F;O操作的数据大小 (扇区)。delta(rsect+wsect)&#x2F;delta(rio+wio) avgqu-sz: 平均I&#x2F;O队列长度。即 delta(aveq)&#x2F;s&#x2F;1000 (因为aveq的单位为毫秒)。 await: 平均每次设备I&#x2F;O操作的等待时间 (毫秒)。即 delta(ruse+wuse)&#x2F;delta(rio+wio) svctm: 平均每次设备I&#x2F;O操作的服务时间 (毫秒)。即 delta(use)&#x2F;delta(rio+wio) %util: 一秒中有百分之多少的时间用于 I&#x2F;O 操作，或者说一秒中有多少时间 I&#x2F;O 队列是非空的。即 delta(use)&#x2F;s&#x2F;1000 (因为use的单位为毫秒)</p><p>如果 %util 接近 100%，说明产生的I&#x2F;O请求太多，I&#x2F;O系统已经满负荷，该磁盘 可能存在瓶颈。 idle小于70% IO压力就较大了,一般读取速度有较多的wait. 同时可以结合vmstat 查看查看b参数(等待资源的进程数)和wa参数(IO等待所占用的CPU时间的百分比,高过30%时IO压力高)</p><p>另外还可以参考 svctm 一般要小于 await (因为同时等待的请求的等待时间被重复计算了)，svctm 的大小一般和磁盘性能有关，CPU&#x2F;内存的负荷也会对其有影响，请求过多也会间接导致 svctm 的增加。await 的大小一般取决于服务时间(svctm) 以及 I&#x2F;O 队列的长度和 I&#x2F;O 请求的发出模式。如果 svctm 比较接近 await，说明 I&#x2F;O 几乎没有等待时间；如果 await 远大于 svctm，说明 I&#x2F;O 队列太长，应用得到的响应时间变慢，如果响应时间超过了用户可以容许的范围，这时可以考虑更换更快的磁盘，调整内核 elevator 算法，优化应用，或者升级 CPU。 队列长度(avgqu-sz)也可作为衡量系统 I&#x2F;O 负荷的指标，但由于 avgqu-sz 是按照单位时间的平均值，所以不能反映瞬间的 I&#x2F;O 洪水。</p><p>在命令行方式下，如何查看CPU、内存的使用情况，网络流量和磁盘I&#x2F;O？</p><p>Q: 在命令行方式下，如何查看CPU、内存的使用情况，网络流量和磁盘I&#x2F;O？</p><p>A: 在命令行方式下，</p><p>1. 查看CPU使用情况的命令</p><p>$ vmstat 5</p><p>每5秒刷新一次，最右侧有CPU的占用率的数据</p><p>$ top</p><p>top 然后按Shift+P，按照进程处理器占用率排序</p><p>2. 查看内存使用情况的命令</p><p>$ free</p><p>top 然后按Shift+M, 按照进程内存占用率排序</p><p>$ top</p><p>3. 查看网络流量</p><p>可以用工具iptraf工具</p><p>$ iptraf -g</p><p>“”针对某个Interface的网络流量可以通过比较两个时间网络接口的RX和TX数据来获得</p><p>$ date; ifconfig eth1</p><p>$ date; ifconfig eth1</p><p>4. 查看磁盘i&#x2F;o</p><p>$ iostat -d -x &#x2F;dev&#x2F;sdc3 2</p><p>用iostat查看磁盘&#x2F;dev&#x2F;sdc3的磁盘i&#x2F;o情况，每两秒刷新一次</p><p>$ vmstat 2</p><p>用vmstat查看io部分的信息</p><p>procs: r–&gt;;在运行队列中等待的进程数 b–&gt;;在等待io的进程数 w–&gt;;可以进入运行队列但被替换的进程</p><p>memoy swap–&gt;;现时可用的交换内存（k表示） free–&gt;;空闲的内存（k表示）</p><p>pages re－－》回收的页面 mf－－》非严重错误的页面 pi－－》进入页面数（k表示） po－－》出页面数（k表示） fr－－》空余的页面数（k表示） de－－》提前读入的页面中的未命中数 sr－－》通过时钟算法扫描的页面</p><p>disk 显示每秒的磁盘操作。 s表示scsi盘，0表示盘号</p><p>fault 显示每秒的中断数 in－－》设备中断 sy－－》系统中断 cy－－》cpu交换</p><p>cpu 表示cpu的使用状态 cs－－》用户进程使用的时间 sy－－》系统进程使用的时间 id－－》cpu空闲的时间</p><p>其中: 如果 r经常大于 4 ，且id经常少于40，表示cpu的负荷很重。 如果pi，po 长期不等于0，表示内存不足。 如果disk 经常不等于0， 且在 b中的队列 大于3， 表示 io性能不好。</p><p><a target="_blank" rel="noopener" href="https://newbug.top/centos%e6%9f%a5%e7%9c%8bcpu%e3%80%81%e5%86%85%e5%ad%98%e3%80%81%e7%bd%91%e7%bb%9c%e6%b5%81%e9%87%8f%e5%92%8c%e7%a3%81%e7%9b%98-io%e3%80%90%e8%af%a6%e7%bb%86%e3%80%91/#reward">赏</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/05/04/centos7%E6%9B%B4%E6%96%B0%E3%80%81%E6%9B%B4%E6%96%B0%E3%80%81%E6%AF%8F%E5%A4%A9%E6%9B%B4%E6%96%B0%E3%80%81%E6%AF%8F%E5%A4%A9%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/05/04/centos7%E6%9B%B4%E6%96%B0%E3%80%81%E6%9B%B4%E6%96%B0%E3%80%81%E6%AF%8F%E5%A4%A9%E6%9B%B4%E6%96%B0%E3%80%81%E6%AF%8F%E5%A4%A9%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0/" class="post-title-link" itemprop="url">centos7更新、更新、每天更新、每天自动更新</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-04 23:14:00" itemprop="dateCreated datePublished" datetime="2018-05-04T23:14:00+08:00">2018-05-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>728</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>每一天我们的系统时时刻刻都被凶狠之徒盯着，保持软件在最新的状态是其中一项我们必须做，也很容易做到的工作。</p><p>首先我们立即手动更新所有预先安装的软件：</p><blockquote><p>yum -y update</p></blockquote><p>跟着设定系统定时自动更新，第一步确定服务器是否安装了自动执行指令的工具，跟着使用 <code>yum</code> 一个名叫 <code>yum-cron</code>插件。</p><p>CentOS 7 使用数个软件来自动执行指令：<code>cron</code>、<code>anacron</code>、<code>at</code> 和 <code>batch</code>，其中 <code>cron</code> 和 <code>anacron</code> 用来定期重复执行指令，<code>At</code> 和 <code>batch</code> 则用来在特定时间执行一次性的指令。 我们将会使用 <code>cron</code> 和 <code>anacron</code>，两者的分别这里不细表了，将来有机会再讨论，现在使用一个指令同时安装 <code>cronie</code> 和 <code>yum-cron</code>：</p><blockquote><p>yum -y install cronie yum-cron</p></blockquote><p>完成后系统多了数个档案，比较重要的包括： <code>/etc/cron.daily/0yum.cron，``Anacron</code> 每天执行0yum.cron一次，它根据 &#x2F;etc&#x2F;yum&#x2F;yum-cron.conf 来更新软件  ,&#x2F;<code>etc/yum/yum-cron.conf</code></p><p>每天执行只会下载更新的软件，并不安装,需要修改apply_updates &#x3D; no 为 yes，才会自动安装，用意是让管理员检视 <code>yum-cron</code>的输出，选取需要更新的软件进行手动安装。</p><blockquote><p>vim &#x2F;etc&#x2F;yum&#x2F;yum-cron.conf</p></blockquote><p>确认一下 <code>update_messages = yes</code>, <code>download_updates = yes</code>, <code>apply_updates = yes</code></p><p>最后，启动 <code>crond</code> 和 <code>yum-cron</code>：</p><p>systemctl start crond</p><p>systemctl start yum-cron</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/05/04/ipv4%E5%8F%8Aipv6%E7%9A%84cidr%E5%9C%B0%E5%9D%80%E5%85%B7%E4%BD%93ip%E6%95%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/05/04/ipv4%E5%8F%8Aipv6%E7%9A%84cidr%E5%9C%B0%E5%9D%80%E5%85%B7%E4%BD%93ip%E6%95%B0/" class="post-title-link" itemprop="url">IPV4及IPV6的CIDR地址具体IP数</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-04 23:11:54" itemprop="dateCreated datePublished" datetime="2018-05-04T23:11:54+08:00">2018-05-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%85%B6%E4%BB%96/" itemprop="url" rel="index"><span itemprop="name">其他</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>IPV4： &#x2F;32(1) &#x2F;31(2) &#x2F;30(4) &#x2F;29(8) &#x2F;28(16) &#x2F;27(32) &#x2F;26(64) &#x2F;25(128) &#x2F;24(256) &#x2F;23(512) &#x2F;22(1024) &#x2F;21(2048) &#x2F;20(4096) &#x2F;19(8192) &#x2F;18(16384) &#x2F;17(32768) &#x2F;16(65536) &#x2F;15(131072) &#x2F;14(262144) &#x2F;13(524288) &#x2F;12(1048576) &#x2F;11(2097152) &#x2F;10(4194304) &#x2F;9(8388608) &#x2F;8(16777216)</p><p>IPV6： ::&#x2F;128(1) ::&#x2F;127(2) ::&#x2F;126(4) ::&#x2F;125(8) ::&#x2F;124(16) ::&#x2F;123(32) ::&#x2F;122(64) ::&#x2F;121(128) ::&#x2F;120(256) ::&#x2F;119(512) ::&#x2F;118(1024) ::&#x2F;117(2048) ::&#x2F;116(4096) ::&#x2F;115(8192) ::&#x2F;114(16384) ::&#x2F;113(32768) ::&#x2F;112(65536) ::&#x2F;111(131072) ::&#x2F;110(262144) ::&#x2F;109(524288) ::&#x2F;108(1048576) ::&#x2F;107(2097152) ::&#x2F;106(4194304) ::&#x2F;105(8388608) ::&#x2F;104(16777216) ::&#x2F;103(33554432) ::&#x2F;102(67108864) ::&#x2F;101(134217728) ::&#x2F;100(268435456) ::&#x2F;99(536870912) ::&#x2F;98(1073741824) ::&#x2F;97(2147483648) ::&#x2F;96(4294967296) ::&#x2F;95(8589934592) ::&#x2F;94(17179869184) ::&#x2F;93(34359738368) ::&#x2F;92(68719476736) ::&#x2F;91(137438953472) ::&#x2F;90(274877906944) ::&#x2F;89(549755813888) ::&#x2F;88(1099511627776) ::&#x2F;87(2199023255552) ::&#x2F;86(4398046511104) ::&#x2F;85(8796093022208) ::&#x2F;84(17592186044416) ::&#x2F;83(35184372088832) ::&#x2F;82(70368744177664) ::&#x2F;81(140737488355328) ::&#x2F;80(281474976710656) ::&#x2F;79(562949953421312) ::&#x2F;78(1125899906842624) ::&#x2F;77(2251799813685248) ::&#x2F;76(4503599627370496) ::&#x2F;75(9007199254740992) ::&#x2F;74(18014398509481984) ::&#x2F;73(36028797018963968) ::&#x2F;72(72057594037927936) ::&#x2F;71(144115188075855872) ::&#x2F;70(288230376151711744) ::&#x2F;69(576460752303423488) ::&#x2F;68(1152921504606846976) ::&#x2F;67(2305843009213693952) ::&#x2F;66(4611686018427387904) ::&#x2F;65(9.2233720368548E+18) ::&#x2F;64(1.844674407371E+19) ::&#x2F;63(3.6893488147419E+19) ::&#x2F;62(7.3786976294838E+19) ::&#x2F;61(1.4757395258968E+20) ::&#x2F;60(2.9514790517935E+20) ::&#x2F;59(5.9029581035871E+20) ::&#x2F;58(1.1805916207174E+21) ::&#x2F;57(2.3611832414348E+21) ::&#x2F;56(4.7223664828696E+21) ::&#x2F;55(9.4447329657393E+21) ::&#x2F;54(1.8889465931479E+22) ::&#x2F;53(3.7778931862957E+22) ::&#x2F;52(7.5557863725914E+22) ::&#x2F;51(1.5111572745183E+23) ::&#x2F;50(3.0223145490366E+23) ::&#x2F;49(6.0446290980731E+23) ::&#x2F;48(1.2089258196146E+24) ::&#x2F;47(2.4178516392293E+24) ::&#x2F;46(4.8357032784585E+24) ::&#x2F;45(9.671406556917E+24) ::&#x2F;44(1.9342813113834E+25) ::&#x2F;43(3.8685626227668E+25) ::&#x2F;42(7.7371252455336E+25) ::&#x2F;41(1.5474250491067E+26) ::&#x2F;40(3.0948500982135E+26) ::&#x2F;39(6.1897001964269E+26) ::&#x2F;38(1.2379400392854E+27) ::&#x2F;37(2.4758800785708E+27) ::&#x2F;36(4.9517601571415E+27) ::&#x2F;35(9.903520314283E+27) ::&#x2F;34(1.9807040628566E+28) ::&#x2F;33(3.9614081257132E+28) ::&#x2F;32(7.9228162514264E+28) ::&#x2F;31(1.5845632502853E+29) ::&#x2F;30(3.1691265005706E+29) ::&#x2F;29(6.3382530011411E+29) ::&#x2F;28(1.2676506002282E+30) ::&#x2F;27(2.5353012004565E+30) ::&#x2F;26(5.0706024009129E+30) ::&#x2F;25(1.0141204801826E+31) ::&#x2F;24(2.0282409603652E+31) ::&#x2F;23(4.0564819207303E+31) ::&#x2F;22(8.1129638414607E+31) ::&#x2F;21(1.6225927682921E+32) ::&#x2F;20(3.2451855365843E+32)</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/05/02/%E8%B6%85%E7%BA%A7%E6%9A%B4%E5%8A%9B%E7%89%88%E9%AD%94%E6%94%B9bbr%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC-for-debian/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/05/02/%E8%B6%85%E7%BA%A7%E6%9A%B4%E5%8A%9B%E7%89%88%E9%AD%94%E6%94%B9bbr%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC-for-debian/" class="post-title-link" itemprop="url">超级暴力版魔改BBR一键脚本 for Debian</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-05-02 22:02:00" itemprop="dateCreated datePublished" datetime="2018-05-02T22:02:00+08:00">2018-05-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>481</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p><strong>说明：</strong>超级暴力版魔改<code>BBR</code>安装方法刚说过了，参考：<a target="_blank" rel="noopener" href="https://www.moerats.com/archives/522/">Debian&#x2F;Ubuntu开启超级暴力版魔改BBR教程</a>，不过是手动的，有点麻烦，这里就分享下南琴浪大佬的一键脚本，只适用<code>Debian</code>系统，<code>Ubuntu</code>系统可以查看教程手动安装。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>Github地址：</strong><a target="_blank" rel="noopener" href="https://github.com/nanqinlang/tcp_nanqinlang-test">https://github.com/nanqinlang/tcp_nanqinlang-test</a></p><p><code>Debian 7</code>、<code>8</code>、<code>9</code>系统都可以，使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/nanqinlang/tcp_nanqinlang-test/master/tcp_nanqinlang-test.sh</span><br><span class="line">bash tcp_nanqinlang-test.sh</span><br></pre></td></tr></table></figure><p>使用脚本后会出现如下选项： <img src="https://www.jarods.org/wp-content/uploads/2018/05/super_bbr.png" alt="请输入图片描述" title="请输入图片描述"> 先选择<code>1</code>更换内核，然后<code>reboot</code>重启后，再使用<code>bash tcp_nanqinlang-test.sh</code>进行第<code>2</code>步开启超级暴力<code>BBR</code>模式。</p><p>如果在删除内核环节出现这样一张图 <img src="https://www.jarods.org/wp-content/uploads/2018/05/qianyingbbr2.png" alt="请输入图片描述" title="请输入图片描述"> 注意选择<code>NO</code>，然后根据提示操作。</p><p>有问题请咨询大佬，南琴浪博客：<a target="_blank" rel="noopener" href="https://sometimesnaive.org/">https://sometimesnaive.org/</a>。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"><a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><a class="extend next" rel="next" href="/page/23/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener("tabs:register",()=>{let t=CONFIG.comments["activeClass"];var e;(t=CONFIG.comments.storage?localStorage.getItem("comments_active")||t:t)&&(e=document.querySelector(`a[href="#comment-${t}"]`))&&e.click()}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jarod</p><div class="site-description" itemprop="description">记录生活中的点点滴滴</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">262</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">306</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jarodvip" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jarodvip" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jarod</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">658k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">9:58</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>