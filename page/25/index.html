<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"jarod.vip",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"always",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="记录生活中的点点滴滴"><meta property="og:type" content="website"><meta property="og:title" content="Jarod&#39;s Blog"><meta property="og:url" content="https://jarod.vip/page/25/index.html"><meta property="og:site_name" content="Jarod&#39;s Blog"><meta property="og:description" content="记录生活中的点点滴滴"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Jarod"><meta property="article:tag" content="VPS,hexo,linux,debian,windows,macos"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jarod.vip/page/25/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><title>Jarod's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Jarod's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Jarod's Blog</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/11/06/debianubuntu%E4%BD%BF%E7%94%A8apt-get%E6%97%B6%E5%87%BA%E7%8E%B0no-public-key-available%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/11/06/debianubuntu%E4%BD%BF%E7%94%A8apt-get%E6%97%B6%E5%87%BA%E7%8E%B0no-public-key-available%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">Debian/Ubuntu使用apt-get时出现“no public key available…”的解决方法</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-11-06 20:35:41" itemprop="dateCreated datePublished" datetime="2017-11-06T20:35:41+08:00">2017-11-06</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在Ubuntu和Debian下运行apt-get update刷新更新源的时候却经常遇到“There is no public key available for the following key IDs”的问题，具体表现为以下错误提示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">W:There is no public key available for the following key IDs: 3B4FE6ACC0B21F32,</span><br><span class="line">W:There is no public key available for the following key IDs: 3B4FE6ACC0B21F32,</span><br></pre></td></tr></table></figure><p>解决方法如下，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 3B4FE6ACC0B21F32</span><br></pre></td></tr></table></figure><p>把3B4FE6ACC0B21F32替换为你出现问题的IDs</p><p>额外的，如果有如下问题，是因为加入了natty-backports源，删掉即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">W:Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/natty-backports/main/source/Sources  404  Not Found [IP: 91.189.91.13 80],</span><br><span class="line">W:Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/natty-backports/restricted/source/Sources  404  Not Found [IP: 91.189.91.13 80],</span><br><span class="line">W:Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/natty-backports/universe/source/Sources  404  Not Found [IP: 91.189.91.13 80],</span><br><span class="line">W:Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/natty-backports/multiverse/source/Sources  404  Not Found [IP: 91.189.91.13 80],</span><br></pre></td></tr></table></figure><p>运行如下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &#x27;/natty\-backports/d&#x27; /etc/apt/sources.list&#123;,.d/*&#125;</span><br></pre></td></tr></table></figure><p>via：<a target="_blank" rel="noopener" href="https://www.vmvps.com/apt-get-error-no-public-key-available-solution.html">https://www.vmvps.com/apt-get-error-no-public-key-available-solution.html</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/10/27/debian-9%E4%BB%A3%E5%8F%B7%E4%B8%BAstretch%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BB%8Edebian-8%E5%8D%87%E7%BA%A7%E8%BF%87%E5%8E%BB%EF%BC%9A/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/10/27/debian-9%E4%BB%A3%E5%8F%B7%E4%B8%BAstretch%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BB%8Edebian-8%E5%8D%87%E7%BA%A7%E8%BF%87%E5%8E%BB%EF%BC%9A/" class="post-title-link" itemprop="url">Debian 9代号为Stretch，可以直接从Debian 8升级过去：</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-10-27 14:27:08" itemprop="dateCreated datePublished" datetime="2017-10-27T14:27:08+08:00">2017-10-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>263</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>1. 更新Debian 8到最新，这一步可有可无，个人觉得加上会比较稳妥一点：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get upgrade</span><br></pre></td></tr></table></figure><p>2. 将软件源改为Debian 9的stretch，如果使用我下面的命令的话，要看你原来的Debian 8是用stable表示还是jessie表示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> sed s/jessie/stretch/ /etc/apt/sources.list  tee /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>3. 升级系统版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get  update &amp;&amp; apt-get dist-upgrade</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/10/26/shadowsocks-%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%EF%BC%88%E5%9B%9B%E5%90%88%E4%B8%80%EF%BC%89/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/10/26/shadowsocks-%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC%EF%BC%88%E5%9B%9B%E5%90%88%E4%B8%80%EF%BC%89/" class="post-title-link" itemprop="url">一键安装脚本（四合一）</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-10-26 12:00:37" itemprop="dateCreated datePublished" datetime="2017-10-26T12:00:37+08:00">2017-10-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="https://www.jarods.org/wp-content/uploads/2017/10/shadowsocks.png" title="Shadowsocks一键安装脚本（四合一版）"></p><h2 id="本脚本适用环境"><a href="#本脚本适用环境" class="headerlink" title="本脚本适用环境"></a>本脚本适用环境</h2><p>系统支持：CentOS 6+，Debian 7+，Ubuntu 12+ 内存要求：≥128M 日期　　：2017 年 10 月 22 日</p><h3 id="关于本脚本"><a href="#关于本脚本" class="headerlink" title="关于本脚本"></a>关于本脚本</h3><p>1、一键安装 Shadowsocks-Python， ShadowsocksR， Shadowsocks-Go， Shadowsocks-libev 版（四选一）服务端； 2、各版本的启动脚本及配置文件名不再重合； 3、每次运行可安装一种版本； 4、支持以多次运行来安装多个版本，且各个版本可以共存（注意端口号需设成不同）； 5、若已安装多个版本，则卸载时也需多次运行（每次卸载一种）； 6、Shadowsocks-Python 和 ShadowsocksR 安装后不可同时启动（因为本质上都属 Python 版）。</p><p><strong>友情提示：</strong>如果你有问题，请先阅读这篇《<a target="_blank" rel="noopener" href="https://teddysun.com/399.html">Shadowsocks Troubleshooting</a>》之后再询问。</p><h3 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h3><p>服务器端口：自己设定（如不设定，默认为 8989） 密码：自己设定（如不设定，默认为 teddysun.com） 加密方式：自己设定（如不设定，Python 和 libev 版默认为 aes-256-gcm，R 和 Go 版默认为 aes-256-cfb） 协议（protocol）：自己设定（如不设定，默认为 origin）（仅限 ShadowsocksR 版） 混淆（obfs）：自己设定（如不设定，默认为 plain）（仅限 ShadowsocksR 版） <strong>备注：</strong>脚本默认创建单用户配置文件，如需配置多用户，请手动修改相应的配置文件后重启即可。</p><h3 id="客户端下载"><a href="#客户端下载" class="headerlink" title="客户端下载"></a>客户端下载</h3><p>常规版 Windows 客户端 <a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks-windows/releases">https://github.com/shadowsocks/shadowsocks-windows/releases</a></p><p>ShadowsocksR 版 Windows 客户端 <a target="_blank" rel="noopener" href="http://dl.teddysun.com/files/ShadowsocksR-4.7.0-win.7z">https://github.com/shadowsocksr/shadowsocksr-csharp/releases</a></p><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>使用root用户登录，运行以下命令：</p><p>wget –no-check-certificate -O shadowsocks-all.sh <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/teddysun/shadowsocks/_install/master/shadowsocks-all.sh">https://raw.githubusercontent.com/teddysun/shadowsocks\_install/master/shadowsocks-all.sh</a><br>chmod +x shadowsocks-all.sh<br>.&#x2F;shadowsocks-all.sh 2&gt;&amp;1 tee shadowsocks-all.log</p><h3 id="安装完成后，脚本提示如下"><a href="#安装完成后，脚本提示如下" class="headerlink" title="安装完成后，脚本提示如下"></a>安装完成后，脚本提示如下</h3><p>Congratulations, your_shadowsocks_version install completed!<br>Your Server IP :your_server_ip<br>Your Server Port :your_server_port<br>Your Password :your_password<br>Your Encryption Method:your_encryption_method</p><p>Welcome to visit:<a target="_blank" rel="noopener" href="https://teddysun.com/486.html">https://teddysun.com/486.html</a><br>Enjoy it!</p><h3 id="卸载方法"><a href="#卸载方法" class="headerlink" title="卸载方法"></a>卸载方法</h3><p>若已安装多个版本，则卸载时也需多次运行（每次卸载一种）</p><p>使用root用户登录，运行以下命令：</p><p>.&#x2F;shadowsocks-all.sh uninstall</p><h3 id="启动脚本"><a href="#启动脚本" class="headerlink" title="启动脚本"></a>启动脚本</h3><p>启动脚本后面的参数含义，从左至右依次为：启动，停止，重启，查看状态。</p><p>Shadowsocks-Python 版： &#x2F;etc&#x2F;init.d&#x2F;shadowsocks-python start stop restart status</p><p>ShadowsocksR 版： &#x2F;etc&#x2F;init.d&#x2F;shadowsocks-r start stop restart status</p><p>Shadowsocks-Go 版： &#x2F;etc&#x2F;init.d&#x2F;shadowsocks-go start stop restart status</p><p>Shadowsocks-libev 版： &#x2F;etc&#x2F;init.d&#x2F;shadowsocks-libev start stop restart status</p><h3 id="各版本默认配置文件"><a href="#各版本默认配置文件" class="headerlink" title="各版本默认配置文件"></a>各版本默认配置文件</h3><p>Shadowsocks-Python 版： &#x2F;etc&#x2F;shadowsocks-python&#x2F;config.json</p><p>ShadowsocksR 版： &#x2F;etc&#x2F;shadowsocks-r&#x2F;config.json</p><p>Shadowsocks-Go 版： &#x2F;etc&#x2F;shadowsocks-go&#x2F;config.json</p><p>Shadowsocks-libev 版： &#x2F;etc&#x2F;shadowsocks-libev&#x2F;config.json</p><h3 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h3><p>2017 年 10 月 22 日： 1、升级：libsodium 到 1.0.15。</p><p>2017 年 10 月 14 日： 1、新增：在安装 Shadowsocks-libev 版时<strong>可选安装</strong> simple-obfs 服务端。 ※ 脚本通过判断 autoconf 版本是否大于或等于 2.67 来一键安装 simple-obfs 服务端。并且，支持在安装过程中选择 obfs 为 http 或 tls。 ※ 使用方法参考：<a target="_blank" rel="noopener" href="https://teddysun.com/511.html">https://teddysun.com/511.html</a></p><p>2017 年 09 月 16 日： 1、修正：Shadowsocks-libev 版 v3.1.0 使用 libc-ares 替换 libudns 依赖包，解决了依赖问题； 2、升级：mbedtls 到版本 2.6.0。</p><p>2017 年 07 月 27 日： 1、新增：ShadowsocksR 版可选协议（protocol）auth_chain_b 。使用该协议需更新到最新（4.7.0） <a target="_blank" rel="noopener" href="http://dl.teddysun.com/files/ShadowsocksR-4.7.0-win.7z">ShadowsocksR 版客户端</a>； 2、修改：更新 ShadowsocksR 源码下载地址。</p><p>2017 年 07 月 23 日： 1、修正：卸载时可自行选择某个版本卸载，若该版本不存在则报错退出。</p><p>2017 年 07 月 22 日： 1、修正：默认加密方式从 aes-256-cfb 改为 aes-256-gcm（Python 和 libev 版）； 2、新增：安装时可选 16 种加密方式的其中之一（Python 和 libev 版）。如下所示：</p><p>aes-256-gcm<br>aes-192-gcm<br>aes-128-gcm<br>aes-256-ctr<br>aes-192-ctr<br>aes-128-ctr<br>aes-256-cfb<br>aes-192-cfb<br>aes-128-cfb<br>camellia-128-cfb<br>camellia-192-cfb<br>camellia-256-cfb<br>chacha20-ietf-poly1305<br>chacha20-ietf<br>chacha20<br>rc4-md5</p><p>3、新增：安装时可选 9 种加密方式的其中之一（Go 版）。如下所示：</p><p>aes-256-cfb<br>aes-192-cfb<br>aes-128-cfb<br>aes-256-ctr<br>aes-192-ctr<br>aes-128-ctr<br>chacha20-ietf<br>chacha20<br>rc4-md5</p><p>4、新增：安装时可选 13 种加密方式的其中之一（none 是不加密，ShadowsocksR 版）。如下所示：</p><p>none<br>aes-256-cfb<br>aes-192-cfb<br>aes-128-cfb<br>aes-256-cfb8<br>aes-192-cfb8<br>aes-128-cfb8<br>aes-256-ctr<br>aes-192-ctr<br>aes-128-ctr<br>chacha20-ietf<br>chacha20<br>rc4-md5<br>rc4-md5-6</p><p>5、新增：安装时可选 7 种协议（protocol）的其中之一（仅限 ShadowsocksR 版）。如下所示：</p><p>origin<br>verify_deflate<br>auth_sha1_v4<br>auth_sha1_v4_compatible<br>auth_aes128_md5<br>auth_aes128_sha1<br>auth_chain_a<br>auth_chain_b</p><p>6、新增：安装时可选 9 种混淆（obfs）的其中之一（仅限 ShadowsocksR 版）。如下所示：</p><p>plain<br>http_simple<br>http_simple_compatible<br>http_post<br>http_post_compatible<br>tls1.2_ticket_auth<br>tls1.2_ticket_auth_compatible<br>tls1.2_ticket_fastauth<br>tls1.2_ticket_fastauth_compatible</p><p>2017 年 02 月 24 日： 1、恢复： 通过 Github API 自动获取 Shadowsocks-libev 的最新 release 版本的功能（v3.0.3）。</p><p>2017 年 02 月 13 日： 1、升级： Shadowsocks-libev 版到版本 3.0.2； 2、升级： Shadowsocks-go 版到版本 1.2.1（基于 <a target="_blank" rel="noopener" href="https://github.com/shadowsocks/shadowsocks-go">Github 最新代码</a>，用 go 1.8 编译完成的 x86 和 x86_64 二进制文件）； 3、修复：在 Debian 7 下默认没有 libudns-dev 依赖包的问题。</p><p>2017 年 02 月 12 日： 1、升级： Shadowsocks-libev 版到版本 3.0.1。</p><p>2017 年 01 月 27 日： 1、升级： Shadowsocks-go 版到版本 1.2.1 （仅适用于 x86_64 系统）</p><h3 id="更多单版本-Shadowsocks-服务端一键安装脚本"><a href="#更多单版本-Shadowsocks-服务端一键安装脚本" class="headerlink" title="更多单版本 Shadowsocks 服务端一键安装脚本"></a>更多单版本 Shadowsocks 服务端一键安装脚本</h3><p><a target="_blank" rel="noopener" href="https://teddysun.com/342.html">Shadowsocks Python 版一键安装脚本（CentOS，Debian，Ubuntu）</a> <a target="_blank" rel="noopener" href="https://shadowsocks.be/9.html">ShadowsocksR 版一键安装脚本（CentOS，Debian，Ubuntu）</a> <a target="_blank" rel="noopener" href="https://teddysun.com/357.html">CentOS 下 Shadowsocks-libev 一键安装脚本</a> <a target="_blank" rel="noopener" href="https://teddysun.com/358.html">Debian 下 Shadowsocks-libev 一键安装脚本</a> <a target="_blank" rel="noopener" href="https://teddysun.com/392.html">Shadowsocks-go 一键安装脚本（CentOS，Debian，Ubuntu）</a></p><p><strong>注意：</strong>以上单版本不可与该四合一版本混用。</p><p>转载请注明：<a target="_blank" rel="noopener" href="https://teddysun.com/">秋水逸冰</a> » <a target="_blank" rel="noopener" href="https://teddysun.com/486.html">Shadowsocks 一键安装脚本（四合一）</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/10/26/centos%E4%B8%8D%E6%8D%A2%E5%86%85%E6%A0%B8%E5%AE%89%E8%A3%85%E9%94%90%E9%80%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/10/26/centos%E4%B8%8D%E6%8D%A2%E5%86%85%E6%A0%B8%E5%AE%89%E8%A3%85%E9%94%90%E9%80%9F/" class="post-title-link" itemprop="url">CentOS不换内核安装锐速</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-10-26 11:58:30" itemprop="dateCreated datePublished" datetime="2017-10-26T11:58:30+08:00">2017-10-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>618</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>如果你是CentOS用户,肯定为换内核头疼过. 这篇文章将解决这个问题.</p><hr><ol><li>CentOS用户如遇内核不能匹配,</li></ol><p> </p><p>请参照以下示例:1. 使用锐速安装脚本,得知不能匹配到内核.<br>2. 通过 <code>uname -r</code> 查看到的版本号为 <code>2.6.32-642.el6.x86_64</code> ,<br>3. 去查看 <a target="_blank" rel="noopener" href="https://github.com/0oVicero0/serverSpeeder_kernel/blob/master/serverSpeeder.txt"><strong>锐速版本库</strong></a> 发现有个内核版本很接近 <code>2.6.32-573.1.1.el6.x86_64</code> .<br>4. 执行安装命令:</p><pre><code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O appex.sh https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh &amp;&amp; chmod +x appex.sh &amp;&amp; bash appex.sh install &#x27;2.6.32-573.1.1.el6.x86_64&#x27;</span><br></pre></td></tr></table></figure>

锐速安装脚本就会强制安装内核版本为 `2.6.32-573.1.1.el6.x86_64` 的锐速. 安装命令中的 `2.6.32-573.1.1.el6.x86_64` 可自行更改.
</code></pre><ol start="5"><li>启动锐速<ul><li>如果<strong>启动成功</strong>，恭喜你!</li><li>如果<strong>启动失败</strong>，请重复 2-5 步骤! 不要害怕失败,安装失败并不会影响系统运行.</li></ul></li></ol><hr><p><strong>安装锐速:</strong> <a target="_blank" rel="noopener" href="https://moeclub.org/2017/03/08/14/"><strong>[锐速] [serverSpeeder] [lotServer]</strong></a></p><hr><p><strong>声明:</strong></p><p><strong>毕竟你都要换内核了,就不要谈稳不稳定.</strong></p><p><strong>如因此造成损失,本人不负任何责任.</strong></p><hr><p><strong>温馨提醒:</strong></p><p><strong>数据无价,请及时备份数据.</strong></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/10/13/centos-7%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE%E6%8C%87%E5%BC%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/10/13/centos-7%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%88%9D%E5%A7%8B%E9%85%8D%E7%BD%AE%E6%8C%87%E5%BC%95/" class="post-title-link" itemprop="url">CentOS 7系统的初始配置指引</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-10-13 00:26:39" itemprop="dateCreated datePublished" datetime="2017-10-13T00:26:39+08:00">2017-10-13</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>CentOS 7系统最小化安装后，由于没有图形化界面，给新手用户的使用带来了一些不便。本文将介绍如何在没有图形界面的情况下了解系统情况、硬件信息以及如何对系统进行基本的设置等。</p><p><strong>将CentOS 7更新至最新</strong></p><p>对于一个全新的CentOS 7系统，第一步工作应该是将系统更新至最新，以确保系统可以使用最新支持的内核以及最新的安全补丁等。</p><p>更新系统可以用root权限用户通过如下命令来完成：</p><p># yum check-update</p><h1 id="yum-upgrade"><a href="#yum-upgrade" class="headerlink" title="yum upgrade"></a>yum upgrade</h1><p>当更新全部完成后，可以使用以下命令将更新过程中下载的文件清除，以释放磁盘空间。</p><p># # yum clean all<br>Loaded plugins: fastestmirror<br>Cleaning repos: base elrepo epel extras nginx updates<br>Cleaning up everything<br>Maybe you want: rm -rf &#x2F;var&#x2F;cache&#x2F;yum, to also free up space taken by orphaned data from disabled or removed repos<br>Cleaning up list of fastest mirrors</p><p><strong>给CentOS 7系统安装实用工具</strong></p><p>为了系统管理方便，这里推荐几个系统管理的实用工具。安装这些工具后，可以大大提升CentOS 7系统使用的便利性。这些工具包括：<strong>nano</strong> (一个可以替代vi的文本编辑器)\ <strong>wget</strong>\ <strong>curl</strong> (通常用来从网络下载软件包的工具)、 <strong>net-tools</strong>, <strong>lsof</strong> (管理本地网络的工具)以及<strong>bash-completion</strong> (命令行自动补全工具)。这些工具都可以通过yum方式安装，命令示例如下：</p><p># yum install nano wget curl net-tools lsof bash-completion</p><p><strong>设置CentOS 7网络</strong></p><p>CentOS有大量的网络配置实用工具，这些可以编辑网络配置的工具包括： <strong>ip, ifconfig, nmtui, nmcli</strong> 以及<strong>route</strong>。对于初学者来说，最简单的工具是nmtui这个图形化的命令行工具。</p><p>例如想设置自己的主机名，可以通过输入nmtui-hostname命令来打开图形化命令行，设置完成后，按<ok>确认，示意图如下：<img src="https://www.jarods.org/wp-content/uploads/2017/10/nmtui-hostname.jpg"></ok></p><p>如果想配置网卡，则运行：nmtui-edit命令，就可以打开一个图形化的设置窗口，如下图所示：<img src="https://www.jarods.org/wp-content/uploads/2017/10/nmtui-edit-1.jpg"></p><p>选择相应网卡后，再选中<edit>按钮按回车，就可以进入网卡的配置详情窗口，可以根据实际需要对网卡进行相应配置。注意这些图形化界面非常像最初的C语言菜单，可以通过Tab键来切换选中项，按回车键表示确定选中项。<img src="https://www.jarods.org/wp-content/uploads/2017/10/nmtui-edit-2.jpg"></edit></p><p>然后可以通过如下命令，来查看网络接口配置是否正确以及网络的连通性等。</p><p># ifconfig eth0</p><h1 id="ip-a"><a href="#ip-a" class="headerlink" title="ip a"></a>ip a</h1><h1 id="ping-c2-www-daehub-com"><a href="#ping-c2-www-daehub-com" class="headerlink" title="ping -c2 www.daehub.com"></a>ping -c2 <a target="_blank" rel="noopener" href="http://www.daehub.com/">www.daehub.com</a></h1><p>注意这里的eth0就是系统默认的网卡设备，命令执行结果如下：<img src="https://www.jarods.org/wp-content/uploads/2017/10/ifconfig-result.jpg"></p><p>下面的两个工具ethtool和mii-tool是用来查看网络的接口速率以及连接状况的：<img src="https://www.jarods.org/wp-content/uploads/2017/10/ehttool-result.jpg"></p><p>以下还有几个对于网络使用端口进行检测的工具，通过这些工具，可以查看程序侦听的端口以及连接状态等。这些命令会列出程序所使用的所有TCP以及UDP端口。事实上UDP是非面向连接的，它只通过网络发送数据包，而不需要建立连接。这些命令包括：</p><p># netstat -tulpn</p><h1 id="ss-tulpn"><a href="#ss-tulpn" class="headerlink" title="ss -tulpn"></a>ss -tulpn</h1><h1 id="lsof-i4-或-lsof-6"><a href="#lsof-i4-或-lsof-6" class="headerlink" title="lsof -i4 或 lsof -6"></a>lsof -i4 或 lsof -6</h1><p><strong>管理CentOS 7的服务</strong></p><p>CentOS 7通过systemctl工具来管理系统守护进程（即为系统服务），可以通过如下命令来查看系统服务的状态和启动情况等：</p><p># systemctl list-units</p><h1 id="systemctl-list-unit-files-t-service"><a href="#systemctl-list-unit-files-t-service" class="headerlink" title="systemctl list-unit-files -t service"></a>systemctl list-unit-files -t service</h1><p>如果想停止或关闭某项服务，则可以通过如下命令来实现：</p><p># systemctl stop postfix</p><h1 id="systemctl-disable-postfix"><a href="#systemctl-disable-postfix" class="headerlink" title="systemctl disable postfix"></a>systemctl disable postfix</h1><p>以上示例是首先停止postfix服务，然后将这项服务器开机自启动关闭。</p><p>除了以上这些命令，你还可以通过ps\top以及pstree命令来查看系统运行状况。默认情况下，CentOS 7是未安装pstree工具的，可以使用如下命令安装并通过示例命令查看进程状态：</p><p># yum install psmisc</p><h1 id="pstree-p"><a href="#pstree-p" class="headerlink" title="pstree -p"></a>pstree -p</h1><p>运行示意图如下：<img src="https://www.jarods.org/wp-content/uploads/2017/10/pstree-result.jpg"></p><p><strong>使用CentOS 7防火墙</strong></p><p>Firewalld工具是CentOS 7进行访问控制管理的主要工具，使用以下命令，可以设置启用防火墙以及查看状态等：</p><p># systemctl enable firewalld</p><h1 id="systemctl-start-firewalld"><a href="#systemctl-start-firewalld" class="headerlink" title="systemctl start firewalld"></a>systemctl start firewalld</h1><h1 id="systemctl-status-firewalld"><a href="#systemctl-status-firewalld" class="headerlink" title="systemctl status firewalld"></a>systemctl status firewalld</h1><p>如果想要开启某项服务，则可以使用–add-service&#x3D;服务名方式开启这项服务器访问控制，如果使用–permanent参数，则会永久开启这项服务的相应端口。例如想要开启ssh服务，则使用如下方式：</p><p># firewall-cmd –list-services</p><h1 id="firewall-cmd-–add-service-x3D-ssh"><a href="#firewall-cmd-–add-service-x3D-ssh" class="headerlink" title="firewall-cmd –add-service&#x3D;ssh"></a>firewall-cmd –add-service&#x3D;ssh</h1><h1 id="firewall-cmd-–add-service-x3D-ssh-–permanent"><a href="#firewall-cmd-–add-service-x3D-ssh-–permanent" class="headerlink" title="firewall-cmd –add-service&#x3D;ssh –permanent"></a>firewall-cmd –add-service&#x3D;ssh –permanent</h1><p>命令首先查看已经支持的服务，然后将ssh服务加入允许列表，运行结果如图所示：<img src="https://www.jarods.org/wp-content/uploads/2017/10/firewall-cmd-result.jpg"></p><p>将服务添加完成后，就需要将服务对应的端口添加到允许列表中，使用如下命令方式，注意，–permanent参数同样有效：</p><p># firewall-cmd –add-port&#x3D;22&#x2F;tcp –permanent</p><h1 id="firewall-cmd-–reload-让防火墙规则生效"><a href="#firewall-cmd-–reload-让防火墙规则生效" class="headerlink" title="firewall-cmd –reload     #让防火墙规则生效"></a>firewall-cmd –reload #让防火墙规则生效</h1><p><strong>赋予用户sudo权限</strong></p><p>为了让普通用户可以通过sudo命令执行root用户权限的命令，可以通过添加用户并修改这个用户至管理员的wheel组来实现，具体步骤如下：</p><p># adduser daehub</p><h1 id="passwd-daehub"><a href="#passwd-daehub" class="headerlink" title="passwd daehub"></a>passwd daehub</h1><h1 id="usermod-aG-wheel-daehub"><a href="#usermod-aG-wheel-daehub" class="headerlink" title="usermod -aG wheel daehub"></a>usermod -aG wheel daehub</h1><p>以上命令首先添加一个daehub用户，然后为他设置密码，最后通过usermod命令将daehub用户添加至wheel组，就完成了赋予用户管理员权限的操作。</p><p>以上就是一些系统管理员每天都可能用到的常用命令，对于一个全新的CentOS系统，熟练使用上述工具，可以达到事半功倍的效果哦。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/09/23/superspeed-%E4%B8%80%E9%94%AE%E6%B5%8B%E8%AF%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B0%E5%9B%BD%E5%86%85%E7%9A%84%E9%80%9F%E5%BA%A6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/09/23/superspeed-%E4%B8%80%E9%94%AE%E6%B5%8B%E8%AF%95%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%B0%E5%9B%BD%E5%86%85%E7%9A%84%E9%80%9F%E5%BA%A6/" class="post-title-link" itemprop="url">SuperSpeed – 一键测试服务器到国内的速度</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-09-23 11:43:11" itemprop="dateCreated datePublished" datetime="2017-09-23T11:43:11+08:00">2017-09-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>453</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>最近买了好几台 vps 在测试的时候，经常会遇到一些麻烦，我比较喜欢用 Speedtest 来测试到国内和到我本地的网络的速度，每次去找节点有比较麻烦。之前从来没有写过脚本，也不熟悉那些脚本的命令，只会一些简单的经常能用到的管理命令，今天开始学了一天，差不多明白了一些，就拿来练手，就直接集成一个管理面板去测试到国内不同路线的速度，折腾了一下。</p><h2 id="新加功能"><a href="#新加功能" class="headerlink" title="新加功能"></a>新加功能</h2><p>全面测速，添加一键全面测速功能，测试服务器到全国北方南方，电信，联通，移动的速度。</p><p>阿里云香港</p><p><img src="https://www.jarods.org/wp-content/uploads/2017/09/cesu3.png" alt="SuperSpeed.sh 一键测试服务器到国内的速度" title="SuperSpeed.sh 一键测试服务器到国内的速度 Linux 第1张-老鬼的博客(OldKing.net)"></p><p>阿里云新加坡</p><p><img src="https://www.jarods.org/wp-content/uploads/2017/09/cesu4.png" alt="SuperSpeed.sh 一键测试服务器到国内的速度" title="SuperSpeed.sh 一键测试服务器到国内的速度 Linux 第2张-老鬼的博客(OldKing.net)"></p><p>阿里云日本</p><p><img src="https://www.jarods.org/wp-content/uploads/2017/09/cesu5.png" alt="SuperSpeed.sh 一键测试服务器到国内的速度" title="SuperSpeed.sh 一键测试服务器到国内的速度 Linux 第3张-老鬼的博客(OldKing.net)"></p><hr><h2 id="一、特点"><a href="#一、特点" class="headerlink" title="一、特点"></a>一、特点</h2><p>利用 Speedtest 测试你的国外主机到国内不同省市的速度。</p><p>集成了 Speedtest 提供的电信，联通，移动线路。</p><p>一键选择，一键测试。</p><p><img src="https://www.jarods.org/wp-content/uploads/2017/09/cesu2.png" alt="SuperSpeed.sh 一键测试服务器到国内的速度" title="SuperSpeed.sh 一键测试服务器到国内的速度 Linux 第4张-老鬼的博客(OldKing.net)"></p><h2 id="二、使用方法"><a href="#二、使用方法" class="headerlink" title="二、使用方法"></a>二、使用方法</h2><p>非常的简单，每行一条命令</p><blockquote><p>wget –no-check-certificate <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/oooldking/script/master/superspeed.sh">https://raw.githubusercontent.com/oooldking/script/master/superspeed.sh</a></p><p>chmod +x superspeed.sh</p><p>.&#x2F;superspeed.sh</p></blockquote><p> </p><p><img src="https://www.jarods.org/wp-content/uploads/2017/09/cesu1.png" alt="SuperSpeed.sh 一键测试服务器到国内的速度" title="SuperSpeed.sh 一键测试服务器到国内的速度 Linux 第5张-老鬼的博客(OldKing.net)"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/08/30/cloudflare-cname%E6%8E%A5%E5%85%A5%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%89%88/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/08/30/cloudflare-cname%E6%8E%A5%E5%85%A5%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%89%88/" class="post-title-link" itemprop="url">Cloudflare CNAME接入命令行版</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-08-30 21:11:44" itemprop="dateCreated datePublished" datetime="2017-08-30T21:11:44+08:00">2017-08-30</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>519</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p><a target="_blank" rel="noopener" href="https://github.com/fffonion/cloudflare-partner-cli">https://github.com/fffonion/cloudflare-partner-cli</a> <strong>Cloudflare Partner CLI</strong></p><p>使用Cloudflare partner功能用CNAME方式接入cloudflare。</p><p>如需使用中文菜单，请将环境变量的LANG设置为使用UTF-8 (比如zh_CN.UTF-8)。</p><p><strong>使用方法</strong></p><ul><li>申请Cloudflare partner计划 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/partners/">https://www.cloudflare.com/partners/</a></li><li>clone本项目或者直接下载脚本 右键另存为：<a target="_blank" rel="noopener" href="https://github.com/fffonion/cloudflare-partner-cli/raw/master/cloudflare-partner-cli.py">https://github.com/fffonion/cloudflare-partner-cli/raw/master/cloudflare-partner-cli.py</a></li><li>运行 python .&#x2F;cloudflare-partner-cli.py</li><li>输入 host_key。可以从这里<a target="_blank" rel="noopener" href="https://partners.cloudflare.com/api-management%E8%8E%B7%E5%BE%97%E3%80%82">https://partners.cloudflare.com/api-management获得。</a></li><li>输入要用来管理域名的账号 (你的个人账号，不是partner账号).</li><li>按照屏幕提示操作</li></ul><p>源站地址(resolve_to)必须填写完整的dns，如google.com，不能填写ip <img src="https://www.jarods.org/wp-content/uploads/2017/08/Screen-Shot-2017-08-29-at-10.57.27-PM-300x179.png"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/07/14/%E9%AD%94%E6%94%B9%E7%89%88bbr%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC-for-debian8ubuntu16/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/07/14/%E9%AD%94%E6%94%B9%E7%89%88bbr%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC-for-debian8ubuntu16/" class="post-title-link" itemprop="url">魔改版BBR一键脚本 For Debian8/Ubuntu16+</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-07-14 20:47:07" itemprop="dateCreated datePublished" datetime="2017-07-14T20:47:07+08:00">2017-07-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>731</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>BBR相信大家都不陌生，是谷歌开发的一个存在于Linux内核中的拥塞算法。为了优化国内与服务器之间的网络质量，loc的大佬专门魔改改进了下这个BBR，成为了新的BBR魔改版。我也就乘机水一篇文章好了<del>在Debian 8 和Ubuntu16 + 系统上一键部署<a target="_blank" rel="noopener" href="https://www.zhujiboke.com/tag/%e9%ad%94%e6%94%b9%e7%89%88bbr">魔改版BBR</a>，自动换内核成 4.10.15 ，自动安装Headers。用户只需要将系统安装成 Debian 8 或者 Ubuntu 16 即可，剩下的交给脚本来吧。据说效果比原版BBR和锐速都要好哦</del></p><p>Github地址:<a target="_blank" rel="noopener" href="https://github.com/FunctionClub/YankeeBBR">https://github.com/FunctionClub/YankeeBBR</a></p><p><img src="https://www.jarods.org/wp-content/uploads/2017/07/2017070602231760.png" alt="魔改版BBR一键脚本 For Debian8/Ubuntu16+" title="魔改版BBR一键脚本 For Debian8/Ubuntu16+"></p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>魔改BBR原帖：<a target="_blank" rel="noopener" href="http://www.hostloc.com/thread-372277-1-2.html">http://www.hostloc.com/thread-372277-1-2.html</a></p><p>萌新教程: <a target="_blank" rel="noopener" href="http://www.hostloc.com/thread-372335-1-1.html">http://www.hostloc.com/thread-372335-1-1.html</a></p><p>脚本技术： <a target="_blank" rel="noopener" href="https://doub.io/wlzy-16/">https://doub.io/wlzy-16/</a></p><h2 id="部分商家的VPS可能会遇到换内核之后无法启动系统的情况，所以请运行脚本前一定要备份好重要数据！！"><a href="#部分商家的VPS可能会遇到换内核之后无法启动系统的情况，所以请运行脚本前一定要备份好重要数据！！" class="headerlink" title="部分商家的VPS可能会遇到换内核之后无法启动系统的情况，所以请运行脚本前一定要备份好重要数据！！"></a><strong>部分商家的VPS可能会遇到换内核之后无法启动系统的情况，所以请运行脚本前一定要备份好重要数据！！</strong></h2><h2 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/FunctionClub/YankeeBBR/master/bbr.sh &amp;&amp; bash bbr.sh install</span><br></pre></td></tr></table></figure><p>安装过程中如果出现这张图片，请选择NO 来删除其他内核：</p><p><img src="https://www.jarods.org/wp-content/uploads/2017/07/201707060225187.png" alt="魔改版BBR一键脚本 For Debian8/Ubuntu16+" title="魔改版BBR一键脚本 For Debian8/Ubuntu16+"></p><p>然后根据提示重启系统。 重启完成后，运行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash bbr.sh start</span><br></pre></td></tr></table></figure><p>即可启动<a target="_blank" rel="noopener" href="https://www.zhujiboke.com/tag/%e9%ad%94%e6%94%b9%e7%89%88bbr">魔改版BBR</a>。</p><h2 id="查看魔改BBR状态"><a href="#查看魔改BBR状态" class="headerlink" title="查看魔改BBR状态"></a>查看魔改BBR状态</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br></pre></td></tr></table></figure><p>如果看到有 tsunami 就表示开启成功！</p><p><img src="https://www.jarods.org/wp-content/uploads/2017/07/2017070602263391.png" alt="魔改版BBR一键脚本 For Debian8/Ubuntu16+" title="魔改版BBR一键脚本 For Debian8/Ubuntu16+"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/07/13/debianubuntu-%E5%86%85%E6%A0%B8%E9%99%8D%E7%BA%A7%E6%95%99%E7%A8%8B-%E9%99%8D%E4%BD%8Ebbr%E4%B8%BA%E6%94%AF%E6%8C%81%E9%94%90%E9%80%9F%E7%9A%84%E5%86%85%E6%A0%B8%E7%89%88/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/07/13/debianubuntu-%E5%86%85%E6%A0%B8%E9%99%8D%E7%BA%A7%E6%95%99%E7%A8%8B-%E9%99%8D%E4%BD%8Ebbr%E4%B8%BA%E6%94%AF%E6%8C%81%E9%94%90%E9%80%9F%E7%9A%84%E5%86%85%E6%A0%B8%E7%89%88/" class="post-title-link" itemprop="url">Debian/Ubuntu 内核降级教程 —— 降低(BBR)为支持锐速的内核版本</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-07-13 22:48:48" itemprop="dateCreated datePublished" datetime="2017-07-13T22:48:48+08:00">2017-07-13</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>前段时间BBR出世后，很多人都去尝鲜了，有的人觉得比锐速加速效果好，有的觉得不如锐速，总之加速效果不同因素影响都不同。</p><p>而因为BBR是集成于内核中的一个功能，所以 卸载BBR&#x3D;更换内核 ，但是很多人不知道怎么更换，一般都是直接重装系统，以回到支持安装锐速的内核版本，今天有人问我了，于是我就简单研究研究写个手动教程好，并不难。</p><hr><h2 id="测试环境"><a href="#测试环境" class="headerlink" title="测试环境"></a>测试环境</h2><p>Debian 7 x64 和 Ubuntu 14.04 系统，当前内核为 v4.10.1 (支持BBR的最新稳定版内核) 测试通过，Debian 8 暂时没测试（应该差不多的）。</p><p>至于其他系统，步骤就完全不一样了，所以不做测试。</p><p><strong>OpenVZ不支持更换内核，不支持 锐速和BBR，所以请不要尝试下面的步骤，否则后果自负！</strong></p><h2 id="Debian的准备工作-Ubuntu请跳过"><a href="#Debian的准备工作-Ubuntu请跳过" class="headerlink" title="Debian的准备工作(Ubuntu请跳过)"></a>Debian的准备工作(Ubuntu请跳过)</h2><p><strong>添加软件包源并更新包列表</strong></p><ol><li>echo -e “\ndeb <a target="_blank" rel="noopener" href="http://ftp.debian.org/debian/">http://ftp.debian.org/debian/</a> wheezy-backports main” &gt;&gt; &#x2F;etc&#x2F;apt&#x2F;sources.list</li><li>apt-get update</li></ol><h2 id="安装内核"><a href="#安装内核" class="headerlink" title="安装内核"></a>安装内核</h2><h3 id="查询可用内核列表"><a href="#查询可用内核列表" class="headerlink" title="查询可用内核列表"></a>查询可用内核列表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aptitude search linux-image  awk &#x27;&#123;print $2&#125;&#x27;</span><br></pre></td></tr></table></figure><p>执行代码后可以看到很多内核版本，Debian 7 x64 系统选择 <code>linux-image-3.2.0-4-amd64</code> 内核，这个内核大部分 Debian 7 系统都是使用，完美支持锐速和LotServer。而Ubuntu 14.04 则选择 linux-image-3.13.0-32-generic 内核。</p><p><strong>锐速支持的内核看这里：<a target="_blank" rel="noopener" href="https://www.91yun.org/serverspeeder91yun">传送门</a></strong></p><p>Debian和Ubuntu唯一的区别就是这里提示的内核名称不一样，和下面安装内核用的命令略有区别，其他都通用！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># VPS提示示例/64位 #</span><br><span class="line"># Debian 7 和 8 可能不一样，还有 64位和32位 内容也不一样。</span><br><span class="line"> </span><br><span class="line">root@debian:~# aptitude search linux-image  awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">linux-image</span><br><span class="line">linux-image-2.6-amd64</span><br><span class="line">linux-image-3.16.0-0.bpo.4-amd64</span><br><span class="line">linux-image-3.16.0-0.bpo.4-amd64-dbg</span><br><span class="line">linux-image-3.2.0-4-amd64</span><br><span class="line">linux-image-3.2.0-4-amd64-dbg</span><br><span class="line">linux-image-3.2.0-4-rt-amd64</span><br><span class="line">linux-image-3.2.0-4-rt-amd64-dbg</span><br><span class="line">linux-image-4.10.1-041001-generic</span><br><span class="line"> </span><br><span class="line"># Ubuntu 14.04 提示内容 #</span><br><span class="line">...</span><br><span class="line">linux-image-3.13.0-32-generic</span><br><span class="line">linux-image-3.13.0-32-generic:i386</span><br><span class="line">linux-image-3.13.0-32-lowlatency</span><br><span class="line">linux-image-3.13.0-32-lowlatency</span><br><span class="line">...</span><br><span class="line"># 多余的我都省略了，写出来意义不大 #</span><br></pre></td></tr></table></figure><h3 id="Debian-安装内核"><a href="#Debian-安装内核" class="headerlink" title="Debian 安装内核"></a><strong>Debian</strong> 安装内核</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 示例 #</span><br><span class="line">apt-get -t wheezy-backports install linux-image-3.2.0-4-amd64 -y</span><br><span class="line"># 示例 #</span><br></pre></td></tr></table></figure><h3 id="Ubuntu-安装内核"><a href="#Ubuntu-安装内核" class="headerlink" title="Ubuntu 安装内核"></a>Ubuntu 安装内核</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 示例 #</span><br><span class="line">apt-get install linux-image-3.13.0-32-generic -y</span><br><span class="line"># 示例 #</span><br></pre></td></tr></table></figure><h2 id="卸载内核"><a href="#卸载内核" class="headerlink" title="卸载内核"></a>卸载内核</h2><h3 id="查看当前系统所有内核"><a href="#查看当前系统所有内核" class="headerlink" title="查看当前系统所有内核"></a>查看当前系统所有内核</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">dpkg -lgrep linux-image  awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line"># VPS提示示例/64位 #</span><br><span class="line"># Debian 7 和 8 可能不一样，还有 64位和32位 内容也不一样。</span><br><span class="line"> </span><br><span class="line">root@debian:~# dpkg -lgrep linux-image  awk &#x27;&#123;print $2&#125;&#x27;</span><br><span class="line">linux-image-3.2.0-4-amd64</span><br><span class="line">linux-image-4.10.1-041001-generic</span><br><span class="line"> </span><br><span class="line"># Ubuntu 14.04 提示内容 #</span><br><span class="line">linux-image-3.13.0-32-generic</span><br><span class="line">linux-image-4.10.1-041001-generic</span><br></pre></td></tr></table></figure><h3 id="卸载其余内核"><a href="#卸载其余内核" class="headerlink" title="卸载其余内核"></a>卸载其余内核</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get purge 其余内核名称 -y</span><br></pre></td></tr></table></figure><p>从上面示例中可以看到，除了刚才安装的 <code>linux-image-3.2.0-4-amd64</code> 内核外，还剩下一个内核 <code>linux-image-4.10.1-041001-generic</code> ，我们需要卸载这个内核：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 示例 #</span><br><span class="line">apt-get purge linux-image-4.10.1-041001-generic -y</span><br><span class="line"># 示例 #</span><br></pre></td></tr></table></figure><h2 id="结尾工作"><a href="#结尾工作" class="headerlink" title="结尾工作"></a>结尾工作</h2><h3 id="关闭-BBR（如有）"><a href="#关闭-BBR（如有）" class="headerlink" title="关闭 BBR（如有）"></a><strong>关闭</strong> BBR（如有）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;/net\.core\.default_qdisc=fq/d&#x27; /etc/sysctl.conf &amp;&amp; sed -i &#x27;/net\.ipv4\.tcp_congestion_control=bbr/d&#x27; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br><span class="line"># 清除BBR启动代码并保存，执行并不会提示任何信息。</span><br></pre></td></tr></table></figure><h3 id="更新-grub-系统引导文件并重启VPS"><a href="#更新-grub-系统引导文件并重启VPS" class="headerlink" title="更新 grub 系统引导文件并重启VPS"></a><strong>更新 grub</strong> 系统引导文件并重启VPS</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update-grub</span><br><span class="line"># reboot是重启服务器</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure><p>如果有什么问题请在下面告诉我。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2017/07/11/linux-%E6%B7%BB%E5%8A%A0-swap-%E4%BA%A4%E6%8D%A2%E5%86%85%E5%AD%98%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98-%E7%9A%84%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/07/11/linux-%E6%B7%BB%E5%8A%A0-swap-%E4%BA%A4%E6%8D%A2%E5%86%85%E5%AD%98%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98-%E7%9A%84%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">Linux 添加 SWAP 交换内存/虚拟内存 的简单方法</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2017-07-11 09:23:36" itemprop="dateCreated datePublished" datetime="2017-07-11T09:23:36+08:00">2017-07-11</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.9k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>最近见一些人买了 128MB小内存的KVM小鸡想要安装锐速，但是老是提示内存不足，或者运行ShadowsocksR服务端老被系统Kill，那么可以适当的添加一些虚拟内存，以避免内存不足的问题。</p><hr><h3 id="SWAP简单介绍"><a href="#SWAP简单介绍" class="headerlink" title="SWAP简单介绍"></a>SWAP简单介绍</h3><p>Linux的内存分为 物理内存 和 虚拟内存，虚拟内存(SWAP)也叫交换区、交换分区等。</p><p>当运行程序，产生进程时。系统会判断当前物理内存是否还有空闲内存 以允许进程调入内存运行，如果有那么 则直接调入内存进行运行；如果没有，那么会根据优先级选择一个进程挂起，把该进程交换到SWAP中等待，然后把新的进程调入到内存中运行。</p><p>根据这种换入和换出，实现了内存的循环利用，让用户感觉不到内存的限制。从这也可以看出SWAP扮演了一个非常重要的角色，就是暂存被换出的进程。</p><hr><p>当物理内存使用完或者达到一定比例之后，系统会自动使用SWAP做临时的内存使用。当物理内存和SWAP都被使用完那么就会出错：<strong>out of memory</strong></p><p>对于使用多大比例物理内存之后开始使用SWAP，在系统的配置文件中可以通过调整参数进行修改。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat  /proc/sys/vm/swappiness</span><br></pre></td></tr></table></figure><p>默认是 <code>60</code> ，一般不需要更改，当数值为 <code>0</code> 的时候，就会尽量使用物理内存直到用完才会使用SWAP，当数值为<code>100</code> 的时候，就会尽量使用SWAP。</p><hr><p>SWAP是从硬盘中虚拟出来的，所以速度由硬盘的读写速度决定，<strong>如果你的Linux服务器IO很低，硬盘是 HDD或者石头盘 钻石盘，那么效果会很差。</strong></p><p>如果你的VPS没有SWAP，那么添加一些可能会提高性能，但不建议添加太多，否则也是浪费，而且SWAP始终是硬盘虚拟的，比不上物理内存。</p><hr><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><blockquote><p>注意：只有虚拟化构架为XEN、KVM、VM-Ware的VPS可以自己添加SWAP，<strong>OpenVZ不支持添加SWAP！</strong></p></blockquote><h3 id="root-账号"><a href="#root-账号" class="headerlink" title="root 账号"></a>root 账号</h3><p><strong>添加SWAP操作，必须是 root 用户才可以操作</strong>，所以请用 root 账号登陆服务器或者切换为 root 用户：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure><p>输入执行后，会提示你输入 root 账号的密码，输入正确密码并回车后，没有报错那么就可以继续下面的步骤了。</p><h3 id="检查硬盘大小"><a href="#检查硬盘大小" class="headerlink" title="检查硬盘大小"></a>检查硬盘大小</h3><p>因为SWAP是在硬盘中建立一个交换区文件，所以需要磁盘中最少有 这个文件大小 的空闲空间。</p><p>输入执行这个命令，即可看到你的VPS当前磁盘大小和使用情况：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -m</span><br></pre></td></tr></table></figure><p>从下面的示例中可以看到，这个VPS大概有 15GB的硬盘大小(14621 MB)，用了 1GB(1117 MB)，剩下12.5GB(12763 MB)大小。</p><p>既然硬盘大小充足，那就可以继续下面步骤了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># VPS示例提示 #</span><br><span class="line"># 下列参数表头分别为：文件系统、总大小(单位MB)、已用大小(单位MB)、未用大小(单位MB)、使用率(%)、挂载点</span><br><span class="line">root@doub.io:~# df -m</span><br><span class="line">Filesystem 1M-blocks Used Available Use% Mounted on</span><br><span class="line">rootfs 14621 1117 12763 9% /</span><br><span class="line">udev 10 0 10 0% /dev</span><br><span class="line">tmpfs 50 1 50 1% /run</span><br><span class="line">/dev/disk/by-uuid/12dc23 14621 1117 12763 9% /</span><br><span class="line">tmpfs 5 0 5 0% /run/lock</span><br><span class="line">tmpfs 202 0 202 0% /run/shm</span><br><span class="line"># VPS示例提示 #</span><br></pre></td></tr></table></figure><h2 id="添加交换区SWAP"><a href="#添加交换区SWAP" class="headerlink" title="添加交换区SWAP"></a>添加交换区SWAP</h2><h3 id="查看-当前SWAP大小"><a href="#查看-当前SWAP大小" class="headerlink" title="查看 当前SWAP大小"></a>查看 当前SWAP大小</h3><p>我们可以先查看一下当前的SWAP大小（单位 MB）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">free -m</span><br><span class="line"># VPS示例提示 #</span><br><span class="line">root@doub.io:~# free -m</span><br><span class="line">total used free shared buffers cached</span><br><span class="line">Mem: 244 141 103 0 38 76</span><br><span class="line">-/+ buffers/cache: 26 218</span><br><span class="line">Swap: 127 0 127</span><br><span class="line"># VPS示例提示 #</span><br></pre></td></tr></table></figure><h3 id="创建-SWAP文件"><a href="#创建-SWAP文件" class="headerlink" title="创建 SWAP文件"></a>创建 SWAP文件</h3><p>从上面的VPS示例中可以看到，这个VPS物理内存约等于 256MB，所以可以添加 <strong>物理内存*2的SWAP&#x3D;512MB</strong> 。</p><p>bs 是字节数，这里是1024 B，count 是blocks块数，of 是要输出的SWAP交换区文件<strong>（本文章仅为示例，文件和位置可以自己改）</strong></p><p>所以： <strong>bs&#x3D;1024 B&#x3D;1 KB，512000 * 1 KB&#x3D;512000 KB &#x2F; 1024 ≈ 512 MB</strong> （为了直观的看，就按1000来算了 <img src="https://doub.io/wp-content/themes/yusi1.0/img/smilies/icon_lol.gif" alt=":lol:">）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/zero of=/var/swapfile1 bs=1024 count=512000</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># VPS示例提示 #</span><br><span class="line">root@doub.io:~# dd if=/dev/zero of=/var/swapfile1 bs=1024 count=512000</span><br><span class="line">512000+0 records in</span><br><span class="line">512000+0 records out</span><br><span class="line">524288000 bytes (524 MB) copied, 4.09314 s, 128 MB/s</span><br><span class="line"># VPS示例提示 #</span><br></pre></td></tr></table></figure><p>查看文件是否创建成功，大小是否正确(因为按1000计算，所以会不足 512MB)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">du -ah /vargrep &quot;swapfile1&quot;</span><br><span class="line"># VPS示例提示 #</span><br><span class="line">root@doub.io:~# du -ah /vargrep &quot;swapfile1&quot;</span><br><span class="line">501M/var/swapfile1</span><br></pre></td></tr></table></figure><h3 id="建立-SWAP文件"><a href="#建立-SWAP文件" class="headerlink" title="建立 SWAP文件"></a>建立 SWAP文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkswap /var/swapfile1</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># VPS示例提示 #</span><br><span class="line">root@doub.io:~# mkswap /var/swapfile1</span><br><span class="line">Setting up swapspace version 1, size = 511996 KiB</span><br><span class="line">no label, UUID=c48fef60-7d49-450c-bfd1-7a7826de7cdd</span><br><span class="line"># VPS示例提示 #</span><br></pre></td></tr></table></figure><h3 id="启用-SWAP文件"><a href="#启用-SWAP文件" class="headerlink" title="启用 SWAP文件"></a>启用 SWAP文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapon /var/swapfile1</span><br></pre></td></tr></table></figure><p>启用 SWAP文件没有任何提示，启用后我们查看一下是否正常启用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">swapon -s</span><br><span class="line">free -m</span><br></pre></td></tr></table></figure><p>可以看到下面的SWAP中，成功添加启用了一个 SWAP交换区。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># VPS示例提示 #</span><br><span class="line">root@doub.io:~# swapon -s</span><br><span class="line">FilenameTypeSizeUsedPriority</span><br><span class="line">/dev/vda2 partition1310680-1</span><br><span class="line">/var/swapfile1 file5119960-2</span><br><span class="line"> </span><br><span class="line">root@doub.io:~# free -m</span><br><span class="line">total used free shared buffers cached</span><br><span class="line">Mem: 244 240 4 0 34 175</span><br><span class="line">-/+ buffers/cache: 30 214</span><br><span class="line">Swap: 627 0 627</span><br><span class="line"># VPS示例提示 #</span><br></pre></td></tr></table></figure><h3 id="开机启动加载"><a href="#开机启动加载" class="headerlink" title="开机启动加载"></a>开机启动加载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;/var/swapfile1 swap swap defaults 0 0&quot; &gt;&gt; /etc/fstab</span><br></pre></td></tr></table></figure><hr><p>如果你又不想要刚才新添加的SWAP了，那么可以取消它们。</p><h3 id="取消-SWAP文件"><a href="#取消-SWAP文件" class="headerlink" title="取消 SWAP文件"></a>取消 SWAP文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">swapoff /var/swapfile1</span><br></pre></td></tr></table></figure><h3 id="取消-开机启动加载"><a href="#取消-开机启动加载" class="headerlink" title="取消 开机启动加载"></a>取消 开机启动加载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &quot;/swapfile1/d&quot; /etc/fstab</span><br></pre></td></tr></table></figure><p>取消后，可以再 <code>free -m</code> 查看一下SWAP，确定取消了，那么就可以删除 SWAP文件了。</p><h3 id="删除-SWAP文件"><a href="#删除-SWAP文件" class="headerlink" title="删除 SWAP文件"></a>删除 SWAP文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /var/swapfile1</span><br></pre></td></tr></table></figure><p>有什么问题请在下面留言！</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"><a class="extend prev" rel="prev" href="/page/24/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/26/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener("tabs:register",()=>{let t=CONFIG.comments["activeClass"];var e;(t=CONFIG.comments.storage?localStorage.getItem("comments_active")||t:t)&&(e=document.querySelector(`a[href="#comment-${t}"]`))&&e.click()}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jarod</p><div class="site-description" itemprop="description">记录生活中的点点滴滴</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">258</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">306</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jarodvip" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jarodvip" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jarod</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">647k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">9:48</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>