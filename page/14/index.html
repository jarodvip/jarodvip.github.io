<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"jarod.vip",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"always",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="记录生活中的点点滴滴"><meta property="og:type" content="website"><meta property="og:title" content="Jarod&#39;s Blog"><meta property="og:url" content="https://jarod.vip/page/14/index.html"><meta property="og:site_name" content="Jarod&#39;s Blog"><meta property="og:description" content="记录生活中的点点滴滴"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Jarod"><meta property="article:tag" content="VPS,hexo,linux,debian,windows,macos"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jarod.vip/page/14/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><title>Jarod's Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-R131WF8QZC"></script><script>function gtag(){dataLayer.push(arguments)}CONFIG.hostname===location.hostname&&(window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-R131WF8QZC"))</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?e67344a16e268228733f496a595ecb7a",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Jarod's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Jarod's Blog</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2019/02/23/mac-%E9%87%8D%E7%BD%AE-nvram-%E5%92%8C-smc/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/02/23/mac-%E9%87%8D%E7%BD%AE-nvram-%E5%92%8C-smc/" class="post-title-link" itemprop="url">MAC 重置 Nvram 和 SMC</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-02-23 00:41:01" itemprop="dateCreated datePublished" datetime="2019-02-23T00:41:01+08:00">2019-02-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Mac/" itemprop="url" rel="index"><span itemprop="name">Mac</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>503</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>客服在通话中引导我做了如下操作。<br>1.重置 Mac 上的系统管理控制器<br>选取苹果菜单 &gt;“关机”。<br>在 Mac 关机后，按下内建键盘左侧的 Shift-Control-Option，然后同时按下电源按钮。按住这些按键和电源按钮 10 秒钟。如果您的 MacBook Pro 配有触控 ID，则触控 ID 按钮也是电源按钮。<br>松开所有按键。<br>再次按下电源按钮以开启 Mac。</p><h3 id="配有-T2-芯片的-Mac-笔记本电脑"><a href="#配有-T2-芯片的-Mac-笔记本电脑" class="headerlink" title="配有 T2 芯片的 Mac 笔记本电脑"></a>配有 T2 芯片的 Mac 笔记本电脑</h3><p>先尝试以下操作：</p><ol><li>选取苹果菜单 &gt;“关机”。</li><li>在 Mac 关机后，按住电源按钮 10 秒钟。</li><li>松开电源按钮，然后等待几秒钟。</li><li>再次按下电源按钮以开启 Mac。</li></ol><p>如果上述操作无法解决问题，请按照以下步骤操作：</p><ol><li>选取苹果菜单 &gt;“关机”。</li><li>在 Mac 关机后，按住右 Shift 键、左 Option 键和左 Control 键 7 秒钟。然后，在按住电源按钮的同时继续按住这些按键 7 秒钟。</li><li>松开所有三个按键和电源按钮，然后等待几秒钟。</li><li>再次按下电源按钮以开启 Mac。</li></ol><p>2.重置 NVRAM<br>Option+Command+P+R<br>将 Mac 关机，然后开机并立即同时按住以下四个按键：Option、Command、P 和 R。您可以在大约 20 秒后松开这些按键，在此期间您的 Mac 可能看似在重新启动。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2019/02/13/mac-book-pro%E5%85%B3%E4%BA%8E%E7%9B%92%E7%9B%96%E4%BC%91%E7%9C%A0%E6%8E%89%E7%94%B5%E5%BF%AB%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/02/13/mac-book-pro%E5%85%B3%E4%BA%8E%E7%9B%92%E7%9B%96%E4%BC%91%E7%9C%A0%E6%8E%89%E7%94%B5%E5%BF%AB%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/" class="post-title-link" itemprop="url">Mac book pro关于盒盖休眠掉电快的解决办法</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-02-13 11:07:57" itemprop="dateCreated datePublished" datetime="2019-02-13T11:07:57+08:00">2019-02-13</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Mac/" itemprop="url" rel="index"><span itemprop="name">Mac</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>第一个修改是修改待机模式，这个很多人都知道了。</p><p>查看自己电脑的休眠状态，改成25可以解决待机耗电的问题</p><p>查看状态命令 pmset -g</p><p> </p><p>hibernatemode&#x3D;25</p><p>is only settable via pmset. The system will store a copy of memory to persistent storage (the disk), and will remove power to memory. The system will restore from disk image. If you want hibernation—slower sleeps, slower wakes, and better battery life you should use this setting.</p><p> </p><p>修改状态命令 <strong>sudo pmset -a hibernatemode 25</strong></p><p>当时我改了这个之后，掉电有所改善，但是还是掉的很快，我的目标是放一晚上不掉电，于是继续找方法。 后来看到一个帖子里面说的很有道理，其实盒盖之后掉电主要是因为还有网络活动的状态导致的，那就直接把网络活动给关闭了。于是我又输了下面这个命令。</p><p>修改<strong>tcpkeepalive</strong>。</p><p>    $ pmset -g custom #默认是 1 ，打开状态</p><p>    $ <strong>sudo pmset -b tcpkeepalive 0</strong> #设置为关闭</p><p>其中Battery Power（电池）和 AC Power（电源）的信息是分开的，pmset -b是只对Battery Power（电池）模式的参数进行调整。</p><p>把tcpkeepalive设置成0就可以了。</p><p>我改了这两个东西之后，每晚盒盖掉电从来没掉过1%。周末带笔记本回家，周一去上班，电基本都还能是满的。</p><p>但是，<strong>有一点特别重要，就是修改这两个东西后，在节能设置里面，千万不要恢复成默认，不然前面会恢复未修改前的状态。</strong> 如果升级系统后，或者某一天突然发现掉电又快了，请进终端查看一下上面两个参数有没有变动，查看命令上面也有。 另外，终端如果需要你输入密码的时候，你只管输入自己的开机密码然后回车就行了，终端里面输入密码是不显示的。</p><p>最近看到关于盒盖休眠的帖子有点多，有些是求助帖，有些是解决方案，但是看来看去我觉得还是我这个比较方便，两个命令就搞定，所以分享出来。</p><p>以上。 好像有朋友不太熟悉怎么操作，下面对不太懂的朋友给个操作流程。 1.搜索“终端”，打开 2.将帖子里面第一条蓝色加粗的命令复制进去，回车。 3.会提示输入密码，输入开机密码（这个时候是看不到密码的，输就是了），回车 4.复制第二条蓝色加粗命令进去，回车，同样输入密码操作，回车 5.重启。（其实不用重启都行） 6.特别注意：改了这个之后，就不要把节能那里恢复默认了，不然还得再改一次。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2019/02/10/centos7-%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99%E5%92%8Cselinux/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/02/10/centos7-%E5%85%B3%E9%97%AD%E9%98%B2%E7%81%AB%E5%A2%99%E5%92%8Cselinux/" class="post-title-link" itemprop="url">centos7 关闭防火墙和selinux</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-02-10 02:41:08" itemprop="dateCreated datePublished" datetime="2019-02-10T02:41:08+08:00">2019-02-10</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>647</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>CentOS 7.0默认使用的是firewall作为防火墙，使用iptables必须重新设置一下</p><p>1、直接关闭防火墙</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service #停止firewall</span><br><span class="line">systemctl disable firewalld.service #禁止firewall开机启动</span><br></pre></td></tr></table></figure><p>2、设置 iptables service</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install iptables-services</span><br></pre></td></tr></table></figure><p>如果要修改防火墙配置，如增加防火墙端口3306</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/iptables</span><br></pre></td></tr></table></figure><p>增加规则</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT</span><br></pre></td></tr></table></figure><p>保存退出后</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart iptables.service #重启防火墙使配置生效</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后重启系统使设置生效即可。</p><h2 id="CentOS-7-关闭selinux"><a href="#CentOS-7-关闭selinux" class="headerlink" title="CentOS 7   #关闭selinux"></a>CentOS 7   #关闭selinux</h2><p>用 root 用户运行下面的命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit /etc/sysconfig/selinux</span><br></pre></td></tr></table></figure><p>#编辑 selinux 文件</p><p>打开 selinux 文件后,修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#SELINUX=enforcing</span><br></pre></td></tr></table></figure><p>为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure><p>保存后退出 gedit。接着再执行如下命令,注意 setenforce 后面有空格:</p><p>setenforce 0</p><p>#设置 SELinux 状态</p><p>getenforce</p><p>#获取 SELinux 状态</p><p>-——————-</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost etc]# setenforce 0</span><br><span class="line"></span><br><span class="line">[root@localhost etc]# getenforce</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2019/01/30/%E4%BA%BA%E4%BA%BA%E5%BD%B1%E8%A7%86web%E7%89%88centos%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/01/30/%E4%BA%BA%E4%BA%BA%E5%BD%B1%E8%A7%86web%E7%89%88centos%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">人人影视Web版CentOS一键安装脚本</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-01-30 00:42:54" itemprop="dateCreated datePublished" datetime="2019-01-30T00:42:54+08:00">2019-01-30</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>994</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>目前只支持CentOS6&#x2F;7 64位(不支持32位)系统， 亲测CentOS 7系统顺利安装。其实在Debian或者Ubuntu都可以运行，不过官方只有在CentOS 7测试过，所以各位还是在CentOS 7 上运行吧。</p><p>更新：上网查了下人人影视自己建立了一个区块链，你可以下载电影剧集，不过同时也分享带宽，这样可以赚取人人钻还有CVNT，其实属于带宽挖矿。</p><p>**建议修改下载位置，默认面板密码 如果纯挂机的话，请在面板 -&gt; 选项里面【自动下载】选择 全部下载，否则是零上传， 它会自动下载最近视频然后自动上传。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">yum update -y</span><br><span class="line">yum install -y wget curl screen make</span><br><span class="line"></span><br><span class="line"># 安装路径</span><br><span class="line">Path=&quot;/root/&quot;</span><br><span class="line">cd $Path</span><br><span class="line"></span><br><span class="line"># 下载人人影视最新版本</span><br><span class="line">wget https://appdown.rrysapp.com/rrshareweb_centos7.tar.gz</span><br><span class="line">tar -zxvf rrshareweb_centos7.tar.gz</span><br><span class="line">cd rrshareweb</span><br><span class="line">rm -rf /root/rrshareweb_centos7.tar.gz</span><br><span class="line"></span><br><span class="line"># 建立服务 systemctl (start/stop/status/restart) renren</span><br><span class="line">cat &gt; /etc/systemd/system/renren.service &lt;&lt;EOF</span><br><span class="line">[Unit]</span><br><span class="line">Description=RenRen server</span><br><span class="line">After=network.target</span><br><span class="line">Wants=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">PIDFile=/var/run/renren.pid</span><br><span class="line">ExecStart=/root/rrshareweb/rrshareweb</span><br><span class="line">RestartPreventExitStatus=23</span><br><span class="line">Restart=always</span><br><span class="line">User=root</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">EOF</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>想查看运行中的话只输入 systemctl status renren 回车就可以看到了</p><p>注意：必须在Web面板修改下载目录位置</p><p>Crontab 定时重启服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * systemctl restart renren.service</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2019/01/30/crontab-centos7%E4%B8%8A%E7%9A%84%E4%BD%BF%E7%94%A8/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/01/30/crontab-centos7%E4%B8%8A%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">crontab centos7上的使用</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-01-30 00:41:39" itemprop="dateCreated datePublished" datetime="2019-01-30T00:41:39+08:00">2019-01-30</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>Unix和类Unix的操作系统中的定时器。</p><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install crontabs</span><br></pre></td></tr></table></figure><h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><p>crontab的使用就是编辑配置文件。 配置文件位于&#x2F;var&#x2F;spool&#x2F;cron&#x2F;<username>，其中<username>是用户名。 日志位于&#x2F;var&#x2F;log&#x2F;cron，参考<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/85bf258217c8">这里</a>清理日志文件。</username></username></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#列出crontab文件</span><br><span class="line">crontab -l</span><br><span class="line"></span><br><span class="line">#编辑crontab文件</span><br><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line">#删除crontab文件</span><br><span class="line">crontab -r</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>配置文件基本格式 :</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*     *     *     *     *     cmd</span><br><span class="line">分　  时　   日　   月　   周　  命令</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="定期清理Jenkins日志"><a href="#定期清理Jenkins日志" class="headerlink" title="定期清理Jenkins日志"></a>定期清理Jenkins日志</h1><p>新建.sh文件<code>vi /data/clean/clean_jenkins_log.sh</code>, 内容如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#! /bin/bash</span><br><span class="line"></span><br><span class="line">cat /dev/null &gt; /var/log/jenkins.log</span><br></pre></td></tr></table></figure><p>授权文件<code>chmod 777 /data/clean/clean_jenkins_log.sh</code>。 编辑crontab配置文件<code>crontab -e</code>, 加入一行配置, 每天凌晨1:30执行一次命令:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30 1 * * * /data/clean/clean_jenkins_log.sh &gt;/dev/null &amp;</span><br></pre></td></tr></table></figure><p>重载配置文件<code>systemctl reload crond.service</code>。</p><h1 id="定期清理Docker镜像"><a href="#定期清理Docker镜像" class="headerlink" title="定期清理Docker镜像"></a>定期清理Docker镜像</h1><p>过程同上，.sh文件内容修改为，按镜像Tag模糊匹配进行删除：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">docker rmi -f $(docker images  awk &#x27;/^daocloud.io/ &#123; print $3 &#125;&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">docker rmi -f $(docker images  awk &#x27;/^ccr.ccs.tencentyun.com/ &#123; print $3 &#125;&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">docker rmi -f $(docker images  grep &quot;none&quot;  awk &#x27;&#123;print $3&#125;&#x27;)</span><br></pre></td></tr></table></figure><h1 id="定期重启服务"><a href="#定期重启服务" class="headerlink" title="定期重启服务"></a>定期重启服务</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">systemctl restart nexus.service</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line"></span><br><span class="line">systemctl restart docker.service</span><br></pre></td></tr></table></figure><h1 id="其他样例"><a href="#其他样例" class="headerlink" title="其他样例"></a>其他样例</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#每晚的21:30 重启apache</span><br><span class="line">30 21 * * * /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#每月1、10、22日的4 : 45重启apache</span><br><span class="line">45 4 1,10,22 * * /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#每周六、周日的1 : 10重启apache</span><br><span class="line">10 1 * * 6,0 /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#每天18 : 00至23 : 00之间每隔30分钟重启apache</span><br><span class="line">0,30 18-23 * * * /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#晚上11点到早上7点之间，每隔一小时重启apache</span><br><span class="line">* 23-7/1 * * * /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#每一小时重启apache</span><br><span class="line">* */1 * * * /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#每月的4号与每周一到周三的11点重启apache</span><br><span class="line">0 11 4 * mon-wed /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br><span class="line">#一月一号的4点重启apache</span><br><span class="line">0 4 1 jan * /usr/local/etc/rc.d/lighttpd restart</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">30 1 * * * /data/clean/clean_docker_images.sh &gt;/dev/null &amp;</span><br><span class="line">30 2 * * * /data/clean/clean_docker_images2.sh &gt;/dev/null &amp;</span><br><span class="line">30 3 * * * /data/clean/clean_docker_images3.sh &gt;/dev/null &amp;</span><br><span class="line">30 4 * * * /data/clean/clean_jenkins_log.sh &gt;/dev/null &amp;</span><br><span class="line">10 5 * * * /data/clean/restart_docker.sh &gt;/dev/null &amp;</span><br><span class="line">30 5 * * * /data/clean/restart_nexus.sh &gt;/dev/null &amp;</span><br></pre></td></tr></table></figure><p>作者：adeng2016 链接：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b3c8493753ca">https://www.jianshu.com/p/b3c8493753ca</a> 來源：简书 简书著作权归作者所有，任何形式的转载都请联系作者获得授权并注明出处。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2019/01/27/onedrive%E5%8F%98%E8%BA%AB%E5%A4%96%E9%93%BE%E7%BD%91%E7%9B%98-aria2aria2ngoneindex%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0onedrive/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2019/01/27/onedrive%E5%8F%98%E8%BA%AB%E5%A4%96%E9%93%BE%E7%BD%91%E7%9B%98-aria2aria2ngoneindex%E8%87%AA%E5%8A%A8%E4%B8%8A%E4%BC%A0onedrive/" class="post-title-link" itemprop="url">OneDrive变身外链网盘-Aria2+Aria2Ng+OneIndex自动上传OneDrive</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-01-27 01:52:59" itemprop="dateCreated datePublished" datetime="2019-01-27T01:52:59+08:00">2019-01-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>OneDrive，全名Microsoft OneDrive，前称Windows Live SkyDrive，是微软所推出的网络硬盘及云端服务。由于与BSkyB存在商标争议，2014年1月，微软宣布SkyDrive更名为OneDrive。OneDrive前身是SkyDrive，开始于2007，目前已经运行了十几年。</p><p>所以说，<a target="_blank" rel="noopener" href="https://wzfou.com/tag/onedrive/">OneDrive</a>是一个老牌稳定的免费网络硬盘。在国内，OneDrive又是一个“神奇”的网盘，它的竞争对手如Google Drive、Dropbox在国内都早就上QQ了，而OneDrive依然可以正常使用。个人认为有一个原因不容忽视，那就是OneDrive上传下载速度太慢了。</p><p>很多人用OneDrive，恐怕看重的是OneDrive由微软出品，与Windows等完全融合，况且国内也可以正常访问，特别适合那些需要网盘来存文档的朋友使用。另外，OneDrive免费用户有5GB存储容量，但是如果是Office 365订阅用户，则可以获得5TB的存储空间。</p><p>这么大的存储空间，自然有人想到要将<a target="_blank" rel="noopener" href="https://wzfou.com/tag/onedrive-for-business/">OneDrive for Business</a>变身外链网盘，本篇文章就来分享一下Aria2+Aria2Ng+OneIndex一键安装方法。<a target="_blank" rel="noopener" href="https://wzfou.com/tag/oneindex/">OneIndex</a>是一个目录列表程序，可以将OneDrive网盘里面的文件列出来供我们查看&#x2F;下载，而且并不会消耗服务器的流量和空间。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_00.jpg" alt="OneDrive变身外链网盘-Aria2+Aria2Ng+OneIndex自动上传OneDrive"></p><p>而Aria2+Aria2Ng则可以让我们直接在VPS上下载BT种子，同时Aria2+Aria2Ng+OneIndex一键安装包会自动将Aria2+Aria2Ng下载的文件上传到OneDrive，从而让OneDrive成功变身为外链网盘。如果你还想将其它的网盘也变成自己的<a target="_blank" rel="noopener" href="https://wzfou.com/tag/geren-wangpan/">个人网盘</a>，可以看看：</p><ol><li><a target="_blank" rel="noopener" href="https://wzfou.com/rclone-cos-fuse-ossfs/">VPS挂载国内外网盘实现免费扩容工具:Rclone,COS-Fuse和OSSFS</a></li><li><a target="_blank" rel="noopener" href="https://wzfou.com/linux-vps-drive/">Linux VPS挂载Google Drive和Dropbox-实现VPS主机数据同步备份</a></li><li><a target="_blank" rel="noopener" href="https://wzfou.com/nextcloud-aria2/">Nextcloud离线下载搭建方法-整合Aria2和AriaNg、Aria2 WebUI实现离线下载</a></li></ol><h2 id="一、安装前准备"><a href="#一、安装前准备" class="headerlink" title="一、安装前准备"></a>一、安装前准备</h2><p>网站：</p><ol><li><a target="_blank" rel="noopener" href="https://github.com/donwa/oneindex">https://github.com/donwa/oneindex</a></li><li><a target="_blank" rel="noopener" href="https://onedrive.live.com/">https://onedrive.live.com/</a></li></ol><h3 id="1-1-一个OneDrive账户"><a href="#1-1-一个OneDrive账户" class="headerlink" title="1.1  一个OneDrive账户"></a>1.1  一个OneDrive账户</h3><p>支持OneDrive个人账户和商业账户，个人账户只有5GB存储空间，如何获得OneDrive商业账户？<strong>方法一：</strong>用钱购买。<strong>方法二：</strong>用edu教育邮箱免费加入Office 365教育版。</p><ol><li><a target="_blank" rel="noopener" href="https://signup.microsoft.com/signup?sku=Education">https://signup.microsoft.com/signup?sku=Education</a></li></ol><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_30.gif" alt="OneDrive教育版"></p><p>那么问题来了，到哪里注册到edu教育邮箱？<strong>此处有三个方法，方法一：</strong>直接搜索寻找那些冷门的.edu邮箱注册，可以参考这里：<a target="_blank" rel="noopener" href="https://wzfou.com/edu-email/">免费.edu邮箱获取方法-用教育邮箱获取免费VPS\域名\软件汇总列表</a>。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_31.gif" alt="OneDrive免费edu邮箱"></p><p><strong>方法二：</strong>自己使用.edu域名搭建邮局，开通邮箱账号。此方法通过率不一定高，最好找一些冷门的.edu后缀域名：<a target="_blank" rel="noopener" href="https://wzfou.com/az-pl/">AZ.PL波兰域名注册商提供免费的.com,.pl,.eu,.pl和.edu.pl教育域名</a>。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_32.jpg" alt="OneDrive自建邮局 "></p><p><strong>方法三：</strong>申请Office 365开发者计划。网站：<a target="_blank" rel="noopener" href="https://dev.office.com/devprogram%EF%BC%8C%E8%AF%A5%E6%B4%BB%E5%8A%A8%E4%B8%8D%E6%98%AF%E9%95%BF%E6%9C%9F%E7%9A%84%EF%BC%8C%E9%9C%80%E8%A6%81%E5%8A%A0%E5%85%A5%E8%AF%B7%E8%BF%85%E9%80%9F%E3%80%82">https://dev.office.com/devprogram，该活动不是长期的，需要加入请迅速。</a></p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_32.gif" alt="OneDrive加入开发计划"></p><p>按照要求填写注册信息即可，然后就可以成功申请到免费试用一年的Office 365企业版了，最高可获取21TB的OneDrive for Business存储空间，1TB用于管理员帐户，5TB用于4个子账户。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_05.gif" alt="OneDrive成功申请"></p><p>注册成功后，使用你的Office 365账号就可以登录了。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_06.gif" alt="OneDrive开始登录"></p><p>在创建新用户之前，记得在“存储设置” 页面上编辑1024到5120的默认OneDrive存储 ：<a target="_blank" rel="noopener" href="https://admin.onedrive.com/?v=StorageSettings%E3%80%82">https://admin.onedrive.com/?v=StorageSettings。</a></p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_09.gif" alt="OneDrive调整存储"></p><h3 id="1-2-一台VPS主机或服务器"><a href="#1-2-一台VPS主机或服务器" class="headerlink" title="1.2  一台VPS主机或服务器"></a>1.2  一台VPS主机或服务器</h3><p>Aria2+Aria2Ng+OneIndex一键安装脚本只适用于Debian 8、9，且无网站环境，会自动签发Let’s Encrypt SSL证书，所以你还需要一个域名。关于如何选择VPS主机可以看：<a target="_blank" rel="noopener" href="https://wzfou.com/vps-bangdan/">VPS主机排行榜单</a>。追求速度的话，可以看：<a target="_blank" rel="noopener" href="https://wzfou.com/cn2-gia-vps/">CN2 GIA VPS主机收集整理汇总</a>。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_33.jpg" alt="OneDrive需要一台VPS"></p><h2 id="二、Aria2-Aria2Ng-OneIndex一键安装"><a href="#二、Aria2-Aria2Ng-OneIndex一键安装" class="headerlink" title="二、Aria2+Aria2Ng+OneIndex一键安装"></a>二、Aria2+Aria2Ng+OneIndex一键安装</h2><p><strong>运行命令：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.moerats.com/usr/shell/Aria2_OneIndex.sh &amp;&amp; bash Aria2_OneIndex.sh</span><br></pre></td></tr></table></figure><p>按要求输入以下选项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">请输入你的OneIndex域名信息(如:one.wzfou.com):</span><br><span class="line">请输入你的Aria2密钥:例如wzfou.com</span><br><span class="line">请输入你OneIndex/OneDrive中的一个文件夹（格式:RATS，此后所有文件都会上传到该文件夹）:</span><br></pre></td></tr></table></figure><p>如下图：</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_12.gif" alt="OneIndex输入密钥"></p><p>输入好了后直到安装完成，如果<code>Nginx</code>安装失败，检查下系统是否自带<code>Apache2</code>，然后卸载掉就行了。<code>Aria2Ng</code>访问地址：<code>http://IP:8080</code>。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_13.gif" alt="OneIndex安装成功"></p><p><strong>相关文件：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OneIndex及域名根目录：/home/wwwroot/xx.com</span><br><span class="line">Aria2Ng根目录：/home/wwwroot/aria2ng</span><br><span class="line">域名证书目录：/home/wwwroot/ssl</span><br><span class="line">Aria2配置文件夹：/root/.aria2</span><br></pre></td></tr></table></figure><p><strong>相关提示：</strong></p><p>如果你用的是<a target="_blank" rel="noopener" href="https://wzfou.com/tag/aliyun/">阿里云</a>、<a target="_blank" rel="noopener" href="https://wzfou.com/tag/tencent-yun/">腾讯云</a>等带有安全组的云主机，记得在安全组中开启相应的端口，例如8080、443、80、6800等端口。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_14.gif" alt="OneIndex打开防火墙"></p><h2 id="三、OneIndex配置与使用"><a href="#三、OneIndex配置与使用" class="headerlink" title="三、OneIndex配置与使用"></a>三、OneIndex配置与使用</h2><h3 id="3-1-OneIndex配置"><a href="#3-1-OneIndex配置" class="headerlink" title="3.1  OneIndex配置"></a>3.1  OneIndex配置</h3><p>通过上面的方法我们已经在服务器上安装好了Aria2+Aria2Ng+OneIndex，现在我们还需要对OneIndex进行相应的配置。打开你的OneIndex域名就会自动跳转到安装界面。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_15.gif" alt="OneIndex安装界面"></p><p>安装过程中需要填写你的应用ID和密钥，直接点击链接跳转到微软的官网中获取即可。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_16.gif" alt="OneIndex填写ID"></p><p>绑定好你的OneDrive账号，此处就可以使用我们刚刚申请到了的OneDrive商业版账号了。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_18.gif" alt="OneIndex授权账号"></p><p>OneIndex配置成功。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_19.gif" alt="OneIndex配置成功"></p><h3 id="3-2-OneIndex使用"><a href="#3-2-OneIndex使用" class="headerlink" title="3.2  OneIndex使用"></a>3.2  OneIndex使用</h3><p>OneIndex后台登录地址类似于：<a target="_blank" rel="noopener" href="https://one.wzfou.com/?/admin/%E8%BF%99%E6%A0%B7%E7%9A%84%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%B0%B1%E6%98%AFOneIndex%E7%9A%84%E7%AE%A1%E7%90%86%E5%90%8E%E5%8F%B0%E7%95%8C%E9%9D%A2%E3%80%82%EF%BC%88%E7%82%B9%E5%87%BB%E6%94%BE%E5%A4%A7%EF%BC%89">https://one.wzfou.com/?/admin/这样的，这个就是OneIndex的管理后台界面。（点击放大）</a></p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_20.gif" alt="OneIndex管理后台界面"></p><p>这是前台界面，演示可以看：<a target="_blank" rel="noopener" href="https://one.wzfou.edu.pl/%E6%88%96%E8%80%85https://xn.tn/">https://one.wzfou.edu.pl/或者https://xn.tn/</a></p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_24.gif" alt="OneIndex前台页面"></p><p>OneIndex可以直接查看图片并显示可引用的外链地址（点击放大）。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_25.jpg" alt="OneIndex查看图片"></p><p>OneIndex也可以直接在线播放视频（点击放大）。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_26.jpg" alt="OneIndex观看视频"></p><p>OneIndex还可以允许游客上传文件到OneDrive中，你只需要在OneIndex后台管理中开启此功能。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_22.gif" alt="OneIndex开启图片上传"></p><p>然后游客就可以直接从OneIndex前台上传图片文件了。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_23.gif" alt="OneIndex游客上传文件"></p><h2 id="四、Aria2下载并自动上传至OneDrive"><a href="#四、Aria2下载并自动上传至OneDrive" class="headerlink" title="四、Aria2下载并自动上传至OneDrive"></a>四、Aria2下载并自动上传至OneDrive</h2><p>首先，打开你的Aria2Ng界面，然后在服务器一栏填入你在安装时设置的密钥。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_25.gif" alt="OneIndex填入密钥"></p><p>一切没有问题的话，Aria2Ng会显示Aria2连接成功。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_26.gif" alt="OneIndex连接成功"></p><p>现在你就可以像使用迅雷一样直接添加下载任务了，http或BT等都支持下载。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_27.gif" alt="OneIndex添加下载"></p><p>使用VPS服务器+Aria2下载文件最大的好处就是带宽足够大，一般机房给的带宽都可以达到10MB&#x2F;s以上。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_28.gif" alt="OneIndex机房带宽"></p><p>Aria2下载好的文件会自动上传到OneDrive，你可以通过OneIndex直接浏览观看了。</p><p><img src="https://www.jarods.org/wp-content/uploads/2019/01/onedrive-dev_29.gif" alt="OneIndex自动上传"></p><h2 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h2><p>OneIndex可以单独安装，你可以进入Github项目主页下载OneIndex程序包解压上传就可以了。由于OneDrive在国内访问速度比较慢，所以使用OneIndex查看浏览图片视频等会有卡顿的情况。</p><p>Aria2+Aria2Ng+OneIndex自动上传OneDrive有个注意的地方就是选择购买大带宽的VPS主机，像阿里云这样的限带宽的主机，下载速度很快，但是将服务器里的文件传出去真的是慢得不行。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/12/26/bbr%E5%8E%9F%E7%89%88-bbr%E9%AD%94%E6%94%B9-bbr-plus-%E9%94%90%E9%80%9F-%E7%AD%89%E5%9B%9B%E5%90%88%E4%B8%80%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/12/26/bbr%E5%8E%9F%E7%89%88-bbr%E9%AD%94%E6%94%B9-bbr-plus-%E9%94%90%E9%80%9F-%E7%AD%89%E5%9B%9B%E5%90%88%E4%B8%80%E5%AE%89%E8%A3%85%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">BBR原版/BBR魔改/BBR Plus + 锐速 等四合一安装脚本</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-12-26 13:02:59" itemprop="dateCreated datePublished" datetime="2018-12-26T13:02:59+08:00">2018-12-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>607</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>这个脚本，集合了BBR原版、BBR魔改、BBR Plus和锐速，愿用哪个用哪个，只能说：太方便了！</p><p>在vultr上Centos 7, Debian 8&#x2F;9, Ubuntu 16&#x2F;18测试通过。不支持OVZ和LXC。</p><p>建议SSH下，root用户。</p><p><strong>一、安装证书</strong> <code>apt-get -y install ca-certificates</code> 或 <code>yum -y install ca-certificates</code></p><p><strong>二、安装</strong> <code>wget &quot;https://github.com/chiakge/Linux-NetSpeed/raw/master/tcp.sh&quot; &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</code> 1、先在[1 – 3]切换内核（第一次显示为bbr内核也要切换一遍），重启 <img src="https://www.jarods.org/wp-content/uploads/2018/12/bbr-4.png"> 出现这个选no <img src="https://www.jarods.org/wp-content/uploads/2018/12/bbr-4-1.png"></p><p>2、重启后不用再下载脚本，直接 .&#x2F;tcp.sh ，在[4 – 8]中选你要开的加速</p><p>“1. 安装 BBR&#x2F;BBR魔改版内核” 对应4,5,6（原版，魔改，暴力魔改） “2. 安装 BBRplus版内核 ” 对应7（plus） “3. 安装 Lotserver(锐速)内核” 对应8（锐速）</p><p>3、开启后再 .&#x2F;tcp.sh ， 显示开启成功则启动成功，你也可以自己手动确认</p><p>现在你可以自由的切换你想要的加速，直到你不想折腾为止~</p><p>转自：<a target="_blank" rel="noopener" href="https://www.hostloc.com/thread-508015-1-1.html">https://www.hostloc.com/thread-508015-1-1.html</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/12/24/%E6%9C%AC%E7%AB%99%E4%B8%8A%E7%BA%BFkms%E6%9C%8D%E5%8A%A1%E4%B8%80%E5%8F%A5%E5%91%BD%E4%BB%A4%E6%BF%80%E6%B4%BBwindows-office/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/12/24/%E6%9C%AC%E7%AB%99%E4%B8%8A%E7%BA%BFkms%E6%9C%8D%E5%8A%A1%E4%B8%80%E5%8F%A5%E5%91%BD%E4%BB%A4%E6%BF%80%E6%B4%BBwindows-office/" class="post-title-link" itemprop="url">本站上线KMS服务~一句命令激活windows/office</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-12-24 10:09:48" itemprop="dateCreated datePublished" datetime="2018-12-24T10:09:48+08:00">2018-12-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.4k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>KMS 服务，用于在线激活 VOL 版本的 Windows 和 Office。 激活的前提是你的系统是批量授权版本，即 VL 版，一般企业版都是 VL 版。而 VL 版本的镜像一般内置 GVLK key，用于 KMS 激活。 下面列表里面含有的产品的 VL 版本或者能使用 key 进入 KMS 通道的产品，都支持使用 KMS 激活。</p><p>Office 2019 &amp; Office 2016：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/DeployOffice/vlactivation/gvlks">https://docs.microsoft.com/en-us/DeployOffice/vlactivation/gvlks</a> Office 2013：<a target="_blank" rel="noopener" href="https://technet.microsoft.com/zh-cn/library/dn385360.aspx">https://technet.microsoft.com/zh-cn/library/dn385360.aspx</a> Office 2010：<a target="_blank" rel="noopener" href="https://technet.microsoft.com/zh-cn/library/ee624355(v=office.14).aspx">https://technet.microsoft.com/zh-cn/library/ee624355(v=office.14).aspx</a> Windows：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys">https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys</a></p><p>使用管理员权限运行 cmd 查看系统版本，命令如下：</p><p>wmic os get caption</p><p>使用管理员权限运行 cmd 安装从上面列表得到的 key，命令如下：</p><p>slmgr &#x2F;ipk xxxxx-xxxxx-xxxxx-xxxxx-xxxxx</p><p>使用管理员权限运行 cmd 将 KMS 服务器地址设置为你自己的 IP 或 域名，后面最好再加上端口号（:1688），命令如下：</p><p>slmgr &#x2F;skms kms.jarod.vip</p><p><strong>注意：</strong>本脚本所做的工作就是此步骤。当你的 KMS 服务出于启动状态，那么此处就可以设置为你自己的 KMS 服务器地址。 使用管理员权限运行 cmd 手动激活系统，命令如下：</p><p>slmgr &#x2F;ato</p><p>关于 Office 的激活，要求必须是 VOL 版本，否则无法激活。 找到你的 Office 安装目录，32 位默认一般为 C:\Program Files (x86)\Microsoft Office\Office16 64 位默认一般为 C:\Program Files\Microsoft Office\Office16 Office16 是 Office 2016，Office15 就是 Office 2013，Office14 就是 Office 2010。 打开以上所说的目录，应该有个 OSPP.VBS 文件。 使用管理员权限运行 cmd 进入 Office 目录，命令如下：</p><p>cd “C:\Program Files (x86)\Microsoft Office\Office16”</p><p>使用管理员权限运行 cmd 注册 KMS 服务器地址：</p><p>cscript ospp.vbs &#x2F;sethst:kms.jarod.vip</p><p>使用管理员权限运行 cmd 手动激活 Office，命令如下：</p><p>cscript ospp.vbs &#x2F;act</p><p><strong>注意：</strong> KMS 方式激活，其有效期只有 180 天。 每隔一段时间系统会自动向 KMS 服务器请求续期，请确保你自己的 KMS 服务正常运行。</p><h3 id="常见错误的对策"><a href="#常见错误的对策" class="headerlink" title="常见错误的对策"></a>常见错误的对策</h3><p>如果遇到在执行过程报错，请按以下步骤检查： 1，你的 KMS 服务器是否挂了？ 2，你的 KMS 服务是否正常开启？ 3，你的系统或 Office 是否为批量 VL 版本？ 4，你的系统或 Office 是否修改过 Key 或未安装 GVLK Key？ 5，你是否以管理员权限运行 cmd？ 6，你的网络连接是否正常？ 7，你的本地 DNS 解析是否正常？ 8，如果你排除了以上的对策，那请根据错误提示代码自行搜索原因。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/12/24/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85kms%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/12/24/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85kms%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">一键安装KMS服务脚本</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-12-24 10:00:51" itemprop="dateCreated datePublished" datetime="2018-12-24T10:00:51+08:00">2018-12-24</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="http://www.jarods.org/wp-content/uploads/2018/12/kms.png"></p><p>KMS，是 Key Management System 的缩写，也就是密钥管理系统。这里所说的 KMS，毋庸置疑就是用来激活 VOL 版本的 Windows 和 Office 的 KMS 啦。经常能在网上看到有人提供的 KMS 服务器地址，那么你有没有想过自己也来搞一个这样的服务呢？而这样的服务在 Github 上已经有<a target="_blank" rel="noopener" href="https://github.com/Wind4/vlmcsd">开源代码</a>实现了。 本文就是在这个开源代码的基础上，开发了适用于三大 Linux 发行版的一键安装 KMS 服务的脚本。</p><h2 id="本脚本适用环境"><a href="#本脚本适用环境" class="headerlink" title="本脚本适用环境"></a>本脚本适用环境</h2><p>系统支持：CentOS 6+，Debian 7+，Ubuntu 12+ 虚拟技术：任意 内存要求：≥128M 日期　　：2018 年 10 月 25 日</p><h3 id="关于本脚本"><a href="#关于本脚本" class="headerlink" title="关于本脚本"></a>关于本脚本</h3><p>1、本脚本适用于三大 Linux 发行版，其他版本则不支持。 2、KMS 服务安装完成后会加入开机自启动。 3、默认记录日志，其日志位于 &#x2F;var&#x2F;log&#x2F;vlmcsd.log。</p><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>使用root用户登录，运行以下命令：</p><p>wget –no-check-certificate <a target="_blank" rel="noopener" href="https://github.com/teddysun/across/raw/master/kms.sh">https://github.com/teddysun/across/raw/master/kms.sh</a> &amp;&amp; chmod +x kms.sh &amp;&amp; .&#x2F;kms.sh</p><p>安装完成后，输入以下命令查看端口号 1688 的监听情况</p><p>netstat -nxtlp grep 1688</p><p>返回值类似于如下这样就表示 OK 了：</p><p>tcp 0 0 0.0.0.0:1688 0.0.0.0:* LISTEN 3200&#x2F;vlmcsd<br>tcp 0 0 :::1688 :::* LISTEN 3200&#x2F;vlmcsd</p><p>本脚本安装完成后，会将 KMS 服务加入开机自启动。</p><p><strong>使用命令：</strong> 启动：&#x2F;etc&#x2F;init.d&#x2F;kms start 停止：&#x2F;etc&#x2F;init.d&#x2F;kms stop 重启：&#x2F;etc&#x2F;init.d&#x2F;kms restart 状态：&#x2F;etc&#x2F;init.d&#x2F;kms status</p><p><strong>卸载方法：</strong> 使用 root 用户登录，运行以下命令：</p><p>.&#x2F;kms.sh uninstall</p><h3 id="如何使用-KMS-服务"><a href="#如何使用-KMS-服务" class="headerlink" title="如何使用 KMS 服务"></a>如何使用 KMS 服务</h3><p>KMS 服务，用于在线激活 VOL 版本的 Windows 和 Office。 激活的前提是你的系统是批量授权版本，即 VL 版，一般企业版都是 VL 版。而 VL 版本的镜像一般内置 GVLK key，用于 KMS 激活。 下面列表里面含有的产品的 VL 版本或者能使用 key 进入 KMS 通道的产品，都支持使用 KMS 激活。</p><p>Office 2019 &amp; Office 2016：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/DeployOffice/vlactivation/gvlks">https://docs.microsoft.com/en-us/DeployOffice/vlactivation/gvlks</a> Office 2013：<a target="_blank" rel="noopener" href="https://technet.microsoft.com/zh-cn/library/dn385360.aspx">https://technet.microsoft.com/zh-cn/library/dn385360.aspx</a> Office 2010：<a target="_blank" rel="noopener" href="https://technet.microsoft.com/zh-cn/library/ee624355(v=office.14).aspx">https://technet.microsoft.com/zh-cn/library/ee624355(v=office.14).aspx</a> Windows：<a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys">https://docs.microsoft.com/zh-cn/windows-server/get-started/kmsclientkeys</a></p><p>使用管理员权限运行 cmd 查看系统版本，命令如下：</p><p>wmic os get caption</p><p>使用管理员权限运行 cmd 安装从上面列表得到的 key，命令如下：</p><p>slmgr &#x2F;ipk xxxxx-xxxxx-xxxxx-xxxxx-xxxxx</p><p>使用管理员权限运行 cmd 将 KMS 服务器地址设置为你自己的 IP 或 域名，后面最好再加上端口号（:1688），命令如下：</p><p>slmgr &#x2F;skms Your IP or Domain:1688</p><p><strong>注意：</strong>本脚本所做的工作就是此步骤。当你的 KMS 服务出于启动状态，那么此处就可以设置为你自己的 KMS 服务器地址。 使用管理员权限运行 cmd 手动激活系统，命令如下：</p><p>slmgr &#x2F;ato</p><p>关于 Office 的激活，要求必须是 VOL 版本，否则无法激活。 找到你的 Office 安装目录，32 位默认一般为 C:\Program Files (x86)\Microsoft Office\Office16 64 位默认一般为 C:\Program Files\Microsoft Office\Office16 Office16 是 Office 2016，Office15 就是 Office 2013，Office14 就是 Office 2010。 打开以上所说的目录，应该有个 OSPP.VBS 文件。 使用管理员权限运行 cmd 进入 Office 目录，命令如下：</p><p>cd “C:\Program Files (x86)\Microsoft Office\Office16”</p><p>使用管理员权限运行 cmd 注册 KMS 服务器地址：</p><p>cscript ospp.vbs &#x2F;sethst:Your IP or Domain</p><p>使用管理员权限运行 cmd 手动激活 Office，命令如下：</p><p>cscript ospp.vbs &#x2F;act</p><p><strong>注意：</strong> KMS 方式激活，其有效期只有 180 天。 每隔一段时间系统会自动向 KMS 服务器请求续期，请确保你自己的 KMS 服务正常运行。</p><h3 id="常见错误的对策"><a href="#常见错误的对策" class="headerlink" title="常见错误的对策"></a>常见错误的对策</h3><p>如果遇到在执行过程报错，请按以下步骤检查： 1，你的 KMS 服务器是否挂了？ 2，你的 KMS 服务是否正常开启？ 3，你的系统或 Office 是否为批量 VL 版本？ 4，你的系统或 Office 是否修改过 Key 或未安装 GVLK Key？ 5，你是否以管理员权限运行 cmd？ 6，你的网络连接是否正常？ 7，你的本地 DNS 解析是否正常？ 8，如果你排除了以上的对策，那请根据错误提示代码自行搜索原因。</p><h3 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h3><p>2018 年 10 月 25 日：修正 vlmcsd 的 git 链接，即每次全新安装皆为官方的最新版本。注意：如果你想升级版本，则需要先停止 kms 服务，再删除 &#x2F;usr&#x2F;bin&#x2F;vlmcsd 文件，然后重新下载最新脚本安装即可。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/11/21/%E9%83%A8%E7%BD%B2poste%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/11/21/%E9%83%A8%E7%BD%B2poste%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="post-title-link" itemprop="url">部署Poste邮件服务器</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-11-21 16:30:20" itemprop="dateCreated datePublished" datetime="2018-11-21T16:30:20+08:00">2018-11-21</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>今天我们要给大家介绍一款非常有趣的邮件服务器程序，Poste. 作为邮件服务器领域的新秀，Poste近年来得到了持续的关注。它具有非常高的稳定性，并提供非常出众的管理面板，能够轻易实现邮件收发、多域名控制、邮箱容量控制、邮件杀毒、邮件过滤以及Webmail等基础功能。同时，Poste还提供了投递统计分析、客户端自动适配、一键安装SSL、邮件转发、邮件别名、Catch-All等相当有用的功能。另外，Poste邮件服务器基于Docker搭建，其过程非常简单，不像Zimbra之类的邮件服务器需要比较复杂的运行和维护能力。</p><p>下面我就来介绍一下如何安装与配置Poste邮件服务器。本文作者为香菇肥牛，文章链接为<a target="_blank" rel="noopener" href="https://qing.su/article/139.html">https://qing.su/article/139.html</a> 转载需经过本人同意且需注明原文链接，谢谢。</p><h2 id="1-系统环境配置"><a href="#1-系统环境配置" class="headerlink" title="1, 系统环境配置"></a>1, 系统环境配置</h2><p>首先我们介绍一下服务器的运行环境。由于基于Docker, 因此大部分Linux发行版均可以运行Poste. 运行的Poste占用内存在800 MB左右，因此建议选择一个内存1 GB或者以上的VPS进行搭建。Poste仅支持64位操作系统。</p><p>在安装任何邮件服务器之前，我们需要配置好hostname. 本文我们以mx.qing.su为例，当您在SSH中执行hostname命令时，应当看到mx的回显；当您在SSH中执行hostname -f命令时，应当看到mx.qing.su的回显。若您未配置好hostname, 请不要继续。</p><p>开始安装之前，建议您先设置好一部分DNS. 我们需要设置这样的几条记录 (请用您自己的域名替代下文中的qing.su)：</p><ol><li><em>qing.su.</em> <strong>A</strong> <em>Any_IP</em></li><li><em>mx.qing.su.</em> <strong>A</strong> <em>88.88.88.88</em></li><li><em>qing.su.</em> <strong>MX</strong> <em>mx.qing.su.</em> <strong>10</strong></li><li><em>mail.qing.su.</em> <strong>CNAME</strong> <em>mx.qing.su.</em></li><li><em>smtp.qing.su.</em> <strong>CNAME</strong> <em>mx.qing.su.</em></li><li><em>imap.qing.su.</em> <strong>CNAME</strong> <em>mx.qing.su.</em></li><li><em>qing.su.</em> <strong>IN TXT</strong> “v&#x3D;spf1 mx ~all”</li><li><em>_dmarc.qing.su.</em> <strong>IN TXT</strong> “v&#x3D;DMARC1; p&#x3D;none; rua&#x3D;mailto:<a href="mailto:&#x64;&#x6d;&#x61;&#114;&#99;&#45;&#x72;&#x65;&#x70;&#x6f;&#x72;&#x74;&#115;&#x40;&#x71;&#105;&#110;&#x67;&#x2e;&#115;&#x75;">&#x64;&#x6d;&#x61;&#114;&#99;&#45;&#x72;&#x65;&#x70;&#x6f;&#x72;&#x74;&#115;&#x40;&#x71;&#105;&#110;&#x67;&#x2e;&#115;&#x75;</a>”</li><li><em>88.88.88.88</em> <strong>PTR</strong> <em>mx.qing.su</em></li></ol><p>其中，4, 5, 6, 8项为可选，第九项为域名PTR, 需要您在自己的服务器提供商处设定。</p><h2 id="2-安装Poste"><a href="#2-安装Poste" class="headerlink" title="2, 安装Poste"></a>2, 安装Poste</h2><p>配置好以上的DNS, 我们就可以开始安装Poste了。之前说过，Poste全部程序均基于Docker, 因此我们需要先安装Docker. 以Ubuntu 16.04 LTS 64 bit为例，执行下面的命令安装Docker.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install \</span><br><span class="line">apt-transport-https \</span><br><span class="line">ca-certificates \</span><br><span class="line">curl \</span><br><span class="line">software-properties-common</span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span><br><span class="line">$(lsb_release -cs) \</span><br><span class="line">stable&quot;</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install docker-ce</span><br></pre></td></tr></table></figure><p> </p><p>安装好Docker后，执行下面的命令安装Poste.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-p 25:25 \</span><br><span class="line">-p 80:80 \</span><br><span class="line">-p 110:110 \</span><br><span class="line">-p 143:143 \</span><br><span class="line">-p 443:443 \</span><br><span class="line">-p 587:587 \</span><br><span class="line">-p 993:993 \</span><br><span class="line">-p 995:995 \</span><br><span class="line">-v /etc/localtime:/etc/localtime:ro \</span><br><span class="line">-v /srv/poste/data:/data \</span><br><span class="line">--name &quot;PosteServ&quot; \</span><br><span class="line">-h &quot;mx.qing.su&quot; \</span><br><span class="line">-t analogic/poste.io</span><br></pre></td></tr></table></figure><p> </p><p>如果没有报错，Poste应该已经安装完毕并开始运行了。整个过程仅需2-3分钟。</p><h2 id="3-配置Poste"><a href="#3-配置Poste" class="headerlink" title="3, 配置Poste"></a>3, 配置Poste</h2><p>安装好Poste之后，我们就可以登录mx.example.com来配置Poste了。初次登录，会提示设置服务器名和管理员邮箱与密码，如下图。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/11/1-w-2-1024x471.png"></p><p>设置完毕后，即可看到美观大气的后台管理界面。用过MailChannels等邮件平台的朋友想必会对顶部的投递统计非常熟悉。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/11/1.5-w-1024x457.png"></p><p>刚安装好Poste的时候，SSL还没有配置，我们可以使用Poste内置的Let’s Encrypt一键签发证书。点击左侧System settings — TLS certificate, 然后点击绿色的**<em>issue free letsencrypt.org certificate</em>**, 输入我们的域名，即可签发并自动安装证书，非常方便。您也可以手动申请并安装证书。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/11/2.2-w-1024x830.png"></p><p>证书签发完毕后关闭浏览器并重新登录，即可看到生效的SSL.</p><p>Poste支持无限数量的域名和邮箱。我们点击左侧的Virtual Domains即可添加域名，如下图。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/11/3.0-w-1024x546.png"></p><p>点击左侧Email accounts即可添加无限数量的邮箱。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/11/4-w-1024x776.png"></p><p>我们还可以设置DKIM签名。点击Virtual domains, 并选择您需要设置的域名，然后在DKIM key一栏中可以点击create new key, 将生成的记录填写到对应域名的DNS中即可。</p><p><img src="https://www.jarods.org/wp-content/uploads/2018/11/5-w-1024x427.png"></p><p>还有很多其他的功能，这里就不作过多的介绍了，欢迎大家自己去尝试探索。总之，Poste是一个小而精的邮件服务器，其功能丰富，收发信可靠，非常适合个人、团体以及企业使用。如果您在安装与使用的过程中遇到了问题，欢迎在本文下面留言，我将尽力解答。</p><p>本文作者为香菇肥牛，本文链接为<a target="_blank" rel="noopener" href="https://qing.su/article/139.html">https://qing.su/article/139.html</a>, 转载需经过本人同意且需注明原文链接，谢谢。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"><a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener("tabs:register",()=>{let t=CONFIG.comments["activeClass"];var e;(t=CONFIG.comments.storage?localStorage.getItem("comments_active")||t:t)&&(e=document.querySelector(`a[href="#comment-${t}"]`))&&e.click()}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jarod</p><div class="site-description" itemprop="description">记录生活中的点点滴滴</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">262</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">306</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jarodvip" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jarodvip" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jarod</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">658k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">9:58</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>