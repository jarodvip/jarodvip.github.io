<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"jarod.vip",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"always",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="记录生活中的点点滴滴"><meta property="og:type" content="website"><meta property="og:title" content="Jarod&#39;s Blog"><meta property="og:url" content="https://jarod.vip/page/21/index.html"><meta property="og:site_name" content="Jarod&#39;s Blog"><meta property="og:description" content="记录生活中的点点滴滴"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="Jarod"><meta property="article:tag" content="VPS,hexo,linux,debian,windows,macos"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://jarod.vip/page/21/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1,lang:"zh-CN"}</script><title>Jarod's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Jarod's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Jarod's Blog</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content index posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/07/12/centos-6-%E4%B8%AD%E7%A6%81%E7%94%A8-ipv6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/07/12/centos-6-%E4%B8%AD%E7%A6%81%E7%94%A8-ipv6/" class="post-title-link" itemprop="url">CentOS 6 中禁用 IPv6</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-12 20:47:40" itemprop="dateCreated datePublished" datetime="2018-07-12T20:47:40+08:00">2018-07-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>467</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>网上相当一部分资料谈到的方法是禁用 IPv6 模块，我们线上服务器也是禁用 IPv6 模块，并没有遇到什么问题。 但 CentOS 官方网站并不推荐使用禁用 IPv6 模块的方法，因为这样会引起 SELinux 和其他组件的问题。 推荐的方法如下：</p><h2 id="配置-x2F-etc-x2F-sysctl-conf"><a href="#配置-x2F-etc-x2F-sysctl-conf" class="headerlink" title="配置 &#x2F;etc&#x2F;sysctl.conf"></a>配置 &#x2F;etc&#x2F;sysctl.conf</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">net.ipv6.conf.all.disable_ipv6 = 1</span><br><span class="line">net.ipv6.conf.default.disable_ipv6 = 1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="在运行的系统中禁用"><a href="#在运行的系统中禁用" class="headerlink" title="在运行的系统中禁用"></a>在运行的系统中禁用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv6/conf/all/disable_ipv6</span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv6/conf/default/disable_ipv6</span><br><span class="line"></span><br><span class="line"># 或者</span><br><span class="line">sysctl -w net.ipv6.conf.all.disable_ipv6=1</span><br><span class="line">sysctl -w net.ipv6.conf.default.disable_ipv6=1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h1><p><a target="_blank" rel="noopener" href="https://wiki.centos.org/FAQ/CentOS6#head-d47139912868bcb9d754441ecb6a8a10d41781df">How do I disable IPv6?</a> <a target="_blank" rel="noopener" href="http://www.ttlsa.com/linux/centos6-rhce6-disables-the-ipv6-protocol-module/">CentOS 6&#x2F;RHCE 6 禁用 IPv6 协议模块</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/07/12/solusvm%E7%B3%BB%E5%88%97%EF%BC%9A%E7%8B%AC%E7%AB%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9B%E5%BB%BA%E5%88%86%E5%8C%BA%E3%80%81pv/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/07/12/solusvm%E7%B3%BB%E5%88%97%EF%BC%9A%E7%8B%AC%E7%AB%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9B%E5%BB%BA%E5%88%86%E5%8C%BA%E3%80%81pv/" class="post-title-link" itemprop="url">SolusVM系列：独立服务器创建分区、PV</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-12 20:34:06" itemprop="dateCreated datePublished" datetime="2018-07-12T20:34:06+08:00">2018-07-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>310</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>以OVH独立服务器为例，下面为说明。</p><p><strong>一、OVH独服安装Centos 6，并设置分区、PV</strong> <img src="https://www.jarods.org/wp-content/uploads/2018/07/391237520.jpg" alt="OVH-SolusVM-01.jpg" title="OVH-SolusVM-01.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/4215298074.jpg" alt="OVH-SolusVM-02.jpg" title="OVH-SolusVM-02.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/4281108784.jpg" alt="OVH-SolusVM-03.jpg" title="OVH-SolusVM-03.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/2485917292.jpg" alt="OVH-SolusVM-04.jpg" title="OVH-SolusVM-04.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/3942986774.jpg" alt="OVH-SolusVM-05.jpg" title="OVH-SolusVM-05.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/607199848.jpg" alt="OVH-SolusVM-06.jpg" title="OVH-SolusVM-06.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/858699790.jpg" alt="OVH-SolusVM-07.jpg" title="OVH-SolusVM-07.jpg"></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/3961972915.jpg" alt="OVH-SolusVM-08.jpg" title="OVH-SolusVM-08.jpg"></p><p><strong>二、设置PV</strong> 1、前面创建的磁盘情况：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">80GB ext4 /</span><br><span class="line">4GB swap</span><br><span class="line">xGB ext4 lv /uk</span><br></pre></td></tr></table></figure><p>2、查看硬盘、PV等结构</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsblk</span><br></pre></td></tr></table></figure><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/973841484.png" alt="OVH-SolusVM-10.png" title="OVH-SolusVM-10.png"></p><p>3、查看卷组 vgdisplay</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lvdisplay</span><br></pre></td></tr></table></figure><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/2326374238.png" alt="OVH-SolusVM-11.png" title="OVH-SolusVM-11.png"> LV路径 ： &#x2F;dev&#x2F;vg&#x2F;uk</p><p>4、删除卷组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">umount /dev/vg/uk</span><br><span class="line">lvremove /dev/vg/uk</span><br><span class="line">vgremove /dev/vg</span><br></pre></td></tr></table></figure><p>5、重建卷组</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vgcreate -s32 vps /dev/md5</span><br></pre></td></tr></table></figure><p>参考：<a target="_blank" rel="noopener" href="http://www.webhostingtalk.com/showthread.php?t=1392174">http://www.webhostingtalk.com/showthread.php?t=1392174</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/07/02/%E5%9C%A8debian-9%E5%92%8Cubuntu-16-04%E4%B8%8A%E7%A6%81%E7%94%A8ipv6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/07/02/%E5%9C%A8debian-9%E5%92%8Cubuntu-16-04%E4%B8%8A%E7%A6%81%E7%94%A8ipv6/" class="post-title-link" itemprop="url">在Debian 9和Ubuntu 16.04上禁用IPv6</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-02 00:29:55" itemprop="dateCreated datePublished" datetime="2018-07-02T00:29:55+08:00">2018-07-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在禁用IPv6之前，让我们看看系统中可用的网卡。使用<strong>ifconfig</strong>命令。</p><p>enp0s3：flags &#x3D; 4163 &lt;UP，BROADCAST，RUNNING，MULTICAST&gt; mtu 1500<br>inet 192.168.1.10 netmask 255.255.255.0 broadcast 192.168.1.255 <strong>inet6 fd50：1d9：9fe3：1400：a00：27ff：fe36：34ae prefixlen 64 scopeid 0x0</strong><br>inet6 fe80 :: a00：27ff：fe36：34ae prefixlen 64 scopeid 0x20<br>ether 08：00：27：36：34：ae txqueuelen 1000（以太网）<br>RX数据包893字节116790（114.0 KiB）<br>RX错误0丢弃0超出0帧0<br>TX数据包1054字节77781（75.9 KiB）<br>TX错误0丢弃0超载0载波0碰撞0<br>lo：标志&#x3D; 73 &lt;UP，LOOPBACK，RUNNING&gt; mtu 65536<br>inet 127.0.0.1 netmask 255.0.0.0 <strong>inet6 :: 1 prefixlen 128 scopeid 0x10</strong></p><pre><code>    loop txqueuelen 1（本地环回） RX数据包772字节73806（72.0 KiB） RX错误0丢弃0溢出0帧0 
    TX数据包772字节73806（72.0 KiB） TX错误0丢弃0溢出0载波0冲突0
</code></pre><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/Disable-IPv6-on-Debian-9-Ouput-of-ifconfig-command-Before-Disabling-IPv6.png" alt="在Debian 9上禁用IPv6  - 在禁用IPv6之前输出ifconfig命令"></p><p>在Debian 9上禁用IPv6 - 在禁用IPv6之前输出ifconfig命令</p><p>以上输出确认两个网卡均启用了IPv6。所以，我们现在将使用下面的方法禁用IPv6。</p><h3 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h3><p>编辑**&#x2F;etc&#x2F;sysctl.conf**文件。</p><p>sudo nano &#x2F;etc&#x2F;sysctl.conf</p><p>放置以下条目以禁用所有适配器的IPv6。</p><p>net.ipv6.conf.all.disable_ipv6 &#x3D; 1</p><p>对于特定的适配器（<strong>如果网卡名称为enp0s3</strong>）。</p><p>net.ipv6.conf.ens4.disable_ipv6 &#x3D; 1</p><p>要反映更改，请执行以下命令。</p><p>sudo sysctl -p</p><h3 id="方法2"><a href="#方法2" class="headerlink" title="方法2"></a>方法2</h3><p>在**&#x2F;etc&#x2F;sysctl.d<strong>目录中创建一个名为</strong>70-disable-ipv6.conf<strong>的</strong>文件**。</p><p>sudo nano &#x2F;etc&#x2F;sysctl.d&#x2F;70-disable-ipv6.conf</p><p>添加以下条目以禁用所有适配器的IPv6。</p><p>net.ipv6.conf.all.disable_ipv6 &#x3D; 1</p><p>对于特定的适配器（<strong>如果网卡名称为enp0s3</strong>）。</p><p>net.ipv6.conf.ens4.disable_ipv6 &#x3D; 1</p><p>运行以下命令以执行更改。</p><p>sudo sysctl -p -f &#x2F;etc&#x2F;sysctl.d&#x2F;70-disable-ipv6.conf</p><p>使用<strong>ifconfig</strong>命令验证<strong>。您可以看到输出中没有IPv6地址。</strong></p><p><img src="https://www.jarods.org/wp-content/uploads/2018/07/Disable-IPv6-on-Debian-9-Ouput-of-ifconfig-command-After-Disabling-IPv6.png" alt="在Debian 9上禁用IPv6  - 禁用IPv6后输出ifconfig命令"></p><p>在Debian 9上禁用IPv6 - 禁用IPv6后输出ifconfig命令</p><p>就这样。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/openvz%E8%99%9A%E6%8B%9F%E7%9A%84vps%E5%AE%89%E8%A3%85netspeeder%E5%AE%9E%E7%8E%B0%E5%8A%A0%E9%80%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/openvz%E8%99%9A%E6%8B%9F%E7%9A%84vps%E5%AE%89%E8%A3%85netspeeder%E5%AE%9E%E7%8E%B0%E5%8A%A0%E9%80%9F/" class="post-title-link" itemprop="url">openvz虚拟的VPS安装netspeeder实现加速</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:18:48" itemprop="dateCreated datePublished" datetime="2018-06-29T09:18:48+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>425</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>1.net-speeder installation wget <a target="_blank" rel="noopener" href="https://coding.net/u/njzhenghao/p/download/git/raw/master/net/_speeder-installer.sh">https://coding.net/u/njzhenghao/p/download/git/raw/master/net\_speeder-installer.sh</a> bash net_speeder–installer.sh 2.Port Acceleration Here acceleration on all ports nohup &#x2F;usr&#x2F;local&#x2F;net_speeder&#x2F;net_speeder venet0 “ip” &#x2F;dev&#x2F;null 2&gt;1 &amp;;echo “nohup &#x2F;usr&#x2F;local&#x2F;net_speeder&#x2F;net_speeder venet0 “ip” &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1″ &gt;&gt; &#x2F;etc&#x2F;rc.local;</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/debian-ubuntu%E4%B8%8B%E5%85%B3%E9%97%ADipv6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/debian-ubuntu%E4%B8%8B%E5%85%B3%E9%97%ADipv6/" class="post-title-link" itemprop="url">debian/ubuntu下关闭IPv6</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:17:49" itemprop="dateCreated datePublished" datetime="2018-06-29T09:17:49+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>在更新debian的时候发现链接里面出现的是IPV6，这个让我觉得很不爽，所以想着如何禁止或者关闭，最后在百度的帮助下找到了一篇比较全面的文章解决了在debian下搞定IPV6的问题：</p><p>使用 &#x2F;proc 这是#关闭所有接口的 IPv6 功能 echo “1” &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;all&#x2F;disable_ipv6 关闭指定网卡的 IPv6 功能 echo “1” &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;ethx&#x2F;disable_ipv6 使用 modprobe ，禁用 IPv6 编辑 vim &#x2F;etc&#x2F;modprobe.d&#x2F;aliases 输入 alias net-pf-10 off alias ipv6 off 编辑 vim &#x2F;etc&#x2F;modprobe.d&#x2F;blacklist 输入 blacklist net-pf-10 blacklist ipv6 利用 GRUB 添加启动参数， 禁用 IPv6 编辑 vim &#x2F;etc&#x2F;default&#x2F;grub 找到 GRUB_CMDLINE_LINUX_DEFAULT&#x3D;”quiet” 替换为 GRUB_CMDLINE_LINUX_DEFAULT&#x3D;”ipv6.disable&#x3D;1 quiet” 使用sysctl 对于squeeze及其后的版本，ipv6已被内核支持，所以可以通过sysctl来关闭它。可以使用以下命令： echo ‘net.ipv6.conf.all.disable_ipv6&#x3D;1’ &gt; &#x2F;etc&#x2F;sysctl.d&#x2F;disableipv6.conf 让ipv4优先于ipv6</p><p>一些系统中是ipv4和ipv6并存，而且ipv6优先于ipv4。但机房可能并暂时没有实际分配ipv6，所以我们也可以不要关闭ipv6，记ipv4优先于ipv6即可。输入如下命令: echo “precedence ::ffff:0:0&#x2F;96 100″&gt;&gt;&#x2F;etc&#x2F;gai.conf</p><p>当然也可以直接修改 &#x2F;etc&#x2F;gai.conf 找到 #precedence ::ffff:0:0&#x2F;96 100 把前面的”#”去掉即可。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/%E7%B2%BE%E7%AE%80debian-ubuntu%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%8C%96%E5%AE%89%E8%A3%85debian-ubunutu%E7%B3%BB%E7%BB%9F/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/%E7%B2%BE%E7%AE%80debian-ubuntu%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%EF%BC%8C%E6%9C%80%E5%B0%8F%E5%8C%96%E5%AE%89%E8%A3%85debian-ubunutu%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">精简Debian/Ubuntu系统环境，最小化安装debian/ubunutu系统</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:15:45" itemprop="dateCreated datePublished" datetime="2018-06-29T09:15:45+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>314</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>简单来说我们要把debian系统环境里面一些不需要的东西清除掉的话只需要经过4步就可以做到了：</p><p>升级系统更新到最新版，这个总是有必要的： apt-get update&amp;&amp;apt-get upgrade</p><p>删除一些不需要的软件： apt-get -y purge apache2-* bind9-* xinetd samba-* nscd-* portmap sendmail-* sasl2-bin</p><p>删除一些不需要的组件： apt-get -y purge lynx memtester unixodbc python-* odbcinst-* sudo tcpdump ttf-*</p><p>清理垃圾： apt-get autoremove &amp;&amp; apt-get clean</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/%E7%AE%80%E5%8D%95%E4%B8%BAvps%E6%88%96%E8%80%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A2%9E%E5%8A%A0swap/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/%E7%AE%80%E5%8D%95%E4%B8%BAvps%E6%88%96%E8%80%85%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A2%9E%E5%8A%A0swap/" class="post-title-link" itemprop="url">简单为VPS或者服务器增加SWAP</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:15:08" itemprop="dateCreated datePublished" datetime="2018-06-29T09:15:08+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>392</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>本方法适用于除openvz虚拟之外的XEN和KVM，如果增加的swap空间是SSD的话那么效果就更加好了！ 1.进入目录</p><p>cd &#x2F;var&#x2F;</p><p>2.获取要增加的SWAP文件块(这里以1GB为例)</p><p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;swapfile bs&#x3D;1024 count&#x3D;1038336</p><p>3.创建SWAP文件</p><p>&#x2F;sbin&#x2F;mkswap swapfile</p><p>4.激活SWAP文件</p><p>&#x2F;sbin&#x2F;swapon swapfile</p><p>5.查看SWAP信息是否正确</p><p>&#x2F;sbin&#x2F;swapon –s</p><p>6.添加到fstab文件中让系统引导时自动启动</p><p>echo “&#x2F;var&#x2F;swapfile swap swap defaults 0 0” &gt;&gt;&#x2F;etc&#x2F;fstab</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/29/mysql%E4%B8%BB%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%AD%A5%E5%A4%A7%E8%87%B4%E6%95%99%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/29/mysql%E4%B8%BB%E4%BB%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8C%E6%AD%A5%E5%A4%A7%E8%87%B4%E6%95%99%E7%A8%8B/" class="post-title-link" itemprop="url">MySQL主从数据库同步大致教程</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-29 09:12:14" itemprop="dateCreated datePublished" datetime="2018-06-29T09:12:14+08:00">2018-06-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>3.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>3 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>主从数据库</p><p>mysql主从复制原理: mysql支持单向、异步复制，复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。 mysql复制基于主服务器在二进制日志中跟踪所有对数据库的更改(更新、删除等等)。因此，要进行复制，必须在主服务器上启用二进制日志。 每个从服务器从主服务器接收主服务器已经记录到其二进制日志的保存的更新。当一个从服务器连接主服务器时， 它通知主服务器从服务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，并在本机上执行相同的更新。 然后封锁并等待主服务器通知新的更新。从服务器执行备份不会干扰主服务器，在备份过程中主服务器可以继续处理更新。</p><p>1、修改主服务器master: #vi &#x2F;etc&#x2F;my.cnf [mysqld] log-bin&#x3D;mysql-bin &#x2F;&#x2F;[必须]启用二进制日志 server-id&#x3D;1 &#x2F;&#x2F;[必须]服务器唯一ID，默认是1，一般取IP最后一段</p><p>2、修改从服务器slave: #vi &#x2F;etc&#x2F;my.cnf [mysqld] log-bin&#x3D;mysql-bin &#x2F;&#x2F;[不是必须]启用二进制日志 server-id&#x3D;226 &#x2F;&#x2F;[必须]服务器唯一ID，默认是1，一般取IP最后一段</p><p>3、重启数据库 service mysqld restart</p><p>4、创建用户 xxxx</p><p>5、登录主服务器的mysql，查询master的状态 mysql&gt;show master status; MySQL [mysql]&gt; show master status; +——————+———-+————–+——————+——————-+ File Position Binlog_Do_DB Binlog_Ignore_DB Executed_Gtid_Set +——————+———-+————–+——————+——————-+ mysql-bin.000020 82373 +——————+———-+————–+——————+——————-+ 1 row in set (0.00 sec)</p><p>6、配置从服务器Slave： Mysql&gt;change master to master_host&#x3D;’xxxx’,master_user&#x3D;’xxxx’,master_password&#x3D;’xxxxx1′,master_log_file&#x3D;’mysql-bin.000020′,master_log_pos&#x3D;14141889; &#x2F;&#x2F;注意不要断开，308数字前后无单引号。 Mysql&gt;flush privileges; Mysql&gt;start slave; &#x2F;&#x2F;启动从服务器复制功能</p><p>7、查看 Mysql&gt; show slave status\G</p><p>*************************** 1. row ***************************</p><p>Slave_IO_State: Waiting for master to send event Master_Host: xxx &#x2F;&#x2F;主服务器地址 Master_User: xxxxx &#x2F;&#x2F;授权帐户名，尽量避免使用root Master_Port: 3306 &#x2F;&#x2F;数据库端口，部分版本没有此行 Connect_Retry: 60 Master_Log_File: mysql-bin.000004 Read_Master_Log_Pos: 600 &#x2F;&#x2F;#同步读取二进制日志的位置，大于等于Exec_Master_Log_Pos Relay_Log_File: ddte-relay-bin.000003 Relay_Log_Pos: 251 Relay_Master_Log_File: mysql-bin.000004 Slave_IO_Running: Yes &#x2F;&#x2F;此状态必须YES Slave_SQL_Running: Yes &#x2F;&#x2F;此状态必须YES ……</p><p>注：Slave_IO及Slave_SQL进程必须正常运行，即YES状态，否则都是错误的状态(如：其中一个NO均属错误)。 主从服务器配置完成。 ————— 错误 2017-06-19 06:37:28 2209 [Warning] ‘proxies_priv’ entry ‘@ root@centos-512mb-ams3-02’ ignored in –skip-name-resolve mode. 2017-06-19 06:37:28 2209 [Warning] Neither –relay-log nor –relay-log-index were used; so replication may break when this MySQL server acts as a slave and has his hostname changed!! Please use ‘–relay-log&#x3D;mysql-relay-bin’ to avoid this problem. 2017-06-19 06:37:28 2209 [Warning] Storing MySQL user name or password information in the master info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START SLAVE; see the ‘START SLAVE Syntax’ in the MySQL Manual for more information. 2017-06-19 06:37:28 2209 [Warning] Slave SQL: If a crash happens this configuration does not guarantee that the relay log info will be consistent, Error_code: 0 2017-06-19 06:37:28 2209 [Note] Slave SQL thread initialized, starting replication in log ‘mysql-bin.000020’ at position 82373, relay log ‘.&#x2F;mysql-relay-bin.000002’ position: 283 2017-06-19 06:37:28 2209 [ERROR] Slave SQL: Error ‘Table ‘ba.tc_options’ doesn’t exist’ on query. Default database: ‘ba’. Query: ‘INSERT INTO `tc_options` (`name`, `value`) VALUES (‘cron_sign_again’,’a:2:{s:3:”num”;i:0;s:6:”lastdo”;s:10:”2017-06-18″;}’) ON DUPLICATE KEY UPDATE `value` &#x3D; ‘a:2:{s:3:”num”;i:0;s:6:”lastdo”;s:10:”2017-06-18″;}”, Error_code: 1146</p><p>1、锁定主服务器数据库 mysql&gt; flush tables with read lock; 2、 导出全部数据库 mysqldump -uroot -pxxxx -A &gt; all_database.mysql</p><p>3、从服务器停止slave，情况配置 mysql&gt; stop slave; reset slave; 4、导入数据库 mysql -uroot -pxxxx &lt; all_database.mysql</p><p>5、解锁主服务器数据库mysql&gt; unlock tables;</p><p>6、从数据库查看 show slave status\G</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/28/debian%E5%8D%87%E7%BA%A7%E5%88%B0debian8%E3%80%819%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/28/debian%E5%8D%87%E7%BA%A7%E5%88%B0debian8%E3%80%819%E4%B8%80%E9%94%AE%E8%84%9A%E6%9C%AC/" class="post-title-link" itemprop="url">Debian升级到debian8、9一键脚本</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-28 13:09:54" itemprop="dateCreated datePublished" datetime="2018-06-28T13:09:54+08:00">2018-06-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>813</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>VPS的系统相对较老，不支持系统，下面的脚本可以升级系统，但有可能会有问题。 升级前请重装成debian-7.0-x86-minimal、debian-7.0-x86_64、ubuntu-14.04-x86_64-minimal等其中1个系统。</p><p>Debian Wheezy 升级到 Jessie</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update;apt-get install -y wget ca-certificates;wget https://zhujiwiki.com/usr/uploads/2018/06/wheezy_to_jessie_installer.sh; bash wheezy_to_jessie_installer.sh</span><br></pre></td></tr></table></figure><p>Debian Wheezy 升级到 Stretch</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update;apt-get install -y wget ca-certificates;wget https://zhujiwiki.com/usr/uploads/2018/06/wheezy_to_stretch_installer.sh; bash wheezy_to_stretch_installer.sh</span><br></pre></td></tr></table></figure><p>Ubuntu 14.04 升级到 16.04</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get update;apt-get install -y wget ca-certificates;wget https://zhujiwiki.com/usr/uploads/2018/06/1404_to_1604_installer.sh; bash 1404_to_1604_installer.sh</span><br></pre></td></tr></table></figure><p>via：<a target="_blank" rel="noopener" href="https://www.lowendtalk.com/discussion/147323/upgrading-hostsolutions-ro-openvz-templates-to-16-04-jessie-or-stretch">https://www.lowendtalk.com/discussion/147323/upgrading-hostsolutions-ro-openvz-templates-to-16-04-jessie-or-stretch</a></p><p>欢迎到TeleGram群讨论：<a target="_blank" rel="noopener" href="https://t.me/zhujiwiki">https://t.me/zhujiwiki</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2018/06/16/linux-vps%E4%B8%80%E9%94%AE%E5%B1%8F%E8%94%BD%E6%8C%87%E5%AE%9A%E5%9B%BD%E5%AE%B6%E6%89%80%E6%9C%89%E7%9A%84ip%E8%AE%BF%E9%97%AE/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/06/16/linux-vps%E4%B8%80%E9%94%AE%E5%B1%8F%E8%94%BD%E6%8C%87%E5%AE%9A%E5%9B%BD%E5%AE%B6%E6%89%80%E6%9C%89%E7%9A%84ip%E8%AE%BF%E9%97%AE/" class="post-title-link" itemprop="url">Linux VPS一键屏蔽指定国家所有的IP访问</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-06-16 02:07:13" itemprop="dateCreated datePublished" datetime="2018-06-16T02:07:13+08:00">2018-06-16</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-09-29 21:27:45" itemprop="dateModified" datetime="2022-09-29T21:27:45+08:00">2022-09-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a></span></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>453</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><p>本文转载自<a target="_blank" rel="noopener" href="https://www.moerats.com/archives/585/">Rat’s Blog:Linux VPS一键屏蔽指定国家所有的IP访问</a></p><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>对于屏蔽指定国家所有的IP的手动教程刚讲了，查看：<a target="_blank" rel="noopener" href="https://www.moerats.com/archives/584/">Linux VPS使用ipset快速屏蔽指定国家的IP访问</a>，虽然步骤很简单，但为了更白的小白，友链博主YKilin大佬写出了一键脚本，本人就做了下小小的修改，简化了下步骤，这里分享下。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>本脚本适用于CentOS、Debian、Ubuntu等常用系统。</p><h3 id="1、下载脚本"><a href="#1、下载脚本" class="headerlink" title="1、下载脚本"></a>1、下载脚本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.moerats.com/usr/shell/block-ips.sh</span><br></pre></td></tr></table></figure><h3 id="2、使用方法"><a href="#2、使用方法" class="headerlink" title="2、使用方法"></a>2、使用方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#这里以中国为例，如果想屏蔽其它国家的，请自行修改最后的代码参数</span><br><span class="line">#添加规则</span><br><span class="line">bash block-ips.sh -a cn</span><br><span class="line"></span><br><span class="line">#开始屏蔽</span><br><span class="line">bash block-ips.sh -b cn</span><br><span class="line"></span><br><span class="line">#被屏蔽的国家列表</span><br><span class="line">bash block-ips.sh -l</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> </p><p>其它国家代码查看：<a target="_blank" rel="noopener" href="http://www.ipdeny.com/ipblocks">点击进入</a>。记住后面的参数均为小写字母。比如JAPAN (JP)，我们就在后面用jp这个参数。</p><p>文章参考：<a target="_blank" rel="noopener" href="https://lolico.moe/projects/block-countries-ips.html">Block IPs from countries</a></p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><nav class="pagination"><a class="extend prev" rel="prev" href="/page/20/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><span class="page-number current">21</span><a class="page-number" href="/page/22/">22</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/22/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div><script>window.addEventListener("tabs:register",()=>{let t=CONFIG.comments["activeClass"];var e;(t=CONFIG.comments.storage?localStorage.getItem("comments_active")||t:t)&&(e=document.querySelector(`a[href="#comment-${t}"]`))&&e.click()}),CONFIG.comments.storage&&window.addEventListener("tabs:click",t=>{t.target.matches(".tabs-comment .tab-content .tab-pane")&&(t=t.target.classList[1],localStorage.setItem("comments_active",t))})</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jarod</p><div class="site-description" itemprop="description">记录生活中的点点滴滴</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">258</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">306</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/jarodvip" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jarodvip" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jarod</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="站点总字数">647k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">9:48</span></div><div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script></body></html>