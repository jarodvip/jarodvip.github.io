<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha256-VHqXKFhhMxcpubYf9xiWdCiojEbY9NexQ4jh8AxbvcM=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"jarod.vip","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.26.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"always","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script><meta name="description" content="本文将介绍使用官方源和第三方源在 Debian 12 和 Ubuntu 24.04 安装最新版 Nginx + PHP + MySQL 的教程，并且可以自行选择 PHP 版本。 PS：本文同时适用于 Debian 11 Bullseye，Ubuntu 20.04 Focal 以及 Ubuntu 22.04 Jammy 以下操作需要在 root 用户下完成，请使用 sudo -i 或 su root"><meta property="og:type" content="article"><meta property="og:title" content="Debian 12 &#x2F; Ubuntu 24.04 使用源安装 LEMP 教程"><meta property="og:url" content="https://jarod.vip/2024/12/14/debian-12-ubuntu-24-04-%E4%BD%BF%E7%94%A8%E6%BA%90%E5%AE%89%E8%A3%85-lemp-%E6%95%99%E7%A8%8B/index.html"><meta property="og:site_name" content="Jarod&#39;s Blog"><meta property="og:description" content="本文将介绍使用官方源和第三方源在 Debian 12 和 Ubuntu 24.04 安装最新版 Nginx + PHP + MySQL 的教程，并且可以自行选择 PHP 版本。 PS：本文同时适用于 Debian 11 Bullseye，Ubuntu 20.04 Focal 以及 Ubuntu 22.04 Jammy 以下操作需要在 root 用户下完成，请使用 sudo -i 或 su root"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.jarods.org/wp-content/uploads/2024/12/debian-lemp-php-info.png"><meta property="article:published_time" content="2024-12-13T18:27:42.000Z"><meta property="article:modified_time" content="2025-12-28T07:54:18.871Z"><meta property="article:author" content="Jarod"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="Debian"><meta property="article:tag" content="LEMP"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.jarods.org/wp-content/uploads/2024/12/debian-lemp-php-info.png"><link rel="canonical" href="https://jarod.vip/2024/12/14/debian-12-ubuntu-24-04-%E4%BD%BF%E7%94%A8%E6%BA%90%E5%AE%89%E8%A3%85-lemp-%E6%95%99%E7%A8%8B/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://jarod.vip/2024/12/14/debian-12-ubuntu-24-04-%E4%BD%BF%E7%94%A8%E6%BA%90%E5%AE%89%E8%A3%85-lemp-%E6%95%99%E7%A8%8B/","path":"2024/12/14/debian-12-ubuntu-24-04-使用源安装-lemp-教程/","title":"Debian 12 / Ubuntu 24.04 使用源安装 LEMP 教程"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Debian 12 / Ubuntu 24.04 使用源安装 LEMP 教程 | Jarod's Blog</title><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script><script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="Jarod's Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><div class="column"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">Jarod's Blog</p><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger" aria-label="搜索" role="button"></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a></li></ul></nav></header><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F%E5%B9%B6%E5%AE%89%E8%A3%85%E9%83%A8%E5%88%86%E5%BF%85%E8%A6%81%E8%BD%AF%E4%BB%B6"><span class="nav-number">1.</span> <span class="nav-text">1、更新系统并安装部分必要软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81%E5%A2%9E%E5%8A%A0%E7%83%A7%E9%A5%BC%E5%8D%9A%E5%AE%A2%E6%89%93%E5%8C%85%E7%9A%84-Nginx-%E6%BA%90%E5%B9%B6%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">2、增加烧饼博客打包的 Nginx 源并安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E9%A6%96%E5%85%88%E5%A2%9E%E5%8A%A0-GPG-Key"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 首先增加 GPG Key</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E7%84%B6%E5%90%8E%E5%A2%9E%E5%8A%A0-Nginx-%E6%BA%90"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 然后增加 Nginx 源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E6%8E%A5%E7%9D%80%E6%9B%B4%E6%96%B0%E5%B9%B6%E5%AE%89%E8%A3%85-Nginx"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 接着更新并安装 Nginx</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81%E5%A2%9E%E5%8A%A0-Ondrej-Sury-%E5%A4%A7%E7%A5%9E%E6%89%93%E5%8C%85%E7%9A%84-PHP-%E6%BA%90%E5%B9%B6%E5%AE%89%E8%A3%85-PHP-8-x"><span class="nav-number">3.</span> <span class="nav-text">3、增加 Ondřej Surý 大神打包的 PHP 源并安装 PHP 8.x</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-Debian-%E5%92%8C-Ubuntu-%E5%AE%89%E8%A3%85-LEMP-%E5%8C%BA%E5%88%AB"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 Debian 和 Ubuntu 安装 LEMP 区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%8A%A0%E5%85%A5%E5%A4%A7%E7%A5%9E%E5%81%9A%E5%A5%BD%E7%9A%84%E6%BA%90"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 加入大神做好的源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E6%9B%B4%E6%96%B0%E7%B3%BB%E7%BB%9F"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 更新系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%E5%AE%89%E8%A3%85%E8%87%AA%E5%B7%B1%E9%9C%80%E8%A6%81%E7%9A%84-PHP-%E7%89%88%E6%9C%AC"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 安装自己需要的 PHP 版本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-%E9%87%8D%E5%90%AF-PHP-%E5%92%8C-Nginx"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 重启 PHP 和 Nginx</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81%E5%AE%89%E8%A3%85-MariaDB"><span class="nav-number">4.</span> <span class="nav-text">4、安装 MariaDB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E9%A6%96%E5%85%88%EF%BC%8C%E6%B7%BB%E5%8A%A0%E5%B9%B6%E5%AF%BC%E5%85%A5-Mariadb-%E7%9A%84%E5%AE%98%E6%96%B9%E6%BA%90"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 首先，添加并导入 Mariadb 的官方源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E6%8E%A5%E7%9D%80%E6%9B%B4%E6%96%B0%E4%B8%80%E4%B8%8B%E7%B3%BB%E7%BB%9F"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 接着更新一下系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E7%84%B6%E5%90%8E%E7%9B%B4%E6%8E%A5%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%A8%B3%E5%AE%9A%E7%89%88-MariaDB"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 然后直接安装最新稳定版 MariaDB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B9%B6%E6%B5%8B%E8%AF%95"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 创建数据库并测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%E3%80%81%E5%AE%89%E8%A3%85-MySQL-8-0-%E5%8F%AF%E9%80%89"><span class="nav-number">5.</span> <span class="nav-text">5、安装 MySQL 8.0 (可选)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E6%B7%BB%E5%8A%A0-apt-%E6%BA%90"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 添加 apt 源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E5%AE%89%E8%A3%85-MySQL-8-0"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 安装 MySQL 8.0</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Jarod</p><div class="site-description" itemprop="description">记录生活中的点点滴滴</div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">299</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">345</span> <span class="site-state-item-name">标签</span></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><a href="https://github.com/jarodvip" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jarodvip" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a></span></div></div></div></div></aside></div><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://jarod.vip/2024/12/14/debian-12-ubuntu-24-04-%E4%BD%BF%E7%94%A8%E6%BA%90%E5%AE%89%E8%A3%85-lemp-%E6%95%99%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Jarod"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Jarod's Blog"><meta itemprop="description" content="记录生活中的点点滴滴"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Debian 12 &#x2F; Ubuntu 24.04 使用源安装 LEMP 教程 | Jarod's Blog"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Debian 12 / Ubuntu 24.04 使用源安装 LEMP 教程</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2024-12-14 02:27:42" itemprop="dateCreated datePublished" datetime="2024-12-14T02:27:42+08:00">2024-12-14</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2025-12-28 15:54:18" itemprop="dateModified" datetime="2025-12-28T15:54:18+08:00">2025-12-28</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">Linux教程</span></a> </span></span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>8.7k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>8 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>本文将介绍使用官方源和第三方源在 Debian 12 和 Ubuntu 24.04 安装最新版 Nginx + PHP + MySQL 的教程，并且可以自行选择 PHP 版本。 <strong>PS：本文同时适用于 Debian 11 Bullseye，Ubuntu 20.04 Focal 以及 Ubuntu 22.04 Jammy</strong> 以下操作需要在 root 用户下完成，请使用 <code>sudo -i</code> 或 <code>su root</code> 切换到 root 用户进行操作。</p><h2 id="1、更新系统并安装部分必要软件"><a href="#1、更新系统并安装部分必要软件" class="headerlink" title="1、更新系统并安装部分必要软件"></a>1、更新系统并安装部分必要软件</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt upgrade -y</span><br><span class="line">apt install curl vim wget gnupg dpkg apt-transport-https lsb-release ca-certificates</span><br></pre></td></tr></table></figure><p><strong>如果您通过 iso 方式安装 Debian 12 并且设置了 root 密码，则默认不带 <code>sudo</code> 包，使用 <code>apt install sudo</code> 安装即可</strong></p><h2 id="2、增加烧饼博客打包的-Nginx-源并安装"><a href="#2、增加烧饼博客打包的-Nginx-源并安装" class="headerlink" title="2、增加烧饼博客打包的 Nginx 源并安装"></a>2、增加烧饼博客打包的 Nginx 源并安装</h2><p>这里我们推荐<a target="_blank" rel="noopener" href="https://n.wtf/">烧饼博客</a>团队打包的 Nginx 源，这货是在<a target="_blank" rel="noopener" href="https://salsa.debian.org/nginx-team">官方 Nginx 打包组</a>的基础上，保持更新最新版本的 Nginx 以及 OpenSSL。</p><h3 id="2-1-首先增加-GPG-Key"><a href="#2-1-首先增加-GPG-Key" class="headerlink" title="2.1 首先增加 GPG Key"></a>2.1 首先增加 GPG Key</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://n.wtf/public.key  gpg --dearmor &gt; /usr/share/keyrings/n.wtf.gpg</span><br></pre></td></tr></table></figure><h3 id="2-2-然后增加-Nginx-源"><a href="#2-2-然后增加-Nginx-源" class="headerlink" title="2.2 然后增加 Nginx 源"></a>2.2 然后增加 Nginx 源</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/n.wtf.gpg] https://mirror-cdn.xtom.com/sb/nginx/ <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/n.wtf.list</span><br></pre></td></tr></table></figure><p>国内机器可以用<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/">清华 TUNA</a> 的国内源：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/n.wtf.gpg] https://mirrors.tuna.tsinghua.edu.cn/u.sb/ <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/n.wtf.list</span><br></pre></td></tr></table></figure><h3 id="2-3-接着更新并安装-Nginx"><a href="#2-3-接着更新并安装-Nginx" class="headerlink" title="2.3 接着更新并安装 Nginx"></a>2.3 接着更新并安装 Nginx</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install nginx-extras -y</span><br></pre></td></tr></table></figure><p>安装完毕后，我们可以使用 <code>nginx -V</code> 命令看到 Nginx 已经是最新的 1.27.0 主线版了：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@debian ~ <span class="comment"># nginx -V</span></span><br><span class="line">nginx version: nginx-n.wtf/1.27.2</span><br><span class="line">built with OpenSSL 3.4.0 22 Oct 2024</span><br><span class="line">TLS SNI support enabled</span><br></pre></td></tr></table></figure><h2 id="3、增加-Ondrej-Sury-大神打包的-PHP-源并安装-PHP-8-x"><a href="#3、增加-Ondrej-Sury-大神打包的-PHP-源并安装-PHP-8-x" class="headerlink" title="3、增加 Ondřej Surý 大神打包的 PHP 源并安装 PHP 8.x"></a>3、增加 Ondřej Surý 大神打包的 PHP 源并安装 PHP 8.x</h2><p><a target="_blank" rel="noopener" href="https://deb.sury.org/">Ondřej Surý</a> 大佬打包的 PHP 源更好用，Ubuntu 的 <a target="_blank" rel="noopener" href="https://launchpad.net/~ondrej/+archive/ubuntu/php">PPA for PHP</a> 就是这位大佬做的，当然少不了 Debian 的源了，下面一步一步来。</p><h3 id="3-1-Debian-和-Ubuntu-安装-LEMP-区别"><a href="#3-1-Debian-和-Ubuntu-安装-LEMP-区别" class="headerlink" title="3.1 Debian 和 Ubuntu 安装 LEMP 区别"></a>3.1 Debian 和 Ubuntu 安装 LEMP 区别</h3><p>唯一区别就是 PHP 的安装添加源方法不一样，其他的步骤都一毛一样。</p><h3 id="3-2-加入大神做好的源"><a href="#3-2-加入大神做好的源" class="headerlink" title="3.2 加入大神做好的源"></a>3.2 加入大神做好的源</h3><p>Debian</p><p>Ubuntu</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O /usr/share/keyrings/php.gpg https://packages.sury.org/php/apt.gpg</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/php.gpg] https://packages.sury.org/php/ <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/php.list</span><br></pre></td></tr></table></figure><p>这个大神的 GPG 密钥每两年会更新一个新的，如果 GPG 密钥失效，重新下载 GPG 密钥即可。 国内机器可以用<a target="_blank" rel="noopener" href="https://mirror.nju.edu.cn/">南京大学</a> 的国内源：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O /usr/share/keyrings/php.gpg https://mirror.nju.edu.cn/sury/php/apt.gpg</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/php.gpg] https://mirror.nju.edu.cn/sury/php/ <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/php.list</span><br></pre></td></tr></table></figure><p>Ubuntu 的 PPA 暂时没有国内镜像，可以使用 USTC 反代的方式：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl <span class="string">&quot;https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0x14aa40ec0831756756d7f66c4f4ea0aae5267a6c&quot;</span>  gpg --dearmor &gt; /usr/share/keyrings/php.gpg</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/php.gpg] https://launchpad.proxy.ustclug.org/ondrej/php/ubuntu <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/php.list</span><br></pre></td></tr></table></figure><p>如果 GPG 密钥失效，请<a target="_blank" rel="noopener" href="https://launchpad.net/~ondrej/+archive/ubuntu/php/">查看最新的 GPG 密钥</a>。</p><h3 id="3-3-更新系统"><a href="#3-3-更新系统" class="headerlink" title="3.3 更新系统"></a>3.3 更新系统</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt upgrade -y</span><br></pre></td></tr></table></figure><h3 id="3-4-安装自己需要的-PHP-版本"><a href="#3-4-安装自己需要的-PHP-版本" class="headerlink" title="3.4 安装自己需要的 PHP 版本"></a>3.4 安装自己需要的 PHP 版本</h3><p>这个源目前默认的 PHP 是 8.4.x，如果您需要其他版本，那么请修改对应的 PHP 版本号 (注意配置文件哦)。 这里举例 WordPress 需要的部分 PHP 包： 安装 PHP 8.4.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php8.4-&#123;fpm,cli,mysql,curl,gd,mbstring,xml,zip,imap,opcache,soap,gmp,bcmath&#125; -y</span><br></pre></td></tr></table></figure><p>安装 PHP 8.3.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php8.3-&#123;fpm,cli,mysql,curl,gd,mbstring,xml,zip,imap,opcache,soap,gmp,bcmath&#125; -y</span><br></pre></td></tr></table></figure><p>安装 PHP 8.2.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php8.2-fpm php8.2-cli php8.2-mysql php8.2-curl php8.2-gd php8.2-mbstring php8.2-xml php8.2-zip php8.2-imap php8.2-opcache php8.2-soap php8.2-gmp php8.2-bcmath -y</span><br></pre></td></tr></table></figure><p>安装 PHP 8.1.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php8.1-fpm php8.1-cli php8.1-mysql php8.1-curl php8.1-gd php8.1-mbstring php8.1-xml php8.1-zip php8.1-imap php8.1-opcache php8.1-soap php8.1-gmp php8.1-bcmath -y</span><br></pre></td></tr></table></figure><p><strong>以下版本 PHP 已经 EOL，PHP 官方不再提供支持，请尽快更新您的程序兼容最新的 PHP，如果您的程序还未兼容，建议鞭策开发者</strong> 安装 PHP 8.0.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php8.0-fpm php8.0-cli php8.0-mysql php8.0-curl php8.0-gd php8.0-mbstring php8.0-xml php8.0-zip php8.0-imap php8.0-opcache php8.0-soap php8.0-gmp php8.0-bcmath -y</span><br></pre></td></tr></table></figure><p>安装 PHP 7.4.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php7.4-fpm php7.4-cli php7.4-mysql php7.4-curl php7.4-gd php7.4-mbstring php7.4-xml php7.4-xmlrpc php7.4-zip php7.4-json php7.4-imap php7.4-opcache php7.4-soap php7.4-gmp php7.4-bcmath -y</span><br></pre></td></tr></table></figure><p>安装 PHP 7.3.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php7.3-fpm php7.3-mysql php7.3-curl php7.3-gd php7.3-mbstring php7.3-xml php7.3-xmlrpc php7.3-zip php7.3-opcache</span><br></pre></td></tr></table></figure><p>安装 PHP 7.2.x (PHP 7.2 开始已经不支持 mcrypt 组件)：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php7.2-fpm php7.2-mysql php7.2-curl php7.2-gd php7.2-mbstring php7.2-xml php7.2-xmlrpc php7.2-zip php7.2-opcache</span><br></pre></td></tr></table></figure><p>安装 PHP 7.1.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php7.1-fpm php7.1-mysql php7.1-curl php7.1-gd php7.1-mbstring php7.1-mcrypt php7.1-xml php7.1-xmlrpc php7.1-zip php7.1-opcache</span><br></pre></td></tr></table></figure><p>安装 PHP 7.0.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt php7.0-fpm php7.0-mysql php7.0-curl php7.0-gd php7.0-mbstring php7.0-mcrypt php7.0-xml php7.0-xmlrpc php7.0-zip php7.0-opcache</span><br></pre></td></tr></table></figure><p>安装 PHP 5.6.x：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install php5.6-fpm php5.6-mysql php5.6-curl php5.6-gd php5.6-mbstring php5.6-mcrypt php5.6-xml php5.6-xmlrpc php5.6-zip php5.6-opcache</span><br></pre></td></tr></table></figure><p>如果希望安装其他组件，可以通过搜索看看有没有对应的包：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cache search php8.4*  grep php8.4</span><br></pre></td></tr></table></figure><p>修改 <code>php.ini</code> 防止跨目录攻击，如果安装的 PHP 8.4.x 请修改 <code>/etc/php/8.4/fpm/php.ini</code> PHP 7.4.x 请对应修改 <code>/etc/php/7.4/fpm/php.ini</code>：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/&#x27;</span> /etc/php/8.4/fpm/php.ini </span><br></pre></td></tr></table></figure><p>修改 <code>php.ini</code> 增加上传大小限制，比如我们设置 10MB：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/upload_max_filesize = 2M/upload_max_filesize = 10M/&#x27;</span> /etc/php/8.4/fpm/php.ini</span><br><span class="line">sed -i <span class="string">&#x27;s/post_max_size = 8M/post_max_size = 10M/&#x27;</span> /etc/php/8.4/fpm/php.ini</span><br></pre></td></tr></table></figure><p>您也可以同时安装多个 PHP 版本，然后使用以下命令选择系统默认的 PHP 版本：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update-alternatives --config php</span><br></pre></td></tr></table></figure><h3 id="3-5-重启-PHP-和-Nginx"><a href="#3-5-重启-PHP-和-Nginx" class="headerlink" title="3.5 重启 PHP 和 Nginx"></a>3.5 重启 PHP 和 Nginx</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart php8.4-fpm</span><br></pre></td></tr></table></figure><p>对应 PHP 7.4.x 命令如下：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart php7.4-fpm</span><br></pre></td></tr></table></figure><p>Nginx 参考配置文件如下，新建立个 <code>/etc/nginx/sites-available/example.com.conf</code>：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">cat</span> &gt;&gt; /etc/nginx/sites-available/example.com.conf &lt;&lt; EOF</span><br><span class="line">server &#123;</span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定网站目录，可根据自己情况更换，建议放在 /var/www 目录下</span></span><br><span class="line">        <span class="attribute">root</span> /var/www/example.com;</span><br><span class="line">        <span class="attribute">index</span> index.php index.html index.htm;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认第一个域名，替换 example.com 为您的域名</span></span><br><span class="line">        <span class="attribute">server_name</span> example.com;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">try_files</span> \<span class="variable">$uri</span> \<span class="variable">$uri</span>/ =<span class="number">404</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启 PHP8.4-fpm 模式，如需要安装 PHP 7.4.x 请修改为 fastcgi_pass unix:/run/php/php7.4-fpm.sock;</span></span><br><span class="line">        <span class="section">location</span> <span class="regexp">~ \.php$</span> &#123;</span><br><span class="line">            <span class="attribute">include</span> snippets/fastcgi-php.conf;</span><br><span class="line">            <span class="attribute">fastcgi_pass</span> unix:/run/php/php8.4-fpm.sock;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>然后把这个配置文件软链接到 <code>/etc/nginx/sites-enabled</code> 目录使其生效：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/example.com.conf /etc/nginx/sites-enabled/example.com.conf</span><br></pre></td></tr></table></figure><p>到这里基本没有问题，可以直接重新加载 Nginx：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>或者暴力点直接重启 Nginx：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart nginx</span><br></pre></td></tr></table></figure><p>我们的目录在 <code>/var/www/example.com</code>，我们先创建这个目录：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /var/www/example.com</span><br></pre></td></tr></table></figure><p>然后创建一个 <code>phpinfo.php</code> 并输入 <code>phpinfo()</code> 函数：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt;&gt; /var/www/example.com/phpinfo.php &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&lt;?php phpinfo(); ?&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>好了，此时在浏览器输入 <code>http://example.com/phpinfo.php</code>，如果看到经典的 <code>phpinfo</code> 页面则说明安装成功，如果不成功，请仔细对比步骤查找哪里出错。 效果如下： <img src="https://www.jarods.org/wp-content/uploads/2024/12/debian-lemp-php-info.png" alt="Debian Install LEMP PHPINFO"></p><h2 id="4、安装-MariaDB"><a href="#4、安装-MariaDB" class="headerlink" title="4、安装 MariaDB"></a>4、安装 MariaDB</h2><p>自从 Debian 9.x Stretch 开始，Debian <a target="_blank" rel="noopener" href="https://mariadb.com/resources/blog/mariadb-server-default-debian-9">已经默认使用</a> Mariadb，所以我们不做对于 MySQL 和 MariaDB 的争论，直接跟着开源社区走即可。</p><h3 id="4-1-首先，添加并导入-Mariadb-的官方源"><a href="#4-1-首先，添加并导入-Mariadb-的官方源" class="headerlink" title="4.1 首先，添加并导入 Mariadb 的官方源"></a>4.1 首先，添加并导入 Mariadb 的官方源</h3><p>下载 GPG Key：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://mariadb.org/mariadb_release_signing_key.asc  gpg --dearmor &gt; /usr/share/keyrings/mariadb.gpg</span><br></pre></td></tr></table></figure><p>然后添加 MariaDB 的源：</p><p>Debian</p><p>Ubuntu</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/mariadb.gpg] https://mirror-cdn.xtom.com/mariadb/repo/11.4/debian <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/mariadb.list</span><br></pre></td></tr></table></figure><p>国内可以用清华 TUNA 的源：</p><p>Debian</p><p>Ubuntu</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/usr/share/keyrings/mariadb.gpg] https://mirrors.tuna.tsinghua.edu.cn/mariadb/repo/11.4/debian <span class="subst">$(lsb_release -sc)</span> main&quot;</span> &gt; /etc/apt/sources.list.d/mariadb.list</span><br></pre></td></tr></table></figure><p>您也可以<a target="_blank" rel="noopener" href="https://mariadb.com/kb/en/mirror-sites-for-mariadb/">在这儿</a>找到更多的 MariaDB 源。</p><h3 id="4-2-接着更新一下系统"><a href="#4-2-接着更新一下系统" class="headerlink" title="4.2 接着更新一下系统"></a>4.2 接着更新一下系统</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure><h3 id="4-3-然后直接安装最新稳定版-MariaDB"><a href="#4-3-然后直接安装最新稳定版-MariaDB" class="headerlink" title="4.3 然后直接安装最新稳定版 MariaDB"></a>4.3 然后直接安装最新稳定版 MariaDB</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install mariadb-server mariadb-client</span><br></pre></td></tr></table></figure><p>安装完毕后强烈推荐使用 <code>mariadb-secure-installation</code> 命令做一次安全设置。</p><h3 id="4-4-创建数据库并测试"><a href="#4-4-创建数据库并测试" class="headerlink" title="4.4 创建数据库并测试"></a>4.4 创建数据库并测试</h3><p><em>开启数据库之前，您可以使用 <code>pwgen</code> 这个小工具或者<a target="_blank" rel="noopener" href="https://ip.sb/password/">随机密码生成器</a>生成一个强大的随机密码，比如 32 位，然后随意挑选一个使用</em></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install pwgen</span><br><span class="line">pwgen 32</span><br></pre></td></tr></table></figure><p>使用 Mariadb root 用户登陆，因为默认使用 Unix domain socket 模式，所以本机不需要 MySQL root 密码即可登录：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mariadb <span class="operator">-</span>u root</span><br></pre></td></tr></table></figure><p>创建数据库 <code>example_database</code>：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE example_database <span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8mb4 <span class="keyword">COLLATE</span> utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>创建用户名 <code>example_user</code> 并赋予权限：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> <span class="keyword">ON</span> example_database.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">&#x27;example_user&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;这里改成您要设置的强大的没人能猜出来的随机的密码&#x27;</span>;</span><br></pre></td></tr></table></figure><p>刷新 MySQL 权限：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><p>没问题以后就可以退出了：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EXIT;</span><br></pre></td></tr></table></figure><p>新建立一个 <code>/var/www/example.com/mysql-test.php</code> 文件并测试：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt;&gt; /var/www/example.com/mysql-test.php &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">&lt;?php</span></span><br><span class="line"><span class="string">\$dbname = &#x27;example_database&#x27;;    //MySQL 数据库名</span></span><br><span class="line"><span class="string">\$dbuser = &#x27;example_user&#x27;;   //MySQL 用户名</span></span><br><span class="line"><span class="string">\$dbpass = &#x27;您的强大的没人可以猜出来的密码&#x27;;</span></span><br><span class="line"><span class="string">\$dbhost = &#x27;localhost&#x27;;  //安装在本地就用 localhost</span></span><br><span class="line"><span class="string">\$link = mysqli_connect(\$dbhost, \$dbuser, \$dbpass) or die(&quot;Unable to Connect to &#x27;\$dbhost&#x27;&quot;);</span></span><br><span class="line"><span class="string">mysqli_select_db(\$link, \$dbname) or die(&quot;Could not open the db &#x27;\$dbname&#x27;&quot;);</span></span><br><span class="line"><span class="string">\$test_query = &quot;SHOW TABLES FROM \$dbname&quot;;</span></span><br><span class="line"><span class="string">\$result = mysqli_query(\$link, \$test_query);</span></span><br><span class="line"><span class="string">\$tblCnt = 0;</span></span><br><span class="line"><span class="string">while(\$tbl = mysqli_fetch_array(\$result)) &#123;</span></span><br><span class="line"><span class="string">  \$tblCnt++;</span></span><br><span class="line"><span class="string">  #echo \$tbl[0].&quot;&amp;lt;br /&amp;gt;\n&quot;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">if (!\$tblCnt) &#123;</span></span><br><span class="line"><span class="string">  echo &quot;MySQL is working fine. There are no tables.&quot;;</span></span><br><span class="line"><span class="string">&#125; else &#123;</span></span><br><span class="line"><span class="string">  echo &quot;MySQL is working fine. There are \$tblCnt tables.&quot;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">?&gt;</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure><p>创建完毕后访问 <code>http://example.com/mysql-test.php</code> 如果出现 <code>MySQL is working fine. There are no tables.</code> 则说明 MariaDB 工作正常。</p><h2 id="5、安装-MySQL-8-0-可选"><a href="#5、安装-MySQL-8-0-可选" class="headerlink" title="5、安装 MySQL 8.0 (可选)"></a>5、安装 MySQL 8.0 (可选)</h2><p>如果您必须使用某些 MySQL 8.0 才有的功能，那么可以按照 MySQL <a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/#apt-repo-fresh-install">官网的教程</a>安装 MySQL 8.0。 *注意：*除非您知道您在做什么，否则不要同时安装 MySQL 和 MariaDB。</p><h3 id="5-1-添加-apt-源"><a href="#5-1-添加-apt-源" class="headerlink" title="5.1 添加 apt 源"></a>5.1 添加 apt 源</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://repo.mysql.com/mysql-apt-config_0.8.33-1_all.deb</span><br><span class="line">dpkg -i mysql-apt-config_0.8.33-1_all.deb</span><br></pre></td></tr></table></figure><p>国内的机器可以在添加完成后修改为清华 TUNA 源，您可以修改 <code>/etc/apt/sources.list.d/mysql-community.list</code> 文件，替换成如下内容：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/mysql/apt/debian $(lsb_release -sc) mysql-5.6 mysql-5.7 mysql-8.0 mysql-tools</span><br></pre></td></tr></table></figure><h3 id="5-2-安装-MySQL-8-0"><a href="#5-2-安装-MySQL-8-0" class="headerlink" title="5.2 安装 MySQL 8.0"></a>5.2 安装 MySQL 8.0</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install mysql-server -y</span><br></pre></td></tr></table></figure><p>默认 MySQL 会安装最新的 8.0 版本，如果您需要更低的版本，比如 5.6 或 5.7，可以使用如下命令：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg-reconfigure mysql-apt-config</span><br></pre></td></tr></table></figure><p>您可能需要设置一个强大的 root 密码，接下来的步骤和 MariaDB 基本相同，把 <code>mariadb</code> 命令换成 <code>mysql</code> 命令即可，本文不再赘述。 好了，以上就是基本的 Debian 12.x “bookworm” 安装最新版 LEMP 的教程，如有问题可以随时发评论留言讨论。</p></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Ubuntu/" rel="tag"># Ubuntu</a> <a href="/tags/Debian/" rel="tag"># Debian</a> <a href="/tags/LEMP/" rel="tag"># LEMP</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2024/12/13/mdserver-web%EF%BC%9Alinux%E4%B8%8B%E7%9A%84%E4%B8%BB%E6%9C%BA%E9%9D%A2%E6%9D%BF%EF%BC%8C%E5%BC%80%E6%BA%90%E3%80%81%E5%85%8D%E8%B4%B9%EF%BC%8C%E7%95%8C%E9%9D%A2%E7%B1%BB%E4%BC%BC%E5%AE%9D%E5%A1%94/" rel="prev" title="mdserver-web：Linux下的主机面板，开源、免费，界面类似宝塔"><i class="fa fa-angle-left"></i> mdserver-web：Linux下的主机面板，开源、免费，界面类似宝塔</a></div><div class="post-nav-item"><a href="/2024/12/18/debian%E7%B3%BB%E7%BB%9F%E6%B8%85%E7%90%86%E5%9E%83%E5%9C%BE/" rel="next" title="Debian系统清理垃圾">Debian系统清理垃圾 <i class="fa fa-angle-right"></i></a></div></div></footer></article></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Jarod</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">755k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">11:26</span></span></div><div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动</div></div></footer><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><div class="sidebar-dimmer"></div><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up fa-lg"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript></body></html>